"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{2938:function(n,e,t){t.d(e,{d:function(){return ye}});var r=t(7294),i=t(1397),a=t(9976),o=t(9641),c=t(7144),s=t(266),u=t(809),l=t.n(u);function d(n,e,t){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)(l().mark((function n(e,t,r){var i,a,o,c,s,u,d,f;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=window.location.protocol,a="https:"==i?"443":"3000",o="https:"==i?"api":"",c="Sora_".concat(e,".").concat(t),s="".concat(i,"//").concat(window.location.hostname,":").concat(a,"/").concat(o),n.next=7,fetch(s,{method:"POST",body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":c},mode:"cors"});case 7:return u=n.sent,n.next=10,u.json();case 10:if(d=n.sent,u.ok){n.next=16;break}throw f="POST ".concat(s," ").concat(u.status," (").concat(u.statusText,") target:").concat(c),d.error_type&&(f+=" error_type: ".concat(d.error_type)),new Error(f);case 16:return n.abrupt("return",d);case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(n){return d("20161101","StartRecording",{channel_id:n,expire_time:3600})}function h(n){return d("20161101","StopRecording",{channel_id:n})}function p(n,e,t,r){var i={channel_id:n,recv_connection_id:e,rid:t};return r&&(i.send_connection_id=r),d("20201005","RequestRtpStream",i)}function x(n,e,t){var r={channel_id:n,recv_connection_id:e};return t&&(r.send_connection_id=t),d("20201005","ResetRtpStream",r)}function v(n,e,t,r,i){var a={channel_id:n,recv_connection_id:e,spotlight_focus_rid:t,spotlight_unfocus_rid:r};return i&&(a.send_connection_id=i),d("20211215","RequestSpotlightRid",a)}function j(n,e,t){var r={channel_id:n,recv_connection_id:e};return t&&(r.send_connection_id=t),d("20211215","ResetSpotlightRid",r)}var C=t(8253),g=t(5893),b=function(){var n=(0,i.C)((function(n){return n.channelId})),e=(0,i.T)(),t=function(){var t=(0,s.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(n);case 3:r=t.sent,e((0,C.du)("POST successed. response: ".concat(JSON.stringify(r)))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0 instanceof Error&&e((0,C.i8)(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:t})})},y=function(){var n=(0,i.C)((function(n){return n.channelId})),e=(0,i.T)(),t=function(){var t=(0,s.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(n);case 3:r=t.sent,e((0,C.du)("POST successed. response: ".concat(JSON.stringify(r)))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0 instanceof Error&&e((0,C.i8)(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:t})})},Z=t(4051),N=t(1555),I=t(6986),T=t(8571),k=t(8052),S=function(){var n=(0,i.C)((function(n){return n.audio})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"audio",children:(0,g.jsx)(T.Z,{type:"switch",name:"audio",label:"audio",checked:n,onChange:function(n){r((0,C.$p)(n.target.checked))},disabled:t})})},w=t(1341),R=t(469),O=t(4007),E=function(){var n=(0,i.C)((function(n){return n.audioBitRate})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,g.jsx)(w.Z,{children:"audioBitRate:"}),(0,g.jsx)(R.Z,{name:"audioBitRate",value:n,onChange:function(n){(0,k.nu)(n.target.value)&&r((0,C.VY)(n.target.value))},disabled:t,children:O.xR.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},P=function(){var n=(0,i.C)((function(n){return n.audioCodecType})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,g.jsx)(w.Z,{children:"audioCodecType:"}),(0,g.jsx)(R.Z,{name:"audioCodecType",value:n,onChange:function(n){(0,k.yP)(n.target.value)&&r((0,C.PQ)(n.target.value))},disabled:t,children:O.o1.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},_=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(S,{})}),n.audioCodecType?(0,g.jsx)(N.Z,{children:(0,g.jsx)(P,{})}):null,n.audioBitRate?(0,g.jsx)(N.Z,{children:(0,g.jsx)(E,{})}):null]})},D=t(6548),V=function(){var n=(0,i.T)();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){n((0,C.pI)())}})})},B=function(){var n=(0,i.C)((function(n){return n.audioInput})),e=(0,i.C)((function(n){return n.audioInputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioInput",children:[(0,g.jsx)(w.Z,{children:"audioInput:"}),(0,g.jsx)(R.Z,{name:"audioInput",value:n,onChange:function(n){t((0,C.hS)(n.target.value)),t((0,C.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},A=function(){var n=(0,i.C)((function(n){return n.audioOutput})),e=(0,i.C)((function(n){return n.audioOutputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,g.jsx)(w.Z,{children:"audioOutput:"}),(0,g.jsx)(R.Z,{name:"audioOutput",value:n,onChange:function(n){t((0,C.SV)(n.target.value))},disabled:0===e.length,children:e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},F=function(){var n=(0,i.C)((function(n){return n.videoInput})),e=(0,i.C)((function(n){return n.videoInputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoInput",children:[(0,g.jsx)(w.Z,{children:"videoInput:"}),(0,g.jsx)(R.Z,{name:"videoInput",value:n,onChange:function(n){t((0,C.lZ)(n.target.value)),t((0,C.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},M=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[n.audioInput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(B,{})}):null,n.videoInput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(F,{})}):null,n.audioOutput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(A,{})}):null,(0,g.jsx)(V,{})]})},J=function(){var n=(0,i.C)((function(n){return n.audioTrack})),e=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"audioTrack",children:(0,g.jsx)(T.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:n,onChange:function(n){e((0,C.XP)(n.target.checked))}})})},H=function(){var n=(0,i.C)((function(n){return n.cameraDevice})),e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.video})),r=!(e?e.video:t),a=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,g.jsx)(T.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:n,onChange:function(n){a((0,C.gF)(n.target.checked))},disabled:r})})},U=function(){var n=(0,i.C)((function(n){return n.displayResolution})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,g.jsx)(w.Z,{children:"displayResolution:"}),(0,g.jsx)(R.Z,{name:"displayResolution",value:n,onChange:function(n){(0,k.ko)(n.target.value)&&e((0,C.I$)(n.target.value))},children:O.hJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},q=function(){var n=(0,i.C)((function(n){return n.micDevice})),e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.audio})),r=!(e?e.audio:t),a=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"micDevice",children:(0,g.jsx)(T.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:n,onChange:function(n){a((0,C.vX)(n.target.checked))},disabled:r})})},L=function(){var n=(0,i.C)((function(n){return n.videoTrack})),e=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"videoTrack",children:(0,g.jsx)(T.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:n,onChange:function(n){e((0,C.e_)(n.target.checked))}})})},G=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[n.displayResolution?(0,g.jsx)(N.Z,{children:(0,g.jsx)(U,{})}):null,n.micDevice?(0,g.jsx)(N.Z,{children:(0,g.jsx)(q,{})}):null,n.cameraDevice?(0,g.jsx)(N.Z,{children:(0,g.jsx)(H,{})}):null,n.audioTrack?(0,g.jsx)(N.Z,{children:(0,g.jsx)(J,{})}):null,n.videoTrack?(0,g.jsx)(N.Z,{children:(0,g.jsx)(L,{})}):null]})},z=t(2939),Q=function(){var n=(0,i.T)();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){n((0,C.Lb)())}})})},X=function(){var n=(0,i.C)((function(n){return n.audioContentHint})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,g.jsx)(w.Z,{children:"audioContentHint:"}),(0,g.jsx)(R.Z,{name:"audioContentHint",value:n,onChange:function(n){(0,k.ej)(n.target.value)&&e((0,C.mK)(n.target.value))},children:O.nT.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},W=function(){var n=(0,i.C)((function(n){return n.autoGainControl})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,g.jsx)(w.Z,{children:"autoGainControl:"}),(0,g.jsx)(R.Z,{name:"autoGainControl",value:n,onChange:function(n){(0,k.Ee)(n.target.value)&&e((0,C.yn)(n.target.value))},children:O.iN.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},$=function(){var n=(0,i.C)((function(n){return n.echoCancellation})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,g.jsx)(w.Z,{children:"echoCancellation:"}),(0,g.jsx)(R.Z,{name:"echoCancellation",value:n,onChange:function(n){(0,k.Tp)(n.target.value)&&e((0,C.LN)(n.target.value))},children:O.PS.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Y=function(){var n=(0,i.C)((function(n){return n.echoCancellationType})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,g.jsx)(w.Z,{children:"echoCancellationType:"}),(0,g.jsx)(R.Z,{name:"echoCancellationType",value:n,onChange:function(n){(0,k.Gn)(n.target.value)&&e((0,C.lW)(n.target.value))},children:O.cJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},K=function(){var n=(0,i.C)((function(n){return n.frameRate})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"frameRate",children:[(0,g.jsx)(w.Z,{children:"frameRate:"}),(0,g.jsx)(R.Z,{name:"frameRate",value:n,onChange:function(n){(0,k.F9)(n.target.value)&&e((0,C.co)(n.target.value))},children:O.YX.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},nn=function(){var n=(0,i.C)((function(n){return n.noiseSuppression})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,g.jsx)(w.Z,{children:"noiseSuppression:"}),(0,g.jsx)(R.Z,{name:"noiseSuppression",value:n,onChange:function(n){(0,k.E7)(n.target.value)&&e((0,C.fj)(n.target.value))},children:O.ad.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},en=function(){var n=(0,i.C)((function(n){return n.resolution})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"resolution",children:[(0,g.jsx)(w.Z,{children:"resolution:"}),(0,g.jsx)(R.Z,{name:"resolution",value:n,onChange:function(n){(0,k.zM)(n.target.value)&&e((0,C.Ik)(n.target.value))},children:O.Vf.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},tn=function(){var n=(0,i.C)((function(n){return n.videoContentHint})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,g.jsx)(w.Z,{children:"videoContentHint:"}),(0,g.jsx)(R.Z,{name:"videoContentHint",value:n,onChange:function(n){(0,k.s2)(n.target.value)&&e((0,C.w6)(n.target.value))},children:O.QO.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},rn=function(){var n=(0,r.useState)(!0),e=n[0],t=n[1],a=(0,i.C)((function(n){return n.displaySettings})),o=[""!==(0,i.C)((function(n){return n.audioContentHint})),""!==(0,i.C)((function(n){return n.autoGainControl})),""!==(0,i.C)((function(n){return n.noiseSuppression})),""!==(0,i.C)((function(n){return n.echoCancellation})),""!==(0,i.C)((function(n){return n.echoCancellationType})),""!==(0,i.C)((function(n){return n.videoContentHint})),""!==(0,i.C)((function(n){return n.resolution})),""!==(0,i.C)((function(n){return n.frameRate}))].some((function(n){return n})),c=["btn-collapse-options"];e&&c.push("collapsed"),o&&c.push("fw-bold");return(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)("a",{href:"#",className:c.join(" "),onClick:function(n){n.preventDefault(),t(!e)},children:"Media options"})}),(0,g.jsx)(z.Z,{in:!e,children:(0,g.jsxs)("div",{children:[a.audioConstraints?(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(X,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(W,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(nn,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)($,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(Y,{})})]}):null,a.videoConstraints?(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(tn,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(en,{})}),(0,g.jsx)(N.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,g.jsx)(K,{})})]}):null,(0,g.jsx)(Q,{})]})})]})},an=t(4184),on=t.n(an),cn=t(5697),sn=t.n(cn),un=t(4716),ln=(0,t(4680).Z)("form-floating"),dn=t(600),fn=t(1377);const mn=r.forwardRef((({bsPrefix:n,className:e,id:t,...i},a)=>{const{controlId:o}=(0,r.useContext)(fn.Z);return n=(0,dn.vE)(n,"form-range"),(0,g.jsx)("input",{...i,type:"range",ref:a,className:on()(e,n),id:t||o})}));mn.displayName="FormRange";var hn=mn;const pn=r.forwardRef((({bsPrefix:n,className:e,as:t="small",muted:r,...i},a)=>(n=(0,dn.vE)(n,"form-text"),(0,g.jsx)(t,{...i,ref:a,className:on()(e,n,r&&"text-muted")}))));pn.displayName="FormText";var xn=pn;const vn=r.forwardRef(((n,e)=>(0,g.jsx)(T.Z,{...n,ref:e,type:"switch"})));vn.displayName="Switch";var jn=Object.assign(vn,{Input:T.Z.Input,Label:T.Z.Label});const Cn=r.forwardRef((({bsPrefix:n,className:e,children:t,controlId:r,label:i,...a},o)=>(n=(0,dn.vE)(n,"form-floating"),(0,g.jsxs)(I.Z,{ref:o,className:on()(e,n),controlId:r,...a,children:[t,(0,g.jsx)("label",{htmlFor:r,children:i})]}))));Cn.displayName="FloatingLabel";var gn=Cn;const bn={_ref:sn().any,validated:sn().bool,as:sn().elementType},yn=r.forwardRef((({className:n,validated:e,as:t="form",...r},i)=>(0,g.jsx)(t,{...r,ref:i,className:on()(n,e&&"was-validated")})));yn.displayName="Form",yn.propTypes=bn;var Zn=Object.assign(yn,{Group:I.Z,Control:un.Z,Floating:ln,Check:T.Z,Switch:jn,Label:w.Z,Text:xn,Range:hn,Select:R.Z,FloatingLabel:gn}),Nn=function(){var n=(0,i.C)((function(n){return n.mediaType})),e=(0,i.C)((function(n){return n.fakeVolume})),t=(0,i.T)();return"fakeMedia"!==n?null:(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,g.jsx)(w.Z,{children:"fakeVolume:"}),(0,g.jsx)(Zn.Range,{min:"0",max:"1",step:"0.1",value:e,onChange:function(n){t((0,C.eW)(n.target.value))}})]})},In=function(n){var e=n.label,t=n.disabled,r=n.onChange,i=n.mediaType;return(0,g.jsx)(T.Z,{type:"radio",inline:!0,id:e,label:e,value:e,checked:i===e,onChange:r,disabled:t})},Tn=function(){var n=(0,i.C)((function(n){return n.soraContents.connectionStatus})),e=(0,i.C)((function(n){return n.mediaType})),t=(0,k.nh)(n),r=(0,i.T)(),a=function(n){(0,k.nm)(n.target.value)&&r((0,C.y5)(n.target.value))};return(0,g.jsxs)(I.Z,{className:"form-inline flex-wrap",children:[(0,g.jsx)(w.Z,{children:"mediaType:"}),(0,g.jsx)(In,{label:"getUserMedia",mediaType:e,disabled:t,onChange:a}),(0,g.jsx)(In,{label:"getDisplayMedia",mediaType:e,disabled:t,onChange:a}),(0,g.jsx)(In,{label:"fakeMedia",mediaType:e,disabled:t,onChange:a})]})},kn=function(){return(0,i.C)((function(n){return n.displaySettings})).mediaType?(0,g.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(Tn,{})}),(0,g.jsx)(N.Z,{children:(0,g.jsx)(Nn,{})})]}):null},Sn=t(4407),wn=function(){var n=(0,i.C)((function(n){return n.simulcastRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,g.jsx)(w.Z,{children:"simulcastRid:"}),(0,g.jsx)(R.Z,{name:"simulcastRid",value:n,onChange:function(n){(0,k.zG)(n.target.value)&&r((0,C.vM)(n.target.value))},disabled:t,children:O.WJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Rn=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsx)(Z.Z,{xs:"auto",className:"form-row",children:n.simulcastRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(wn,{})}):null})},On=function(){var n=(0,i.C)((function(n){return n.spotlightFocusRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,g.jsx)(w.Z,{children:"spotlightFocusRid:"}),(0,g.jsx)(R.Z,{value:n,onChange:function(n){(0,k.iF)(n.target.value)&&r((0,C.CV)(n.target.value))},disabled:t,children:O.I7.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},En=function(){var n=(0,i.C)((function(n){return n.spotlightNumber})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,g.jsx)(w.Z,{children:"spotlightNumber:"}),(0,g.jsx)(R.Z,{value:n,onChange:function(n){(0,k.EQ)(n.target.value)&&r((0,C.TT)(n.target.value))},disabled:t,children:O.Xr.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Pn=function(){var n=(0,i.C)((function(n){return n.spotlightUnfocusRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,g.jsx)(w.Z,{children:"spotlightUnfocusRid:"}),(0,g.jsx)(R.Z,{value:n,onChange:function(n){(0,k.iF)(n.target.value)&&r((0,C.qV)(n.target.value))},disabled:t,children:O.I7.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},_n=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[n.spotlightNumber?(0,g.jsx)(N.Z,{children:(0,g.jsx)(En,{})}):null,n.spotlightFocusRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(On,{})}):null,n.spotlightUnfocusRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Pn,{})}):null]})},Dn=function(){var n=(0,i.C)((function(n){return n.video})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"video",children:(0,g.jsx)(T.Z,{type:"switch",name:"video",label:"video",checked:n,onChange:function(n){r((0,C.ge)(n.target.checked))},disabled:t})})},Vn=O.Q5.slice();Vn.splice(O.Q5.indexOf("15000")+1,0,"support-message");var Bn=function(){var n=(0,i.C)((function(n){return n.videoBitRate})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,g.jsx)(w.Z,{children:"videoBitRate:"}),(0,g.jsx)(R.Z,{name:"videoBitRate",value:n,onChange:function(n){(0,k.Uz)(n.target.value)&&r((0,C.as)(n.target.value))},disabled:t,children:Vn.map((function(n){var e=n;return""===n?e="\u672a\u6307\u5b9a":"support-message"===n&&(e="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,g.jsx)("option",{value:n,disabled:"support-message"===n,children:e},n)}))})]})},An=function(){var n=(0,i.C)((function(n){return n.videoCodecType})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,k.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,g.jsx)(w.Z,{children:"videoCodecType:"}),(0,g.jsx)(R.Z,{name:"videoCodecType",value:n,onChange:function(n){(0,k.ou)(n.target.value)&&r((0,C.h2)(n.target.value))},disabled:t,children:O.Sh.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Fn=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(Dn,{})}),n.videoCodecType?(0,g.jsx)(N.Z,{children:(0,g.jsx)(An,{})}):null,n.videoBitRate?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Bn,{})}):null]})},Mn=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,p(t,e.connectionId,n.rid);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:a})})},Jn=function(){var n=(0,r.useRef)(null),e=(0,r.useRef)(null),t=(0,i.C)((function(n){return n.soraContents.sora})),a=(0,i.C)((function(n){return n.channelId})),o=(0,i.T)();if(null===t||void 0===t||!t.connectionId)return null;var c=function(){var r=(0,s.Z)(l().mark((function r(){var i,c,s;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t&&void 0!==t&&t.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==n.current&&null!==e.current){r.next=4;break}return r.abrupt("return");case 4:return i=n.current.value,c=e.current.value,r.prev=6,r.next=9,v(a,t.connectionId,i,c);case 9:s=r.sent,o((0,C.du)("POST successed. response: ".concat(JSON.stringify(s)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&o((0,C.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsxs)(I.Z,{className:"form-inline",children:[(0,g.jsx)(R.Z,{ref:n,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,g.jsx)(R.Z,{ref:e,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:c})]})})},Hn=function(){var n=(0,i.C)((function(n){return n.soraContents.sora})),e=(0,i.C)((function(n){return n.channelId})),t=(0,i.T)(),r=function(){var r=(0,s.Z)(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,x(e,n.connectionId);case 5:i=r.sent,t((0,C.du)("POST successed. response: ".concat(JSON.stringify(i)))),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),r.t0 instanceof Error&&t((0,C.i8)(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:r})})},Un=function(){var n=(0,i.C)((function(n){return n.soraContents.sora})),e=(0,i.C)((function(n){return n.channelId})),t=(0,i.T)(),r=function(){var r=(0,s.Z)(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,j(e,n.connectionId);case 5:i=r.sent,t((0,C.du)("POST successed. response: ".concat(JSON.stringify(i)))),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),r.t0 instanceof Error&&t((0,C.i8)(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:r})})},qn=t(6435),Ln=function(n){return(0,g.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,g.jsx)("p",{id:n.id,className:"mx-2 p-1",children:n.text}),(0,g.jsx)("div",{className:"border-left border-secondary",children:(0,g.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(e){(0,k.f7)(n.text),e.currentTarget.blur()},children:(0,g.jsx)(qn.R,{})})})]})},Gn=function(n){var e=n.localVideo,t=n.connectionId,r=n.clientId;return(0,g.jsxs)(g.Fragment,{children:[t?(0,g.jsx)(Ln,{id:e?"local-video-connection-id":void 0,text:t}):null,null!==r&&void 0!==r&&t!==r?(0,g.jsx)(Ln,{id:e?"local-video-client-id":void 0,text:r}):null]})},zn=t(2809);function Qn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var Xn=function(n){var e,t=n.displayResolution,i=n.stream,a=n.mute,o=n.audioOutput,c=n.setHeight,s=(0,r.useRef)(null),u=(0,k.fl)(t);return(0,r.useEffect)((function(){var n=new ResizeObserver((function(n){n.forEach((function(n){c(n.contentRect.height)}))}));return s.current&&(o&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),n.observe(s.current)),function(){n.disconnect()}}),[]),(0,r.useEffect)((function(){s.current&&a&&(s.current.muted=!0)}),[a]),(0,r.useEffect)((function(){var n;s.current&&i?(i.getVideoTracks().forEach((function(e){n=e.enabled,e.enabled=!1})),s.current.onloadedmetadata=function(e){i.getVideoTracks().forEach((function(e){void 0!==n&&(e.enabled=n)}))},s.current.srcObject=i,o&&i.getAudioTracks().length>0&&s.current.setSinkId(o)):s.current&&null===i&&(s.current.srcObject=null)}),[i]),o&&null!==(e=s.current)&&void 0!==e&&e.setSinkId&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),(0,g.jsx)("video",{id:n.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:a,ref:s,width:0<u.width?u.width:void 0,height:0<u.height?u.height:void 0})},Wn=r.memo((function(n){return(0,g.jsx)(Xn,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(t),!0).forEach((function(e){(0,zn.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n))}));function $n(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Yn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(t),!0).forEach((function(e){(0,zn.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$n(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Kn=2.5,ne=10,ee="#CCCCCC";function te(n,e,t){n.beginPath(),n.fillStyle=e,n.fillRect(0,t,25,ne),n.closePath()}function re(n,e){var t=Math.ceil(e/12.5),r=e-ne;te(n,ee,r);for(var i=0;i<t;i++)te(n,ee,r=r-ne-Kn)}var ie=function(n){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(0!==n.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(n.stream),i=t.createAnalyser();i.fftSize=2048;var a=i.frequencyBinCount,o=new Uint8Array(a);r.connect(i);var c=null;return function n(){c=requestAnimationFrame(n),i.getByteTimeDomainData(o);var t=Array.from(o),r=Math.max.apply(null,t)-128,a=e.current;if(null!==a){var s=a.getContext("2d");null!==s&&(s.clearRect(0,0,25,a.height),s.save(),re(s,a.height),function(n,e,t){for(var r=e*t,i=Math.ceil(r/12.5),a=0;a<i;a++)te(n,"#000000",e-ne*(a+1)-Kn*a)}(s,a.height,r/128),s.restore())}}(),function(){t&&t.close(),c&&cancelAnimationFrame(c)}}}),[]),(0,g.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},ae=function(n){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n=e.current;if(null!==n){var t=n.getContext("2d");null!==t&&(t.clearRect(0,0,25,n.height),t.save(),re(t,n.height),t.restore())}}),[]),(0,g.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},oe=r.memo((function(n){return n.micDevice&&0<n.stream.getAudioTracks().length?(0,g.jsx)(ie,Yn({},n)):(0,g.jsx)(ae,Yn({},n))})),ce=function(){var n=(0,r.useState)(0),e=n[0],t=n[1],a=(0,i.C)((function(n){return n.audioOutput})),o=(0,i.C)((function(n){return n.displayResolution})),c=(0,i.C)((function(n){return n.focusedSpotlightConnectionIds})),s=(0,i.C)((function(n){return n.soraContents.connectionId})),u=(0,i.C)((function(n){return n.soraContents.localMediaStream})),l=(0,i.C)((function(n){return n.micDevice})),d=s&&c[s];return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"d-flex",children:(0,g.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(d?" spotlight-focused":""),children:[(0,g.jsx)(Wn,{stream:u,setHeight:t,audioOutput:a,displayResolution:o,localVideo:!0,mute:!0}),null!==u?(0,g.jsx)(oe,{micDevice:l,stream:u,height:e}):null]})})})},se=function(){var n=(0,i.C)((function(n){return n.soraContents.connectionId})),e=(0,i.C)((function(n){return n.soraContents.clientId})),t=(0,i.C)((function(n){return n.simulcast})),r=(0,i.C)((function(n){return n.spotlight})),a=(0,i.C)((function(n){return n.role}));return(0,g.jsx)("div",{className:"row my-1",children:(0,g.jsxs)("div",{className:"col-auto",children:[(0,g.jsxs)("div",{className:"video-status mb-1",children:[null!==n||null!==e?(0,g.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,g.jsx)(Gn,{connectionId:n,clientId:e,localVideo:!0})}):null,null!==n&&!r&&t&&"sendonly"!==a?(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Mn,{rid:"r0"}),(0,g.jsx)(Mn,{rid:"r1"}),(0,g.jsx)(Mn,{rid:"r2"}),(0,g.jsx)(Hn,{})]}):null,null!==n&&r?(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Jn,{}),(0,g.jsx)(Un,{})]}):null]}),"recvonly"!==a?(0,g.jsx)(ce,{}):null]})})},ue=t(6311),le=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,p(t,e.connectionId,n.rid,n.sendConnectionId);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:a})},de=function(n){var e=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,i.C)((function(n){return n.soraContents.sora})),o=(0,i.C)((function(n){return n.channelId})),c=(0,i.T)();if(null===a||void 0===a||!a.connectionId)return null;var u=function(){var r=(0,s.Z)(l().mark((function r(){var i,s,u;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==a&&void 0!==a&&a.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==e.current&&null!==t.current){r.next=4;break}return r.abrupt("return");case 4:return i=e.current.value,s=t.current.value,r.prev=6,r.next=9,v(o,a.connectionId,i,s,n.sendConnectionId);case 9:u=r.sent,c((0,C.du)("POST successed. response: ".concat(JSON.stringify(u)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&c((0,C.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsxs)(I.Z,{className:"form-inline",children:[(0,g.jsx)(R.Z,{ref:e,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,g.jsx)(R.Z,{ref:t,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:u})]})})},fe=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,x(t,e.connectionId,n.sendConnectionId);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:a})},me=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,j(t,e.connectionId,n.sendConnectionId);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:a})};function he(n,e,t){if(null!==e){var r=[];return"video"===t?r=e.getVideoTracks().map((function(n){return n.id})):"audio"===t&&(r=e.getAudioTracks().map((function(n){return n.id}))),n.find((function(n){if(n.id&&!n.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in n){var e=n;return e.trackIdentifier&&r.includes(e.trackIdentifier)}return!1}))}}var pe=function(n){var e=(0,i.C)((function(n){return n.soraContents.statsReport})),t=(0,i.C)((function(n){return n.soraContents.prevStatsReport})),r=he(e,n.stream,n.type),a=he(t,n.stream,n.type);if(!r)return null;var o=r.jitterBufferDelay,c=r.jitterBufferEmittedCount;a&&(o=r.jitterBufferDelay-a.jitterBufferDelay,c=r.jitterBufferEmittedCount-a.jitterBufferEmittedCount);var s=Math.floor(o/c*1e3),u="normal-jitter-buffer";return 500<s?u="critical-jitter-buffer":300<s?u="danger-jitter-buffer":100<s&&(u="warning-jitter-buffer"),(0,g.jsx)("div",{className:"btn btn-sm mx-1 ".concat(u),children:(0,g.jsxs)("span",{children:[n.type,": ",s]})})};function xe(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return ve(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return o=n.done,n},e:function(n){c=!0,a=n},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw a}}}}function ve(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function je(n,e){if(null===e)return[];var t,r=e.getTracks().map((function(n){return n.id})),i=[],a=xe(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if((!o.id||o.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in o){var c=o;c.trackIdentifier&&r.includes(c.trackIdentifier)&&i.push(c)}}}catch(s){a.e(s)}finally{a.f()}return i}var Ce=function(n){var e=(0,i.C)((function(n){return n.showStats})),t=(0,i.C)((function(n){return n.soraContents.statsReport})),r=(0,i.C)((function(n){return n.soraContents.prevStatsReport}));if(!e)return null;var a=je(t,n.stream),o=je(r,n.stream);return(0,g.jsx)(g.Fragment,{children:a.map((function(n){var e=0,t=0,r=o.find((function(e){return n.id===e.id}));return r&&(e=n.jitterBufferDelay-r.jitterBufferDelay,t=n.jitterBufferEmittedCount-r.jitterBufferEmittedCount),(0,g.jsx)("div",{children:(0,g.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(n).map((function(n){var e=(0,ue.Z)(n,2),t=e[0],r=e[1];return(0,g.jsxs)("li",{children:[(0,g.jsxs)("strong",{children:[t,":"]})," ",r]},t)})),(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(e/t*1e3)]})]})},n.id)}))})},ge=function(n){var e=(0,r.useState)(0),t=e[0],a=e[1],o=(0,i.C)((function(n){return n.audioOutput})),c=(0,i.C)((function(n){return n.displayResolution})),s=(0,i.C)((function(n){return n.focusedSpotlightConnectionIds})),u=(0,i.C)((function(n){return n.multistream})),l=(0,i.C)((function(n){return n.mute})),d=(0,i.C)((function(n){return n.simulcast})),f=(0,i.C)((function(n){return n.spotlight})),m=n.stream.id&&s[n.stream.id];return(0,g.jsxs)("div",{className:"col-auto",children:[(0,g.jsxs)("div",{className:"video-status",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Gn,{connectionId:n.stream.id}),(0,g.jsx)(pe,{type:"audio",stream:n.stream}),(0,g.jsx)(pe,{type:"video",stream:n.stream})]}),(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[!f&&u&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(le,{rid:"r0",sendConnectionId:n.stream.id}),(0,g.jsx)(le,{rid:"r1",sendConnectionId:n.stream.id}),(0,g.jsx)(le,{rid:"r2",sendConnectionId:n.stream.id}),(0,g.jsx)(fe,{sendConnectionId:n.stream.id})]}):null,f&&u&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(de,{sendConnectionId:n.stream.id}),(0,g.jsx)(me,{sendConnectionId:n.stream.id})]}):null]})]}),(0,g.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,g.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(m?" spotlight-focused":""),children:[(0,g.jsx)(Wn,{stream:n.stream,setHeight:a,mute:l,audioOutput:o,displayResolution:c}),(0,g.jsx)(oe,{micDevice:!0,stream:n.stream,height:t})]}),(0,g.jsx)(Ce,{stream:n.stream})]})]})},be=function(){var n=(0,i.C)((function(n){return n.soraContents.remoteMediaStreams}));return(0,g.jsx)("div",{className:"row my-2",children:n.map((function(n){return(0,g.jsx)(ge,{stream:n},n.id)}))})},ye=function(){var n=(0,i.C)((function(n){return n.debug})),e=(0,i.C)((function(n){return n.role}));return(0,g.jsxs)("div",{className:n?"col-devtools col-6":"col-devtools col-12",children:[(0,g.jsx)(a.P,{}),(0,g.jsx)(D.P,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(_,{}),(0,g.jsx)(Fn,{}),(0,g.jsx)(_n,{}),(0,g.jsx)(Rn,{}),(0,g.jsx)(Sn.V,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(kn,{}),(0,g.jsx)(rn,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(M,{}),(0,g.jsx)(G,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)(o.l,{}),(0,g.jsx)(c.c,{}),(0,g.jsx)(b,{}),(0,g.jsx)(y,{})]}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(se,{}),"recvonly"===e||"sendrecv"===e?(0,g.jsx)(be,{}):null]})}}}]);