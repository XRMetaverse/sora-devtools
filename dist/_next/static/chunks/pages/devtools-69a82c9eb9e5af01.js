(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{9646:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return pi}});var a=t(959),r=t(7571),i=t(1655),o=t(7117),s=t.n(o),c=t(4517),l=t(8426),u=t(1792),d=t(8933),f=t(1876),m=t(8943);function p(e){var n=new Date(e),t=n.getFullYear(),a=n.getMonth()+1,r=n.getDate(),i=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0"),c=n.getMilliseconds().toString().padStart(3,"0");return"".concat(t,"-").concat(a,"-").concat(r," ").concat(i,":").concat(o,":").concat(s,".").concat(c)}function g(e){return navigator.clipboard?navigator.clipboard.writeText(e):Promise.resolve()}function h(e,n){return"string"===typeof e&&n.indexOf(e)>=0}function v(){var e,n=function(e){if("string"===typeof e)return e},t=function(e){if("string"===typeof e)return Z(e)},a=function(e,n){if(h(e,n))return e},r=f.Z.parse(location.search);if("string"===typeof r.signalingUrlCandidates)try{e=JSON.parse(r.signalingUrlCandidates)}catch(o){}var i={apiUrl:n(r.apiUrl),audio:t(r.audio),audioBitRate:a(r.audioBitRate,m.xR),audioCodecType:a(r.audioCodecType,m.o1),audioStreamingLanguageCode:n(r.audioStreamingLanguageCode),autoGainControl:a(r.autoGainControl,m.iN),bundleId:n(r.bundleId),channelId:n(r.channelId),clientId:n(r.clientId),googCpuOveruseDetection:t(r.googCpuOveruseDetection),debug:t(r.debug),debugType:a(r.debugType,m.aF),displayResolution:a(r.displayResolution,m.hJ),e2ee:t(r.e2ee),echoCancellation:a(r.echoCancellation,m.PS),echoCancellationType:a(r.echoCancellationType,m.cJ),noiseSuppression:a(r.noiseSuppression,m.ad),facingMode:a(r.facingMode,m.pT),fakeVolume:n(r.fakeVolume),frameRate:a(r.frameRate,m.YX),mediaType:a(r.mediaType,m.w_),metadata:n(r.metadata),showStats:t(r.showStats),signalingNotifyMetadata:n(r.signalingNotifyMetadata),signalingUrlCandidates:Array.isArray(e)?e:void 0,forwardingFilter:n(r.forwardingFilter),simulcast:a(r.simulcast,m.VE),simulcastRid:a(r.simulcastRid,m.WJ),spotlight:a(r.spotlight,m.VJ),spotlightNumber:a(r.spotlightNumber,m.Xr),spotlightFocusRid:a(r.spotlightFocusRid,m.I7),spotlightUnfocusRid:a(r.spotlightUnfocusRid,m.I7),resolution:a(r.resolution,m.Vf),video:t(r.video),videoBitRate:a(r.videoBitRate,m.Q5),videoCodecType:a(r.videoCodecType,m.Sh),videoVP9Params:n(r.videoVP9Params),videoH264Params:n(r.videoH264Params),videoAV1Params:n(r.videoAV1Params),audioInput:n(r.audioInput),videoInput:n(r.videoInput),audioOutput:n(r.audioOutput),mute:t(r.mute),dataChannelSignaling:a(r.dataChannelSignaling,m.l9),ignoreDisconnectWebSocket:a(r.ignoreDisconnectWebSocket,m.kt),micDevice:t(r.micDevice),cameraDevice:t(r.cameraDevice),audioTrack:t(r.audioTrack),videoTrack:t(r.videoTrack),dataChannels:n(r.dataChannels),reconnect:t(r.reconnect),audioContentHint:a(r.audioContentHint,m.nT),videoContentHint:a(r.videoContentHint,m.QO),aspectRatio:a(r.aspectRatio,m.Ii),resizeMode:a(r.resizeMode,m.L4),blurRadius:a(r.blurRadius,m.G_),lightAdjustment:a(r.lightAdjustment,m.Xv),mediaProcessorsNoiseSuppression:t(r.mediaProcessorsNoiseSuppression),multistream:a(r.multistream,m.u9),role:a(r.role,m.K$),lyraParamsBitrate:a(r.lyraParamsBitrate,m.P1)};return Object.keys(i).map((function(e){void 0===i[e]&&delete i[e]})),i}function x(e,n){if(e)return n.filter((function(e){return""!==e}));var t="https:"===window.location.protocol?"wss://":"ws://",a=window.location.port?":".concat(window.location.port):"";return t+window.location.hostname+a+"/signaling"}function j(e){switch(e){case"120p (160x120)":return{width:160,height:120};case"180p (320x180)":return{width:320,height:180};case"240p (320x240)":return{width:320,height:240};case"360p (640x360)":return{width:640,height:360};case"480p (640x480)":return{width:640,height:480};case"720p (1280x720)":return{width:1280,height:720};case"1080p (1920x1080)":return{width:1920,height:1080};case"2160p (3840x2160)":return{width:3840,height:2160};default:return{width:0,height:0}}}function b(e){switch(e){case"4:3":return 4/3;case"16:9":return 16/9;case"21:9":return 20/9;default:return NaN}}function C(e){switch(e){case"weak":return 5;case"medium":return 10;case"strong":return 15;default:return 0}}function y(e){switch(e){case"weak":return{adjustmentLevel:30,sharpnessLevel:0};case"medium":return{adjustmentLevel:50,sharpnessLevel:10,focusMask:new c.MH("https://cdn.jsdelivr.net/npm/@shiguredo/light-adjustment@latest/dist")};case"strong":return{adjustmentLevel:70,sharpnessLevel:20,minIntensity:10,focusMask:new c.MH("https://cdn.jsdelivr.net/npm/@shiguredo/light-adjustment@latest/dist")};default:return{}}}function k(e){var n=e.audio,t=e.autoGainControl,a=e.noiseSuppression,r=e.echoCancellation,i=e.echoCancellationType,o=e.audioInput;if(!n)return!1;if(!t&&!a&&!r&&!i&&!o)return n;var s={};o&&(s.deviceId={exact:o});var c=Z(t);void 0!==c&&(s.autoGainControl=c);var l=Z(a);void 0!==l&&(s.noiseSuppression=l);var u=Z(r);return void 0!==u&&(s.echoCancellation=u),i&&(s.echoCancellationType=i),s}function S(e){var n=e.video,t=e.frameRate,a=e.resolution,r=e.videoInput,i=e.aspectRatio,o=e.resizeMode,s=e.facingMode;if(!n)return!1;if(!t&&!a&&!r&&!i&&!o&&!s)return n;var c={};if(t&&(c.frameRate={min:parseInt(t,10),max:parseInt(t,10)}),a){var l=j(a),u=l.width,d=l.height;0<u&&0<d&&(c.width={exact:u},c.height={exact:d})}return r&&(c.deviceId={exact:r}),i&&(c.aspectRatio=b(i)),o&&(c.resizeMode=o),"front"===s?c.facingMode="user":"back"===s&&(c.facingMode={exact:"environment"}),c}function w(e){var n=e.audio,t=e.video,a=e.frameRate,r=e.resolution,i=e.volume,o=e.aspectRatio,s=e.resizeMode,c=parseInt(a,10)||30,l=j(r),u=l.width||240,d={audio:n,video:t,frameRate:c,width:u,height:l.height||160,fontSize:Math.floor(u/5),volume:parseFloat(i)};return t&&(o||s)&&(d.videoTrackConstraints={},o&&(d.videoTrackConstraints.aspectRatio=b(o)),s&&(d.videoTrackConstraints.resizeMode=s)),d}function N(e){var n=e.aspectRatio,t=e.frameRate,a=e.resizeMode,r=e.resolution;if(!t&&!r&&!n&&!a)return{video:!0};var i={};if(t&&(i.frameRate=parseInt(t,10)),r){var o=j(r),s=o.width,c=o.height;0<s&&0<c&&(i.width=s,i.height=c)}return n&&(i.aspectRatio=b(n)),a&&(i.resizeMode=a),{video:i}}function P(e){var n=new MediaStream,t=null;if(e.video){(t=document.createElement("canvas")).getContext("2d"),t.width=e.width,t.height=e.height;var a=t.captureStream(e.frameRate).getTracks()[0];e.videoTrackConstraints&&a.applyConstraints(e.videoTrackConstraints),n.addTrack(a)}var r=null;if(e.audio){var i=new(window.AudioContext||window.webkitAudioContext),o=i.createOscillator();o.type="sine",r=i.createGain(),o.connect(r),o.start(0);var s=i.createMediaStreamDestination();r.connect(s);var c=s.stream.getTracks();n.addTrack(c[0]),r.gain.setValueAtTime(e.volume,0)}return{canvas:t,mediaStream:n,gainNode:r}}function I(e,n,t,a){if(null!==e){var r=e.getContext("2d");if(r){r.globalCompositeOperation="source-over",r.clearRect(0,0,e.width,e.height),r.fillStyle="#"+("0".repeat(6)+n.toString(16)).slice(-6),r.fillRect(0,0,e.width,e.height),r.fillStyle="#"+("0".repeat(6)+(16777215-n).toString(16)).slice(-6),r.font="".concat(t,"px Arial");var i=e.width/2-t/2,o=t/4*(a.length-1),s=e.height/2+t/2.5;r.fillText(a,i-o,s)}}}function Z(e){return"true"===e||"false"!==e&&void 0}function T(e,n){if(e){try{return JSON.parse(n)}catch(t){}return n}}function R(){if(!window.RTCRtpSender||!RTCRtpSender.getCapabilities)return"VP9";var e=RTCRtpSender.getCapabilities("video");if(!e||!e.codecs)return"VP9";var n=e.codecs.map((function(e){return e.mimeType.replace("video/","")}));return n.includes("VP9")?"VP9":n.includes("VP8")?"VP8":n.includes("H264")?"H264":n.includes("AV1")?"AV1":n.includes("H265")?"H265":"VP9"}function O(){return M.apply(this,arguments)}function M(){return(M=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==navigator.mediaDevices){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function D(e){return"connected"===e||"connecting"===e}function V(e){return{id:e.id,label:e.label,kind:e.kind,enabled:e.enabled,muted:e.muted,readyState:e.readyState,contentHint:e.contentHint,getConstraints:e.getConstraints(),getCapabilities:e.getCapabilities?e.getCapabilities():null,getSettings:e.getSettings()}}function A(e){var n={audio:e.audio,video:e.video};e.audioCodecType&&(n.audioCodecType=e.audioCodecType);var t=parseInt(e.audioBitRate,10);t&&(n.audioBitRate=t),e.videoCodecType&&(n.videoCodecType=e.videoCodecType);var a=parseInt(e.videoBitRate,10);a&&(n.videoBitRate=a),e.videoVP9Params&&(n.videoVP9Params=T(!0,e.videoVP9Params)),e.videoH264Params&&(n.videoH264Params=T(!0,e.videoH264Params)),e.videoAV1Params&&(n.videoAV1Params=T(!0,e.videoAV1Params));var r=Z(e.multistream);void 0!==r&&(n.multistream=r),e.e2ee&&(n.e2ee=!0);var i=Z(e.spotlight);void 0!==i&&(n.spotlight=i,!0===i&&(e.spotlightNumber&&(n.spotlightNumber=parseInt(e.spotlightNumber)),e.spotlightFocusRid&&(n.spotlightFocusRid=e.spotlightFocusRid),e.spotlightUnfocusRid&&(n.spotlightUnfocusRid=e.spotlightUnfocusRid)));var o=Z(e.simulcast);if(void 0!==o&&(n.simulcast=o,!0===o&&e.simulcastRid&&(n.simulcastRid=e.simulcastRid)),e.enabledSignalingNotifyMetadata&&(n.signalingNotifyMetadata=T(!0,e.signalingNotifyMetadata)),e.enabledForwardingFilter&&(n.forwardingFilter=T(!0,e.forwardingFilter)),e.enabledBundleId&&(n.bundleId=e.bundleId),e.enabledClientId&&(n.clientId=e.clientId),e.enabledDataChannel){var s=Z(e.dataChannelSignaling);void 0!==s&&(n.dataChannelSignaling=s);var c=Z(e.ignoreDisconnectWebSocket);void 0!==c&&(n.ignoreDisconnectWebSocket=c)}if(""!==e.dataChannels){var l=[];try{l=JSON.parse(e.dataChannels)}catch(u){console.warn("Illegal format DataChannels")}Array.isArray(l)&&(n.dataChannels=l)}return e.enabledAudioStreamingLanguageCode&&(n.audioStreamingLanguageCode=e.audioStreamingLanguageCode),e.lyraParamsBitrate&&(n.audioLyraParamsBitrate=parseInt(e.lyraParamsBitrate,10)),n}var E=t(6908);function F(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function H(e,n){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)(s().mark((function e(n,t){var a,r,i,o,d,f,m,p,g,h,v,x,j,b,Z,T,R,O,M,D,V,A,B,H,U,L,_,G,W,K,q,X,Q,$,Y,ee,ne,te,ae;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="MEDIA_CONSTRAINTS","getDisplayMedia"!==t.mediaType){e.next=16;break}if(t.video&&t.cameraDevice){e.next=4;break}return e.abrupt("return",[new MediaStream,null]);case 4:if(void 0!==navigator.mediaDevices){e.next=6;break}throw new Error("Failed to call getUserMedia. Make sure domain is secure");case 6:return r=N({frameRate:t.frameRate,resolution:t.resolution,aspectRatio:t.aspectRatio,resizeMode:t.resizeMode}),n(E.t.actions.setLogMessages({title:a,description:JSON.stringify(r)})),n(E.t.actions.setTimelineMessage(z("media-constraints",r))),e.next=11,navigator.mediaDevices.getDisplayMedia(r);case 11:i=e.sent,n(E.t.actions.setTimelineMessage(z("succeed-get-display-media"))),o=F(i.getVideoTracks());try{for(o.s();!(d=o.n()).done;)void 0!==(f=d.value).contentHint&&(f.contentHint=t.videoContentHint),f.enabled=t.videoTrack,n(E.t.actions.setTimelineMessage(J("start",f)))}catch(s){o.e(s)}finally{o.f()}return e.abrupt("return",[i,null]);case 16:if("mediacaptureRegion"!==t.mediaType){e.next=58;break}if(t.video&&t.cameraDevice){e.next=19;break}return e.abrupt("return",[new MediaStream,null]);case 19:if(void 0!==window.CropTarget){e.next=21;break}throw new Error("Failed to call CropTarget");case 21:if(void 0!==navigator.mediaDevices){e.next=23;break}throw new Error("Failed to call getDisplayMedia. Make sure domain is secure");case 23:return(m=N({frameRate:t.frameRate,resolution:t.resolution,aspectRatio:t.aspectRatio,resizeMode:t.resizeMode})).preferCurrentTab=!0,n(E.t.actions.setLogMessages({title:a,description:JSON.stringify(m)})),n(E.t.actions.setTimelineMessage(z("media-constraints",m))),e.next=29,navigator.mediaDevices.getDisplayMedia(m);case 29:if(p=e.sent,null!==(g=document.querySelector("#cropArea"))){e.next=33;break}throw new Error("Failed to get CropTraget Element");case 33:return e.next=35,window.CropTarget.fromElement(g);case 35:h=e.sent,n(E.t.actions.setTimelineMessage(z("succeed-get-display-media"))),v=F(p.getVideoTracks()),e.prev=38,v.s();case 40:if((x=v.n()).done){e.next=49;break}return void 0!==(j=x.value).contentHint&&(j.contentHint=t.videoContentHint),j.enabled=t.videoTrack,e.next=46,j.cropTo(h);case 46:n(E.t.actions.setTimelineMessage(J("start",j)));case 47:e.next=40;break;case 49:e.next=54;break;case 51:e.prev=51,e.t0=e.catch(38),v.e(e.t0);case 54:return e.prev=54,v.f(),e.finish(54);case 57:return e.abrupt("return",[p,null]);case 58:if("fakeMedia"!==t.mediaType||!t.fakeContents.worker){e.next=70;break}b=w({audio:t.audio&&t.micDevice,video:t.video&&t.cameraDevice,frameRate:t.frameRate,resolution:t.resolution,volume:t.fakeVolume,aspectRatio:t.aspectRatio,resizeMode:t.resizeMode}),n(E.t.actions.setLogMessages({title:a,description:JSON.stringify(b)})),n(E.t.actions.setTimelineMessage(z("media-constraints",b))),Z=P(b),T=Z.canvas,R=Z.mediaStream,O=Z.gainNode,null!==T&&(t.fakeContents.worker.onmessage=function(e){var n=e.data;"update"===n.type&&I(T,t.fakeContents.colorCode,b.fontSize,n.counter.toString())},t.fakeContents.worker.postMessage({type:"stop"}),t.fakeContents.worker.postMessage({type:"start",interval:1e3/b.frameRate})),M=F(R.getVideoTracks());try{for(M.s();!(D=M.n()).done;)void 0!==(V=D.value).contentHint&&(V.contentHint=t.videoContentHint),V.enabled=t.videoTrack,n(E.t.actions.setTimelineMessage(J("start",V)))}catch(s){M.e(s)}finally{M.f()}A=F(R.getAudioTracks());try{for(A.s();!(B=A.n()).done;)void 0!==(H=B.value).contentHint&&(H.contentHint=t.audioContentHint),H.enabled=t.audioTrack,n(E.t.actions.setTimelineMessage(J("start",H)))}catch(s){A.e(s)}finally{A.f()}return n(E.t.actions.setTimelineMessage(z("succeed-create-fake-media"))),e.abrupt("return",[R,O]);case 70:if(void 0!==navigator.mediaDevices){e.next=72;break}throw new Error("Failed to call getUserMedia. Make sure domain is secure");case 72:if(U=new MediaStream,!(L=k({audio:t.audio&&t.micDevice,autoGainControl:t.autoGainControl,noiseSuppression:t.noiseSuppression,echoCancellation:t.echoCancellation,echoCancellationType:t.echoCancellationType,audioInput:t.audioInput}))){e.next=91;break}return n(E.t.actions.setLogMessages({title:a,description:JSON.stringify({audio:L})})),n(E.t.actions.setTimelineMessage(z("audio-media-constraints",{audio:L}))),e.next=79,navigator.mediaDevices.getUserMedia({audio:L});case 79:if(_=e.sent,G=_.getAudioTracks()[0],n(E.t.actions.setTimelineMessage(J("start",G))),!t.mediaProcessorsNoiseSuppression||!l.b.isSupported()){e.next=89;break}if(null!==t.noiseSuppressionProcessor){e.next=85;break}throw new Error("Failed to start NoiseSuppressionProcessor. NoiseSuppressionProcessor is 'null'");case 85:return t.noiseSuppressionProcessor.stopProcessing(),e.next=88,t.noiseSuppressionProcessor.startProcessing(G);case 88:G=e.sent;case 89:n(E.t.actions.setTimelineMessage(z("succeed-audio-get-user-media"))),U.addTrack(G);case 91:if(!(W=S({aspectRatio:t.aspectRatio,frameRate:t.frameRate,resizeMode:t.resizeMode,resolution:t.resolution,video:t.video&&t.cameraDevice,videoInput:t.videoInput,facingMode:t.facingMode}))){e.next=118;break}return n(E.t.actions.setLogMessages({title:a,description:JSON.stringify({video:W})})),n(E.t.actions.setTimelineMessage(z("video-media-constraints",{video:W}))),e.next=97,navigator.mediaDevices.getUserMedia({video:W}).catch((function(e){throw U.getTracks().forEach((function(e){e.stop()})),e}));case 97:if(K=e.sent,q=K.getVideoTracks()[0],n(E.t.actions.setTimelineMessage(J("start",q))),""===t.lightAdjustment||!c.jA.isSupported()){e.next=108;break}if(null!==t.lightAdjustmentProcessor){e.next=103;break}throw new Error("Failed to start LightAdjustmentProcessor. LightAdjustmentProcessor is 'null'");case 103:return X=y(t.lightAdjustment),t.lightAdjustmentProcessor.stopProcessing(),e.next=107,t.lightAdjustmentProcessor.startProcessing(q,X);case 107:q=e.sent;case 108:if(""===t.blurRadius||!u.sz.isSupported()){e.next=116;break}if(null!==t.virtualBackgroundProcessor){e.next=111;break}throw new Error("Failed to start VirtualBackgroundProcessor. VirtualBackgroundProcessor is 'null'");case 111:return Q={blurRadius:C(t.blurRadius)},t.virtualBackgroundProcessor.stopProcessing(),e.next=115,t.virtualBackgroundProcessor.startProcessing(q,Q);case 115:q=e.sent;case 116:n(E.t.actions.setTimelineMessage(z("succeed-video-get-user-media"))),U.addTrack(q);case 118:$=F(U.getVideoTracks());try{for($.s();!(Y=$.n()).done;)void 0!==(ee=Y.value).contentHint&&(ee.contentHint=t.videoContentHint),ee.enabled=t.videoTrack}catch(s){$.e(s)}finally{$.f()}ne=F(U.getAudioTracks());try{for(ne.s();!(te=ne.n()).done;)void 0!==(ae=te.value).contentHint&&(ae.contentHint=t.audioContentHint),ae.enabled=t.audioTrack}catch(s){ne.e(s)}finally{ne.f()}return e.abrupt("return",[U,null]);case 123:case"end":return e.stop()}}),e,null,[[38,51,54,57]])})))).apply(this,arguments)}function L(e,n,t){t.on("log",(function(n,t){e(E.t.actions.setLogMessages({title:n,description:JSON.stringify(t)}))})),t.on("notify",(function(n,t){"spotlight.focused"===n.event_type&&"string"===typeof n.connection_id&&e(E.t.actions.setFocusedSpotlightConnectionId(n.connection_id)),"spotlight.unfocused"===n.event_type&&"string"===typeof n.connection_id&&e(E.t.actions.setUnFocusedSpotlightConnectionId(n.connection_id)),"connection.destroyed"===n.event_type&&"string"===typeof n.connection_id&&e(E.t.actions.deleteFocusedSpotlightConnectionId(n.connection_id)),e(E.t.actions.setNotifyMessages({timestamp:(new Date).getTime(),message:n,transportType:t}))})),t.on("push",(function(n,t){e(E.t.actions.setPushMessages({timestamp:(new Date).getTime(),message:n,transportType:t}))})),t.on("track",(function(t){if(e(E.t.actions.setTimelineMessage(z("event-on-track"))),!n().soraContents.remoteMediaStreams.find((function(e){return e.id===t.streams[0].id}))){var a,r=F(t.streams[0].getTracks());try{for(r.s();!(a=r.n()).done;){var i=a.value;e(E.t.actions.setTimelineMessage(z("remote-".concat(i.kind,"-mediastream-track"),V(i))))}}catch(o){r.e(o)}finally{r.f()}e(E.t.actions.setRemoteMediaStream(t.streams[0]))}})),t.on("removetrack",(function(t){e(E.t.actions.setTimelineMessage(z("event-on-removetrack"))),n().soraContents.remoteMediaStreams.find((function(e){if(null!==t&&void 0!==t&&t.target)return e.id===t.target.id}))&&e(E.t.actions.removeRemoteMediaStream(t.target.id))})),t.on("disconnect",(function(t){var a={type:t.type,title:t.title};void 0!==t.code&&(a.code=t.code),void 0!==t.reason&&(a.reason=t.reason),void 0!==t.params&&(a.params=t.params),e(E.t.actions.setTimelineMessage(z("event-on-disconnect",a)));var r,i=n(),o=i.fakeContents,s=i.soraContents,c=i.reconnect,l=i.lightAdjustmentProcessor,u=i.noiseSuppressionProcessor,d=i.virtualBackgroundProcessor,f=s.localMediaStream,m=s.remoteMediaStreams;if(l&&l.isProcessing()&&(r=l.getOriginalTrack(),l.stopProcessing()),d&&d.isProcessing()&&(void 0===r&&(r=d.getOriginalTrack()),d.stopProcessing()),void 0!==r?(r.stop(),e(E.t.actions.setTimelineMessage(J("stop",r)))):f&&f.getVideoTracks().forEach((function(n){n.stop(),e(E.t.actions.setTimelineMessage(J("stop",n)))})),u&&u.isProcessing()){var p=u.getOriginalTrack();p&&(p.stop(),e(E.t.actions.setTimelineMessage(J("stop",p)))),u.stopProcessing()}else f&&f.getAudioTracks().forEach((function(n){n.stop(),e(E.t.actions.setTimelineMessage(J("stop",n)))}));m.forEach((function(e){e.getTracks().forEach((function(e){e.stop()}))})),o.worker&&o.worker.postMessage({type:"stop"}),e(E.t.actions.setSora(null)),e(E.t.actions.setSoraConnectionStatus("disconnected")),e(E.t.actions.setLocalMediaStream(null)),e(E.t.actions.removeAllRemoteMediaStreams()),e(E.t.actions.setSoraInfoAlertMessage("Disconnect Sora.")),e(E.t.actions.setTimelineMessage(z("disconnected"))),"abend"===t.type&&c&&e(E.t.actions.setSoraReconnecting(!0))})),t.on("timeline",(function(n){var t={timestamp:(new Date).getTime(),type:n.type,data:n.data,dataChannelId:n.dataChannelId,dataChannelLabel:n.dataChannelLabel,logType:n.logType};e(E.t.actions.setTimelineMessage(t)),n.data&&"object"===typeof n.data&&"sdp"in n.data&&e(E.t.actions.setTimelineMessage(z("".concat(n.type,"-sdp"),n.data.sdp)))})),t.on("signaling",(function(n){var t={timestamp:(new Date).getTime(),transportType:n.transportType,type:n.type,data:n.data};e(E.t.actions.setSignalingMessage(t))})),t.on("message",(function(n){e(E.t.actions.setDataChannelMessage({timestamp:(new Date).getTime(),label:n.label,data:n.data}))})),t.on("datachannel",(function(n){e(E.t.actions.setSoraDataChannels(n.datachannel))}))}function _(e){return{audio:e.audio,audioBitRate:e.audioBitRate,audioCodecType:e.audioCodecType,audioStreamingLanguageCode:e.audioStreamingLanguageCode,bundleId:e.bundleId,clientId:e.clientId,dataChannelSignaling:e.dataChannelSignaling,dataChannels:e.enabledDataChannels?e.dataChannels:"",e2ee:e.e2ee,enabledAudioStreamingLanguageCode:e.enabledAudioStreamingLanguageCode,enabledBundleId:e.enabledBundleId,enabledClientId:e.enabledClientId,enabledDataChannel:e.enabledDataChannel,enabledSignalingNotifyMetadata:e.enabledSignalingNotifyMetadata,enabledForwardingFilter:e.enabledForwardingFilter,enabledVideoVP9Params:e.enabledVideoVP9Params,enabledVideoH264Params:e.enabledVideoH264Params,enabledVideoAV1Params:e.enabledVideoAV1Params,ignoreDisconnectWebSocket:e.ignoreDisconnectWebSocket,lyraParamsBitrate:e.lyraParamsBitrate,multistream:e.multistream,signalingNotifyMetadata:e.signalingNotifyMetadata,forwardingFilter:e.forwardingFilter,simulcast:e.simulcast,simulcastRid:e.simulcastRid,spotlight:e.spotlight,spotlightFocusRid:e.spotlightFocusRid,spotlightNumber:e.spotlightNumber,spotlightUnfocusRid:e.spotlightUnfocusRid,video:e.video,videoBitRate:e.videoBitRate,videoCodecType:e.videoCodecType,videoVP9Params:e.videoVP9Params,videoH264Params:e.videoH264Params,videoAV1Params:e.videoAV1Params}}function z(e,n){return{type:e,logType:"sora-devtools",timestamp:(new Date).getTime(),data:n}}function J(e,n){var t=V(n);return z("".concat(e,"-").concat(n.kind,"-mediastream-track"),t)}function G(e,n){return W.apply(this,arguments)}function W(){return(W=(0,i.Z)(s().mark((function e(n,t){var a,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pc||"closed"===(null===(a=t.pc)||void 0===a?void 0:a.iceConnectionState)){e.next=7;break}return e.next=3,t.pc.getStats();case 3:r=e.sent,i=[],r.forEach((function(e){i.push(e)})),n(E.t.actions.setStatsReport(i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(){return function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(),!(r=a.soraContents).sora){e.next=6;break}return n(E.t.actions.setSoraConnectionStatus("disconnecting")),e.next=5,r.sora.disconnect();case 5:n(E.t.actions.setSoraConnectionStatus("disconnected"));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},q=function(){return function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:a=e.sent,r=[],i=[],o=[],a.forEach((function(e){""!==e.deviceId&&("audioinput"===e.kind?r.push(e.toJSON()):"audiooutput"===e.kind?o.push(e.toJSON()):"videoinput"===e.kind&&i.push(e.toJSON()))})),n(E.t.actions.setAudioInputDevices(r)),n(E.t.actions.setVideoInputDevices(i)),n(E.t.actions.setAudioOutputDevices(o));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},X=function(){return function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,i,o,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t()).soraContents.sora){e.next=3;break}return e.abrupt("return");case 3:return a.virtualBackgroundProcessor&&a.virtualBackgroundProcessor.isProcessing()?((i=a.virtualBackgroundProcessor.getOriginalTrack())&&(i.stop(),n(E.t.actions.setTimelineMessage(J("stop",i)))),a.virtualBackgroundProcessor.stopProcessing()):a.soraContents.localMediaStream&&a.soraContents.localMediaStream.getVideoTracks().forEach((function(e){e.stop(),n(E.t.actions.setTimelineMessage(J("stop",e)))})),a.noiseSuppressionProcessor&&a.noiseSuppressionProcessor.isProcessing()?((o=a.noiseSuppressionProcessor.getOriginalTrack())&&(o.stop(),n(E.t.actions.setTimelineMessage(J("stop",o)))),a.noiseSuppressionProcessor.stopProcessing()):a.soraContents.localMediaStream&&a.soraContents.localMediaStream.getAudioTracks().forEach((function(e){e.stop(),n(E.t.actions.setTimelineMessage(J("stop",e)))})),e.next=7,H(n,a).catch((function(e){throw n(E.t.actions.setSoraErrorAlertMessage(e.toString())),n(E.t.actions.setSoraConnectionStatus("disconnected")),e}));case 7:c=e.sent,l=(0,r.Z)(c,2),u=l[0],d=l[1],u.getTracks().forEach((function(e){if(a.soraContents.sora&&a.soraContents.sora.pc){var n=a.soraContents.sora.pc.getSenders().find((function(n){return!!n.track&&n.track.kind===e.kind}));n&&n.replaceTrack(e)}})),n(E.t.actions.setLocalMediaStream(u)),n(E.t.actions.setFakeContentsGainNode(d));case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},Q=E.t.actions,$=Q.clearDataChannelMessages,Y=Q.deleteAlertMessage,ee=Q.setAPIErrorAlertMessage,ne=Q.setAPIInfoAlertMessage,te=Q.setAspectRatio,ae=Q.setAudio,re=Q.setAudioBitRate,ie=Q.setAudioCodecType,oe=Q.setAudioContentHint,se=Q.setAudioInput,ce=Q.setAudioOutput,le=Q.setAudioTrack,ue=Q.setAutoGainControl,de=Q.setBlurRadius,fe=Q.setBundleId,me=Q.setChannelId,pe=Q.setClientId,ge=Q.setDataChannels,he=Q.setDataChannelSignaling,ve=Q.setDebug,xe=Q.setDebugFilterText,je=Q.setDebugType,be=Q.setDisplayResolution,Ce=Q.setEchoCancellation,ye=Q.setEchoCancellationType,ke=Q.setEnabledBundleId,Se=Q.setEnabledClientId,we=Q.setEnabledDataChannels,Ne=Q.setEnabledDataChannel,Pe=Q.setEnabledForwardingFilter,Ie=Q.setEnabledMetadata,Ze=Q.setEnabledSignalingNotifyMetadata,Te=Q.setEnabledSignalingUrlCandidates,Re=Q.setEnabledVideoVP9Params,Oe=Q.setEnabledVideoH264Params,Me=Q.setEnabledVideoAV1Params,De=Q.setAudioStreamingLanguageCode,Ve=Q.setEnabledAudioStreamingLanguageCode,Ae=Q.setFakeVolume,Ee=Q.setFacingMode,Fe=Q.setFrameRate,Be=Q.setIgnoreDisconnectWebSocket,He=Q.setLightAdjustment,Ue=(Q.setLocalMediaStream,Q.setLogMessages,Q.setLyraParamsBitrate),Le=Q.setMediaProcessorsNoiseSuppression,_e=Q.setMediaType,ze=Q.setMetadata,Je=Q.setMultistream,Ge=Q.setNoiseSuppression,We=(Q.setNotifyMessages,Q.setReconnect),Ke=Q.setResizeMode,qe=Q.setRole,Xe=Q.setResolution,Qe=Q.setSignalingNotifyMetadata,$e=Q.setSignalingUrlCandidates,Ye=Q.setForwardingFilter,en=Q.setSimulcast,nn=Q.setSimulcastRid,tn=(Q.setSora,Q.setSoraReconnecting),an=(Q.setSoraErrorAlertMessage,Q.setSoraInfoAlertMessage,Q.setSpotlight),rn=Q.setSpotlightFocusRid,on=Q.setSpotlightNumber,sn=Q.setSpotlightUnfocusRid,cn=Q.setVideo,ln=Q.setVideoBitRate,un=Q.setVideoCodecType,dn=Q.setVideoContentHint,fn=Q.setVideoInput,mn=Q.setVideoTrack,pn=Q.setVideoVP9Params,gn=Q.setVideoH264Params,hn=Q.setVideoAV1Params,vn=t(7036),xn=function(){return(0,vn.I0)()},jn=vn.v9,bn=t(4411),Cn=t(2658),yn=t(610),kn=t(7934),Sn=t(1527),wn=function(){return(0,Sn.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-clipboard",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,Sn.jsx)("path",{fillRule:"evenodd",d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,Sn.jsx)("path",{fillRule:"evenodd",d:"M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})},Nn=function(e){return e.disabled?(0,Sn.jsx)("div",{style:{height:"31px"}}):(0,Sn.jsx)("button",{className:"btn btn-sm btn-dark",onClick:function(n){g(e.text),n.currentTarget.blur()},children:(0,Sn.jsx)(wn,{})})},Pn=function(e){var n=e.description;return void 0===n?null:"object"!==typeof n?(0,Sn.jsx)("div",{className:"debug-message",children:(0,Sn.jsx)("div",{className:"col-sm-12",children:(0,Sn.jsx)("pre",{className:e.wordBreak?"word-break":"",children:n})})}):(0,Sn.jsx)("div",{className:"debug-message",children:(0,Sn.jsx)("div",{className:"col-sm-12",children:(0,Sn.jsx)("pre",{className:e.wordBreak?"word-break":"",children:JSON.stringify(n,null,2)})})})},In=function(e){var n=e.defaultShow,t=e.description,r=e.title,i=e.timestamp,o=e.label,s=(0,a.useState)(void 0!==n&&n),c=s[0],l=s[1],u=i?r+i:r,d=void 0===t;return(0,Sn.jsxs)("div",{className:"border border-light rounded mb-1 bg-dark","data-title":r,children:[(0,Sn.jsxs)("div",{className:"d-flex justify-content-between align-items-center text-break",children:[(0,Sn.jsxs)("a",{className:"debug-title ".concat(d?"disabled":""),onClick:function(){return l(!c)},"aria-controls":u,"aria-expanded":c,children:[(0,Sn.jsx)("i",{className:"".concat(c?"arrow-bottom":"arrow-right"," ").concat(d?"disabled":"")})," ",i?(0,Sn.jsxs)("span",{className:"text-white-50 me-1",children:["[",p(i),"]"]}):null,o,(0,Sn.jsx)("span",{children:r})]}),(0,Sn.jsx)("div",{className:"border-left",children:(0,Sn.jsx)(Nn,{text:"string"===typeof t?t:JSON.stringify(t,null,2),disabled:d})})]}),(0,Sn.jsx)(kn.Z,{in:c,children:(0,Sn.jsx)("div",{className:"border-top",children:(0,Sn.jsx)(Pn,{description:t,wordBreak:e.wordBreak})})})]})};function Zn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Tn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Zn(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Rn=function(){var e=xn();return(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"clear",defaultValue:"clear",onClick:function(){e($())}})},On=function(e){var n=e.data,t=e.label,a=e.timestamp;if("ZAKURO"===(new TextDecoder).decode(n.slice(0,6))){var r=(new TextDecoder).decode(n.slice(22,48)),i=new DataView(n),o=i.getBigInt64(6),s=i.getBigInt64(14),c=n.byteLength,l="connectionId: ".concat(r,"\nUnixTimeMicro: ").concat(o,"\nCounter: ").concat(s,"\nByteLength: ").concat(c);return(0,Sn.jsx)(In,{title:t+" ZAKURO",timestamp:a,description:l,defaultShow:!0,wordBreak:!0})}var u=new Uint8Array(n).toString()+"\n(".concat((new TextDecoder).decode(n),")");return(0,Sn.jsx)(In,{title:t,timestamp:a,description:u,defaultShow:!0,wordBreak:!0})},Mn=a.memo((function(e){return(0,Sn.jsx)(On,Tn({},e))})),Dn=function(){var e=jn((function(e){return e.dataChannelMessages}));return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)("div",{className:"py-1",children:(0,Sn.jsx)(Rn,{})}),(0,Sn.jsx)("div",{className:"debug-messages",children:e.map((function(e){var n=e.label+e.timestamp;return(0,Sn.jsx)(Mn,Tn({},e),n)}))})]})},Vn=t(2267),An=t(1389),En=t(7147),Fn=function(){var e=jn((function(e){return e.debugFilterText})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline debug-filter",controlId:"channelId",children:[(0,Sn.jsx)(An.Z,{className:"text-white",children:"Filter:"}),(0,Sn.jsx)(En.Z,{type:"text",placeholder:"Filter",value:e,onChange:function(e){n(xe(e.target.value))},autoComplete:"off"})]})};function Bn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Hn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Bn(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Un=function(e){var n=e.message,t=e.timestamp;return(0,Sn.jsx)(In,{title:n.title,timestamp:t,description:JSON.parse(n.description)})},Ln=a.memo((function(e){return(0,Sn.jsx)(Un,Hn({},e))})),_n=function(){var e=jn((function(e){return e.logMessages})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e,n){return(0,Sn.jsx)(Ln,Hn({},e),e.message.title+String(n)+e.timestamp)}))})};function zn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var Jn={websocket:"#00ff00",datachannel:"#ff00ff"},Gn=function(e){var n=e.text,t=Object.keys(Jn).includes(n)?Jn[n]:void 0;return(0,Sn.jsxs)("span",{className:"me-1",style:t?{color:t}:{},children:["[",n,"]"]})},Wn=function(e){var n=e.notify,t=n.transportType?(0,Sn.jsx)(Gn,{text:n.transportType}):null;return(0,Sn.jsx)(In,{title:n.message.event_type,timestamp:n.timestamp,description:n.message,label:t})},Kn=a.memo((function(e){return(0,Sn.jsx)(Wn,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?zn(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))})),qn=function(){var e=jn((function(e){return e.notifyMessages})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e){return(0,Sn.jsx)(Kn,{notify:e},e.message.type+e.timestamp)}))})};function Xn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var Qn={websocket:"#00ff00",datachannel:"#ff00ff"},$n=function(e){var n=e.text,t=Object.keys(Qn).includes(n)?Qn[n]:void 0;return(0,Sn.jsxs)("span",{style:t?{color:t}:{},children:["[",n,"]"]})},Yn=function(e){var n=e.push,t=n.transportType?(0,Sn.jsx)($n,{text:n.transportType}):null;return(0,Sn.jsx)(In,{title:n.message.type,timestamp:n.timestamp,description:n.message,label:t})},et=a.memo((function(e){return(0,Sn.jsx)(Yn,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xn(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))})),nt=function(){var e=jn((function(e){return e.pushMessages})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e,n){var t="".concat(e.timestamp,"-").concat(n);return(0,Sn.jsx)(et,{ariaControls:t,push:e},t)}))})},tt=t(360),at=t(4369),rt=function(){var e=(0,a.useRef)(null),n=(0,a.useRef)(null),t=jn((function(e){return e.soraContents.sora})),r=jn((function(e){return e.soraContents.datachannels}));return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsxs)("div",{className:"d-flex mt-2",children:[(0,Sn.jsx)(Vn.Z,{className:"me-1",controlId:"sendDataChannelMessageLabel",children:(0,Sn.jsx)(tt.Z,{name:"sendDataChannelMessageLabel",ref:e,children:r.map((function(e){return(0,Sn.jsx)("option",{value:e.label,children:e.label},e.label)}))})}),(0,Sn.jsx)(Vn.Z,{className:"flex-grow-1 me-1",controlId:"sendDataChannelMessage",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",placeholder:"sendDataChannelMessage\u3092\u6307\u5b9a",type:"text",ref:n})}),(0,Sn.jsx)(at.Z,{variant:"secondary",onClick:function(){if(null!==e.current&&null!==n.current){var a=e.current.value;t&&t.sendMessage(a,(new TextEncoder).encode(n.current.value))}},disabled:0===r.length,children:"send"})]}),0<r.length?(0,Sn.jsx)("pre",{className:"form-control mt-2",style:{color:"#fff",backgroundColor:"#222222",maxHeight:"250px",minHeight:"250px"},children:JSON.stringify(r,null,2)}):null]})};function it(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ot(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?it(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var st={websocket:"#00ff00",datachannel:"#ff00ff"},ct=function(e){var n=e.text,t=Object.keys(st).includes(n)?st[n]:void 0;return(0,Sn.jsxs)("span",{className:"me-1",style:t?{color:t}:{},children:["[",n,"]"]})},lt=function(e){var n=e.data,t=e.type,a=e.timestamp,r=e.transportType,i=r?(0,Sn.jsx)(ct,{text:r}):null;return(0,Sn.jsx)(In,{title:t,timestamp:a,description:n,label:i})},ut=a.memo((function(e){return(0,Sn.jsx)(lt,ot({},e))})),dt=function(){var e=jn((function(e){return e.signalingMessages})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e){var n=e.type+e.timestamp;return(0,Sn.jsx)(ut,ot({},e),n)}))})};function ft(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function mt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ft(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ft(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var pt=function(e){return(0,Sn.jsx)(In,{title:"".concat(e.id,"(").concat(e.type,")"),timestamp:null,description:e})},gt=a.memo((function(e){return(0,Sn.jsx)(pt,mt({},e))})),ht=function(){var e=jn((function(e){return e.soraContents.statsReport})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e){return(0,Sn.jsx)(gt,mt({},e),e.id)}))})};function vt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function xt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?vt(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var jt={signaling:"#ff00ff",notify:"#ffff00",push:"#98fb98",e2ee:"#00ffff",stats:"#ffc0cb"},bt=function(){return(0,Sn.jsx)("span",{className:"me-1",style:{color:"#00ff00"},children:"[websocket]"})},Ct=function(){return(0,Sn.jsx)("span",{className:"me-1",style:{color:"#ff8c00"},children:"[peerconnection]"})},yt=function(){return(0,Sn.jsx)("span",{className:"me-1",style:{color:"#bce2e8"},children:"[sora]"})},kt=function(){return(0,Sn.jsx)("span",{className:"me-1",style:{color:"#73b8e2"},children:"[sora-devtools]"})},St=function(e){var n=e.label,t=e.id,a=n&&Object.keys(jt).includes(n)?jt[n]:void 0;return(0,Sn.jsxs)("span",{className:"me-1",style:a?{color:a}:{},children:["[datachannel]",n?"[".concat(n,"]"):"","number"===typeof t?"[".concat(t,"]"):""]})},wt=function(e){var n,t=e.timestamp,a=e.logType,r=e.dataChannelId,i=e.dataChannelLabel,o=e.type,s=e.data,c="".concat(o);return"websocket"===a?n=(0,Sn.jsx)(bt,{}):"datachannel"===a?n=(0,Sn.jsx)(St,{id:r,label:i}):"peerconnection"===a?n=(0,Sn.jsx)(Ct,{}):"sora"===a?n=(0,Sn.jsx)(yt,{}):"sora-devtools"===a&&(n=(0,Sn.jsx)(kt,{})),(0,Sn.jsx)(In,{title:c,timestamp:t,description:s,label:n})},Nt=a.memo((function(e){return(0,Sn.jsx)(wt,xt({},e))})),Pt=function(){var e=jn((function(e){return e.timelineMessages})),n=jn((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,Sn.jsx)("div",{className:"debug-messages",children:t.map((function(e){var n="".concat(e.timestamp,"-").concat(e.type);return e.dataChannelLabel&&(n+="-".concat(e.dataChannelLabel)),(0,Sn.jsx)(Nt,xt({},e),n)}))})},It=function(){var e=jn((function(e){return e.debug})),n=jn((function(e){return e.debugType})),t=xn();if(!e)return null;return(0,Sn.jsx)("div",{className:"col-debug col-6",children:(0,Sn.jsxs)(bn.Z,{id:"debug-tab",activeKey:n,defaultActiveKey:"timeline",onSelect:function(e){"log"!==e&&"notify"!==e&&"push"!==e&&"stats"!==e&&"timeline"!==e&&"signaling"!==e&&"messaging"!==e||t(je(e))},children:[(0,Sn.jsxs)(Cn.Z,{eventKey:"timeline",title:"Timeline",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(Pt,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"signaling",title:"Signaling",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(dt,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"notify",title:"Notfiy",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(qn,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"push",title:"Push",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(nt,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"stats",title:"Stats",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(ht,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"log",title:"Log",children:[(0,Sn.jsx)(Fn,{}),(0,Sn.jsx)(_n,{})]}),(0,Sn.jsxs)(Cn.Z,{eventKey:"messaging",title:"Messaging",children:[(0,Sn.jsx)(rt,{}),(0,Sn.jsx)(Dn,{})]})]})})},Zt=t(7278),Tt=t(6907),Rt=t(3639);function Ot(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var Mt=function(){var e=xn(),n=jn((function(e){return e.soraContents.reconnectingTrials}));return(0,a.useEffect)((function(){e(function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,o,c,l,u,f,m,p,g,h,v,j,b,C;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(E.t.actions.setTimelineMessage(z("start-reconnect"))),n(E.t.actions.setSoraConnectionStatus("connecting")),!(a=t()).soraContents.sora){e.next=6;break}return e.next=6,a.soraContents.sora.disconnect();case 6:if(o=x(a.enabledSignalingUrlCandidates,a.signalingUrlCandidates),n(E.t.actions.setLogMessages({title:"SIGNALING_URL",description:JSON.stringify(o)})),c=d.Z.connection(o,a.debug),l=_(a),u=A(l),f=T(a.enabledMetadata,a.metadata),"sendonly"!==a.role&&"sendrecv"!==a.role){e.next=20;break}return e.next=16,H(n,a).catch((function(e){throw n(E.t.actions.setSoraErrorAlertMessage(e.toString())),n(E.t.actions.setSoraConnectionStatus("disconnected")),e}));case 16:h=e.sent,v=(0,r.Z)(h,2),p=v[0],g=v[1];case 20:j=s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t().soraContents.reconnecting){e.next=3;break}return e.abrupt("return","break");case 3:if(n(E.t.actions.setSoraReconnectingTrials(r)),e.prev=4,"sendonly"!==a.role){e.next=15;break}if((m=c.sendonly(a.channelId,null,u)).metadata=f,"boolean"===typeof a.googCpuOveruseDetection&&(m.constraints={optional:[{googCpuOveruseDetection:a.googCpuOveruseDetection}]}),L(n,t,m),!p){e.next=13;break}return e.next=13,m.connect(p);case 13:e.next=31;break;case 15:if("sendrecv"!==a.role){e.next=25;break}if((m=c.sendrecv(a.channelId,null,u)).metadata=f,"boolean"===typeof a.googCpuOveruseDetection&&(m.constraints={optional:[{googCpuOveruseDetection:a.googCpuOveruseDetection}]}),L(n,t,m),!p){e.next=23;break}return e.next=23,m.connect(p);case 23:e.next=31;break;case 25:if("recvonly"!==a.role){e.next=31;break}return(m=c.recvonly(a.channelId,null,u)).metadata=f,L(n,t,m),e.next=31,m.connect();case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(4),e.t0 instanceof Error&&n(E.t.actions.setSoraErrorAlertMessage("(trials ".concat(r,") Failed to connect Sora. ").concat(e.t0.message))),m=void 0;case 37:if(void 0===m){e.next=39;break}return e.abrupt("return","break");case 39:return e.next=41,new Promise((function(e){return setTimeout(e,500*r+500)}));case 41:case"end":return e.stop()}}),e,null,[[4,33]])})),b=1;case 22:if(!(b<=10)){e.next=30;break}return e.delegateYield(j(b),"t0",24);case 24:if("break"!==e.t0){e.next=27;break}return e.abrupt("break",30);case 27:b++,e.next=22;break;case 30:if(void 0!==m){e.next=35;break}return n(E.t.actions.setSoraErrorAlertMessage("Failed to reconnect Sora.")),n(E.t.actions.setSoraConnectionStatus("disconnected")),n(E.t.actions.setSoraReconnecting(!1)),e.abrupt("return");case 35:return n(E.t.actions.setSoraInfoAlertMessage("Succeeded to reconnect Sora.")),e.next=38,G(n,m);case 38:C=setInterval((0,i.Z)(s().mark((function e(){var a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(),!(r=a.soraContents).sora){e.next=6;break}return e.next=4,G(n,r.sora);case 4:e.next=7;break;case 6:clearInterval(C);case 7:case"end":return e.stop()}}),e)}))),1e3),n(E.t.actions.setSora(m)),p&&n(E.t.actions.setLocalMediaStream(p)),g&&n(E.t.actions.setFakeContentsGainNode(g)),n(E.t.actions.setSoraConnectionStatus("connected")),n(E.t.actions.setTimelineMessage(z("connected"))),n(E.t.actions.setSoraReconnecting(!1));case 45:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}())}),[]),(0,Sn.jsxs)(Rt.Z,{delay:2e4,onClose:function(){e(tn(!1))},children:[(0,Sn.jsx)(Rt.Z.Header,{className:"bg-warning text-white",children:(0,Sn.jsx)("strong",{className:"me-auto",children:"Reconnect"})}),(0,Sn.jsx)(Rt.Z.Body,{className:"bg-light",children:(0,Sn.jsxs)("p",{className:"text-break font-weight-bold mb-0",children:["Reconnecting... (trials ",n,")"]})})]})},Dt=function(e){var n=xn(),t="error"===e.type?"bg-danger":"bg-info";return(0,Sn.jsxs)(Rt.Z,{autohide:!0,delay:2e4,onClose:function(){n(Y(e.timestamp))},children:[(0,Sn.jsxs)(Rt.Z.Header,{className:"".concat(t," text-white"),children:[(0,Sn.jsx)("strong",{className:"me-auto",children:e.title}),(0,Sn.jsx)("span",{children:p(e.timestamp)})]}),(0,Sn.jsx)(Rt.Z.Body,{className:"bg-light",children:(0,Sn.jsx)("p",{className:"text-break font-weight-bold mb-0",children:e.message})})]})},Vt=function(){var e=jn((function(e){return e.alertMessages})),n=jn((function(e){return e.soraContents.reconnecting}));return(0,Sn.jsxs)("div",{className:"alert-messages",children:[n?(0,Sn.jsx)(Mt,{}):null,e.map((function(e){return(0,Sn.jsx)(Dt,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ot(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ot(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e),e.timestamp)}))]})},At=function(e){return(0,Sn.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,Sn.jsx)("p",{id:e.id,className:"mx-2 p-1",children:e.text}),(0,Sn.jsx)("div",{className:"border-left border-secondary",children:(0,Sn.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(n){g(e.text),n.currentTarget.blur()},children:(0,Sn.jsx)(wn,{})})})]})},Et=function(e){var n=e.localVideo,t=e.connectionId,a=e.clientId;return(0,Sn.jsxs)(Sn.Fragment,{children:[t?(0,Sn.jsx)(At,{id:n?"local-video-connection-id":void 0,text:t}):null,null!==a&&void 0!==a&&t!==a?(0,Sn.jsx)(At,{id:n?"local-video-client-id":void 0,text:a}):null]})};function Ft(e,n,t,a){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,i.Z)(s().mark((function e(n,t,a,r){var i,o,c,l,u,d,f,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.location.protocol,o="https:"==i?"443":"3000",c="https:"==i?"api":"",l="".concat(i,"//").concat(window.location.hostname,":").concat(o,"/").concat(c),null!==n&&(l=n),u="Sora_".concat(t,".").concat(a),e.next=8,fetch(l,{method:"POST",body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":u},mode:"cors"});case 8:return d=e.sent,e.next=11,d.json();case 11:if(f=e.sent,d.ok){e.next=17;break}throw m="POST ".concat(l," ").concat(d.status," (").concat(d.statusText,") target:").concat(u),f.error_type&&(m+=" error_type: ".concat(f.error_type)),new Error(m);case 17:return e.abrupt("return",f);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ht(e,n){return Ft(e,"20161101","StartRecording",{channel_id:n,expire_time:3600})}function Ut(e,n){return Ft(e,"20161101","StopRecording",{channel_id:n})}function Lt(e,n,t,a,r){var i={channel_id:n,recv_connection_id:t,rid:a};return r&&(i.send_connection_id=r),Ft(e,"20201005","RequestRtpStream",i)}function _t(e,n,t,a){var r={channel_id:n,recv_connection_id:t};return a&&(r.send_connection_id=a),Ft(e,"20201005","ResetRtpStream",r)}function zt(e,n,t,a,r,i){var o={channel_id:n,recv_connection_id:t,spotlight_focus_rid:a,spotlight_unfocus_rid:r};return i&&(o.send_connection_id=i),Ft(e,"20211215","RequestSpotlightRid",o)}function Jt(e,n,t,a){var r={channel_id:n,recv_connection_id:t};return a&&(r.send_connection_id=a),Ft(e,"20211215","ResetSpotlightRid",r)}var Gt=function(e){var n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.apiUrl})),a=jn((function(e){return e.channelId})),r=xn(),o=function(){var o=(0,i.Z)(s().mark((function i(){var o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,Lt(t,a,n.connectionId,e.rid);case 5:o=i.sent,r(ne("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r(ee(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return o.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"mx-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:o})})},Wt=function(){var e=(0,a.useRef)(null),n=(0,a.useRef)(null),t=jn((function(e){return e.soraContents.sora})),r=jn((function(e){return e.channelId})),o=jn((function(e){return e.apiUrl})),c=xn();if(null===t||void 0===t||!t.connectionId)return null;var l=function(){var a=(0,i.Z)(s().mark((function a(){var i,l,u;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==t&&void 0!==t&&t.connectionId){a.next=2;break}return a.abrupt("return");case 2:if(null!==e.current&&null!==n.current){a.next=4;break}return a.abrupt("return");case 4:return i=e.current.value,l=n.current.value,a.prev=6,a.next=9,zt(o,r,t.connectionId,i,l);case 9:u=a.sent,c(ne("POST successed. response: ".concat(JSON.stringify(u)))),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(6),a.t0 instanceof Error&&c(ee(a.t0.message));case 16:case"end":return a.stop()}}),a,null,[[6,13]])})));return function(){return a.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"mx-1",children:(0,Sn.jsxs)(Vn.Z,{className:"form-inline",children:[(0,Sn.jsx)(tt.Z,{ref:e,children:m.I7.map((function(e){return""===e?null:(0,Sn.jsxs)("option",{value:e,children:["SpotlightFocusRid: ",e]},e)}))}),(0,Sn.jsx)(tt.Z,{ref:n,children:m.I7.map((function(e){return""===e?null:(0,Sn.jsxs)("option",{value:e,children:["SpotlightUnfocusRid: ",e,"\xa0\xa0\xa0"]},e)}))}),(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:l})]})})},Kt=function(){var e=jn((function(e){return e.soraContents.sora})),n=jn((function(e){return e.channelId})),t=jn((function(e){return e.apiUrl})),a=xn(),r=function(){var r=(0,i.Z)(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,_t(t,n,e.connectionId);case 5:i=r.sent,a(ne("POST successed. response: ".concat(JSON.stringify(i)))),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),r.t0 instanceof Error&&a(ee(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"mx-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:r})})},qt=function(){var e=jn((function(e){return e.soraContents.sora})),n=jn((function(e){return e.channelId})),t=jn((function(e){return e.apiUrl})),a=xn(),r=function(){var r=(0,i.Z)(s().mark((function r(){var i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,Jt(t,n,e.connectionId);case 5:i=r.sent,a(ne("POST successed. response: ".concat(JSON.stringify(i)))),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),r.t0 instanceof Error&&a(ee(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"mx-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:r})})};function Xt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}var Qt=function(e){var n,t=e.displayResolution,r=e.stream,i=e.mute,o=e.audioOutput,s=e.setHeight,c=(0,a.useRef)(null),l=j(t);return(0,a.useEffect)((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){s(e.contentRect.height)}))}));return c.current&&(o&&r&&r.getAudioTracks().length>0&&c.current.setSinkId(o),e.observe(c.current)),function(){e.disconnect()}}),[]),(0,a.useEffect)((function(){c.current&&i&&(c.current.muted=!0)}),[i]),(0,a.useEffect)((function(){var e;c.current&&r?(r.getVideoTracks().forEach((function(n){e=n.enabled,n.enabled=!1})),c.current.onloadedmetadata=function(n){r.getVideoTracks().forEach((function(n){void 0!==e&&(n.enabled=e)}))},c.current.srcObject=r,o&&r.getAudioTracks().length>0&&c.current.setSinkId(o)):c.current&&null===r&&(c.current.srcObject=null)}),[r]),o&&null!==(n=c.current)&&void 0!==n&&n.setSinkId&&r&&r.getAudioTracks().length>0&&c.current.setSinkId(o),(0,Sn.jsx)("video",{id:e.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:i,ref:c,width:0<l.width?l.width:void 0,height:0<l.height?l.height:void 0})},$t=a.memo((function(e){return(0,Sn.jsx)(Qt,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xt(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))}));function Yt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ea(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yt(Object(t),!0).forEach((function(n){(0,yn.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var na=2.5,ta=10,aa="#CCCCCC";function ra(e,n,t){e.beginPath(),e.fillStyle=n,e.fillRect(0,t,25,ta),e.closePath()}function ia(e,n){var t=Math.ceil(n/12.5),a=n-ta;ra(e,aa,a);for(var r=0;r<t;r++)ra(e,aa,a=a-ta-na)}var oa=function(e){var n=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(0!==e.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),a=t.createMediaStreamSource(e.stream),r=t.createAnalyser();r.fftSize=2048;var i=r.frequencyBinCount,o=new Uint8Array(i);a.connect(r);var s=null;return function e(){s=requestAnimationFrame(e),r.getByteTimeDomainData(o);var t=Array.from(o),a=Math.max.apply(null,t)-128,i=n.current;if(null!==i){var c=i.getContext("2d");null!==c&&(c.clearRect(0,0,25,i.height),c.save(),ia(c,i.height),function(e,n,t){for(var a=n*t,r=Math.ceil(a/12.5),i=0;i<r;i++)ra(e,"#000000",n-ta*(i+1)-na*i)}(c,i.height,a/128),c.restore())}}(),function(){t&&t.close(),s&&cancelAnimationFrame(s)}}}),[e.stream]),(0,Sn.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},sa=function(e){var n=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=n.current;if(null!==e){var t=e.getContext("2d");null!==t&&(t.clearRect(0,0,25,e.height),t.save(),ia(t,e.height),t.restore())}}),[]),(0,Sn.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},ca=a.memo((function(e){return e.micDevice&&0<e.stream.getAudioTracks().length?(0,Sn.jsx)(oa,ea({},e)):(0,Sn.jsx)(sa,ea({},e))})),la=function(){var e=(0,a.useState)(0),n=e[0],t=e[1],r=jn((function(e){return e.audio})),i=jn((function(e){return e.video})),o=jn((function(e){return e.audioOutput})),s=jn((function(e){return e.displayResolution})),c=jn((function(e){return e.focusedSpotlightConnectionIds})),l=jn((function(e){return e.soraContents.connectionId})),u=jn((function(e){return e.soraContents.localMediaStream})),d=jn((function(e){return e.micDevice})),f=l&&c[l];return!1===r&&!1===i?null:(0,Sn.jsx)(Sn.Fragment,{children:(0,Sn.jsx)("div",{className:"d-flex",children:(0,Sn.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(f?" spotlight-focused":""),children:[(0,Sn.jsx)($t,{stream:u,setHeight:t,audioOutput:o,displayResolution:s,localVideo:!0,mute:!0}),null!==u?(0,Sn.jsx)(ca,{micDevice:d,stream:u,height:n}):null]})})})},ua=function(){var e=jn((function(e){return e.soraContents.connectionId})),n=jn((function(e){return e.soraContents.clientId})),t=jn((function(e){return e.simulcast})),a=jn((function(e){return e.spotlight})),r=jn((function(e){return e.role}));return(0,Sn.jsx)("div",{className:"row my-1",children:(0,Sn.jsxs)("div",{className:"col-auto",children:[(0,Sn.jsxs)("div",{className:"video-status mb-1",children:[null!==e||null!==n?(0,Sn.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,Sn.jsx)(Et,{connectionId:e,clientId:n,localVideo:!0})}):null,null!==e&&"true"!==a&&"true"==t&&"sendonly"!==r?(0,Sn.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,Sn.jsx)(Gt,{rid:"r0"}),(0,Sn.jsx)(Gt,{rid:"r1"}),(0,Sn.jsx)(Gt,{rid:"r2"}),(0,Sn.jsx)(Kt,{})]}):null,null!==e&&"true"===a?(0,Sn.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,Sn.jsx)(Wt,{}),(0,Sn.jsx)(qt,{})]}):null]}),"recvonly"!==r?(0,Sn.jsx)(la,{}):null]})})};function da(e,n,t){if(null!==n){var a=[];return"video"===t?a=n.getVideoTracks().map((function(e){return e.id})):"audio"===t&&(a=n.getAudioTracks().map((function(e){return e.id}))),e.find((function(e){if("inbound-rtp"!==e.type)return!1;if(!("kind"in e)||!("trackIdentifier"in e))return!1;var n=e;return n.kind===t&&!!a.includes(n.trackIdentifier)}))}}var fa=function(e){var n=jn((function(e){return e.soraContents.statsReport})),t=jn((function(e){return e.soraContents.prevStatsReport})),a=da(n,e.stream,e.type),r=da(t,e.stream,e.type);if(void 0===a)return null;if(void 0===a.jitterBufferDelay||void 0===a.jitterBufferEmittedCount)return null;var i=a.jitterBufferDelay,o=a.jitterBufferEmittedCount;void 0!==r&&void 0!==r.jitterBufferDelay&&void 0!==r.jitterBufferEmittedCount&&(i=a.jitterBufferDelay-r.jitterBufferDelay,o=a.jitterBufferEmittedCount-r.jitterBufferEmittedCount);var s=Math.floor(i/o*1e3),c="normal-jitter-buffer";return 500<s?c="critical-jitter-buffer":300<s?c="danger-jitter-buffer":100<s&&(c="warning-jitter-buffer"),(0,Sn.jsx)("div",{className:"btn btn-sm mx-1 ".concat(c),children:(0,Sn.jsxs)("span",{children:[e.type,": ",s]})})},ma=function(e){var n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.apiUrl})),a=jn((function(e){return e.channelId})),r=xn(),o=function(){var o=(0,i.Z)(s().mark((function i(){var o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,Lt(t,a,n.connectionId,e.rid,e.sendConnectionId);case 5:o=i.sent,r(ne("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r(ee(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return o.apply(this,arguments)}}();return(0,Sn.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:o})},pa=function(e){var n=(0,a.useRef)(null),t=(0,a.useRef)(null),r=jn((function(e){return e.soraContents.sora})),o=jn((function(e){return e.channelId})),c=jn((function(e){return e.apiUrl})),l=xn();if(null===r||void 0===r||!r.connectionId)return null;var u=function(){var a=(0,i.Z)(s().mark((function a(){var i,u,d;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==r&&void 0!==r&&r.connectionId){a.next=2;break}return a.abrupt("return");case 2:if(null!==n.current&&null!==t.current){a.next=4;break}return a.abrupt("return");case 4:return i=n.current.value,u=t.current.value,a.prev=6,a.next=9,zt(c,o,r.connectionId,i,u,e.sendConnectionId);case 9:d=a.sent,l(ne("POST successed. response: ".concat(JSON.stringify(d)))),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(6),a.t0 instanceof Error&&l(ee(a.t0.message));case 16:case"end":return a.stop()}}),a,null,[[6,13]])})));return function(){return a.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"mx-1",children:(0,Sn.jsxs)(Vn.Z,{className:"form-inline",children:[(0,Sn.jsx)(tt.Z,{ref:n,children:m.I7.map((function(e){return""===e?null:(0,Sn.jsxs)("option",{value:e,children:["SpotlightFocusRid: ",e]},e)}))}),(0,Sn.jsx)(tt.Z,{ref:t,children:m.I7.map((function(e){return""===e?null:(0,Sn.jsxs)("option",{value:e,children:["SpotlightUnfocusRid: ",e,"\xa0\xa0\xa0"]},e)}))}),(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:u})]})})},ga=function(e){var n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.channelId})),a=jn((function(e){return e.apiUrl})),r=xn(),o=function(){var o=(0,i.Z)(s().mark((function i(){var o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,_t(a,t,n.connectionId,e.sendConnectionId);case 5:o=i.sent,r(ne("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r(ee(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return o.apply(this,arguments)}}();return(0,Sn.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:o})},ha=function(e){var n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.channelId})),a=jn((function(e){return e.apiUrl})),r=xn(),o=function(){var o=(0,i.Z)(s().mark((function i(){var o;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,Jt(a,t,n.connectionId,e.sendConnectionId);case 5:o=i.sent,r(ne("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r(ee(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return o.apply(this,arguments)}}();return(0,Sn.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:o})};function va(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return xa(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xa(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function xa(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function ja(e,n){if(null===n)return[];var t,a=n.getTracks().map((function(e){return e.id})),r=[],i=va(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if((!o.id||o.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in o){var s=o;s.trackIdentifier&&a.includes(s.trackIdentifier)&&r.push(s)}}}catch(c){i.e(c)}finally{i.f()}return r}var ba=function(e){var n=jn((function(e){return e.showStats})),t=jn((function(e){return e.soraContents.statsReport})),a=jn((function(e){return e.soraContents.prevStatsReport}));if(!n)return null;var i=ja(t,e.stream),o=ja(a,e.stream);return(0,Sn.jsx)(Sn.Fragment,{children:i.map((function(e){var n=0,t=0,a=o.find((function(n){return e.id===n.id}));return a&&(n=e.jitterBufferDelay-a.jitterBufferDelay,t=e.jitterBufferEmittedCount-a.jitterBufferEmittedCount),(0,Sn.jsx)("div",{children:(0,Sn.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,Sn.jsxs)("li",{children:[(0,Sn.jsxs)("strong",{children:[t,":"]})," ",a]},t)})),(0,Sn.jsxs)("li",{children:[(0,Sn.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(n/t*1e3)]})]})},e.id)}))})},Ca=function(e){var n=(0,a.useState)(0),t=n[0],r=n[1],i=jn((function(e){return e.audioOutput})),o=jn((function(e){return e.displayResolution})),s=jn((function(e){return e.focusedSpotlightConnectionIds})),c=jn((function(e){return e.multistream})),l=jn((function(e){return e.mute})),u=jn((function(e){return e.simulcast})),d=jn((function(e){return e.spotlight})),f=e.stream.id&&s[e.stream.id];return(0,Sn.jsxs)("div",{className:"col-auto",children:[(0,Sn.jsxs)("div",{className:"video-status",children:[(0,Sn.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,Sn.jsx)(Et,{connectionId:e.stream.id}),(0,Sn.jsx)(fa,{type:"audio",stream:e.stream}),(0,Sn.jsx)(fa,{type:"video",stream:e.stream})]}),(0,Sn.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:["true"!==d&&"true"===c&&"true"===u?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(ma,{rid:"r0",sendConnectionId:e.stream.id}),(0,Sn.jsx)(ma,{rid:"r1",sendConnectionId:e.stream.id}),(0,Sn.jsx)(ma,{rid:"r2",sendConnectionId:e.stream.id}),(0,Sn.jsx)(ga,{sendConnectionId:e.stream.id})]}):null,"true"===d&&"true"===c&&"true"===u?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(pa,{sendConnectionId:e.stream.id}),(0,Sn.jsx)(ha,{sendConnectionId:e.stream.id})]}):null]})]}),(0,Sn.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,Sn.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(f?" spotlight-focused":""),children:[(0,Sn.jsx)($t,{stream:e.stream,setHeight:r,mute:l,audioOutput:i,displayResolution:o}),(0,Sn.jsx)(ca,{micDevice:!0,stream:e.stream,height:t})]}),(0,Sn.jsx)(ba,{stream:e.stream})]})]})},ya=function(){var e=jn((function(e){return e.soraContents.remoteMediaStreams}));return(0,Sn.jsx)("div",{className:"row my-2",children:e.map((function(e){return(0,Sn.jsx)(Ca,{stream:e},e.id)}))})},ka=t(8097),Sa=t(8976),wa=function(e){var n=m.x$[e.kind];return n?(0,Sn.jsx)(ka.Z,{placement:"top",overlay:(0,Sn.jsx)(Sa.Z,{id:"popover-basic",children:(0,Sn.jsx)(Sa.Z.Body,{style:{whiteSpace:"pre-wrap"},children:n.description})}),children:(0,Sn.jsx)(An.Z,{children:e.children})}):(console.warn('Could not load description "'.concat(e.kind,'"')),(0,Sn.jsx)(An.Z,{children:e.children}))},Na=function(){var e=jn((function(e){return e.aspectRatio})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"aspectRatio",children:[(0,Sn.jsx)(wa,{kind:"aspectRatio",children:"aspectRatio:"}),(0,Sn.jsx)(tt.Z,{name:"aspectRatio",value:e,onChange:function(e){h(e.target.value,m.Ii)&&n(te(e.target.value))},children:m.Ii.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Pa=function(){var e=jn((function(e){return e.audioBitRate})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,Sn.jsx)(wa,{kind:"audioBitRate",children:"audioBitRate:"}),(0,Sn.jsx)(tt.Z,{name:"audioBitRate",value:e,onChange:function(e){h(e.target.value,m.xR)&&t(re(e.target.value))},disabled:n,children:m.xR.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ia=function(){var e=jn((function(e){return e.audioCodecType})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,Sn.jsx)(wa,{kind:"audioCodecType",children:"audioCodecType:"}),(0,Sn.jsx)(tt.Z,{name:"audioCodecType",value:e,onChange:function(e){h(e.target.value,m.o1)&&t(ie(e.target.value))},disabled:n,children:m.o1.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Za=function(){var e=jn((function(e){return e.audioContentHint})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,Sn.jsx)(wa,{kind:"audioContentHint",children:"audioContentHint:"}),(0,Sn.jsx)(tt.Z,{name:"audioContentHint",value:e,onChange:function(e){h(e.target.value,m.nT)&&n(oe(e.target.value))},children:m.nT.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ta=t(2370),Ra=function(e){var n=e.children,t=e.kind,a=e.checked,r=e.onChange,i=e.disabled,o=m.x$[t];return o?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Ta.Z,{type:"switch",checked:a,onChange:r,disabled:i}),(0,Sn.jsx)(ka.Z,{placement:"top",overlay:(0,Sn.jsx)(Sa.Z,{id:"popover-basic",children:(0,Sn.jsx)(Sa.Z.Body,{style:{whiteSpace:"pre-wrap"},children:o.description})}),children:(0,Sn.jsx)(An.Z,{children:n})})]}):(console.warn('Could not load description "'.concat(t,'"')),(0,Sn.jsx)(An.Z,{children:n}))},Oa=function(){var e=jn((function(e){return e.audio})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"audio",children:(0,Sn.jsx)(Ra,{kind:"audio",checked:e,onChange:function(e){t(ae(e.target.checked))},disabled:n,children:"audio"})})},Ma=function(){var e=jn((function(e){return e.audioInput})),n=jn((function(e){return e.audioInputDevices})),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"audioInput",children:[(0,Sn.jsx)(wa,{kind:"audioInput",children:"audioInput:"}),(0,Sn.jsxs)(tt.Z,{name:"audioInput",value:e,onChange:function(e){t(se(e.target.value)),t(X())},disabled:0===n.length,children:[(0,Sn.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,Sn.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},Da=function(){var e=jn((function(e){return e.audioOutput})),n=jn((function(e){return e.audioOutputDevices})),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,Sn.jsx)(wa,{kind:"audioOutput",children:"audioOutput:"}),(0,Sn.jsxs)(tt.Z,{name:"audioOutput",value:e,onChange:function(e){t(ce(e.target.value))},disabled:0===n.length,children:[(0,Sn.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,Sn.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},Va=function(){var e=jn((function(e){return e.enabledAudioStreamingLanguageCode})),n=jn((function(e){return e.audioStreamingLanguageCode})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledAudioStreamingLanguageCode",children:(0,Sn.jsx)(Ra,{kind:"audioStreamingLanguageCode",checked:e,onChange:function(e){a(Ve(e.target.checked))},disabled:t,children:"audioStreamingLanguageCode"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"audioStreamingLanguageCode",children:(0,Sn.jsx)(En.Z,{className:"flex-fill w-500",type:"text",placeholder:"audioStreamingLanguageCode\u3092\u6307\u5b9a",value:n,onChange:function(e){a(De(e.target.value))},disabled:t})})})}):null]})},Aa=function(){var e=jn((function(e){return e.audioTrack})),n=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"audioTrack",children:(0,Sn.jsx)(Ra,{kind:"audioTrack",checked:e,onChange:function(e){n(le(e.target.checked))},disabled:!1,children:"Enable audio track"})})},Ea=function(){var e=jn((function(e){return e.autoGainControl})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,Sn.jsx)(wa,{kind:"autoGainControl",children:"autoGainControl:"}),(0,Sn.jsx)(tt.Z,{name:"autoGainControl",value:e,onChange:function(e){h(e.target.value,m.iN)&&n(ue(e.target.value))},children:m.iN.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Fa=function(){var e=jn((function(e){return e.blurRadius})),n=jn((function(e){return e.mediaType})),t=xn(),a="getUserMedia"!==n;return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"blurRadius",children:[(0,Sn.jsx)(wa,{kind:"blurRadius",children:"blurRadius:"}),(0,Sn.jsx)(tt.Z,{value:e,onChange:function(e){h(e.target.value,m.G_)&&t(de(e.target.value))},disabled:a,children:m.G_.map((function(e){return(0,Sn.jsx)("option",{suppressHydrationWarning:!0,value:e,children:""===e||a?"\u672a\u6307\u5b9a":e},e)}))})]})},Ba=function(){var e=jn((function(e){return e.enabledBundleId})),n=jn((function(e){return e.bundleId})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledBundleId",children:(0,Sn.jsx)(Ra,{kind:"bundleId",checked:e,onChange:function(e){a(ke(e.target.checked))},disabled:t,children:"bundleId"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"bundleId",children:(0,Sn.jsx)(En.Z,{className:"flex-fill w-500",type:"text",placeholder:"bundleId\u3092\u6307\u5b9a",value:n,onChange:function(e){a(fe(e.target.value))},disabled:t})})})}):null]})},Ha=function(){var e=jn((function(e){return e.cameraDevice})),n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.video})),a=!(n?n.video:t),o=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,Sn.jsx)(Ra,{kind:"cameraDevice",checked:e,onChange:function(e){o(function(e){return function(){var n=(0,i.Z)(s().mark((function n(t,a){var i,o,c,l,u,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=a()).soraContents.localMediaStream&&i.soraContents.sora){n.next=4;break}return t(E.t.actions.setCameraDevice(e)),n.abrupt("return");case 4:if(!e){n.next=15;break}return o={aspectRatio:i.aspectRatio,audio:!1,audioContentHint:i.audioContentHint,audioInput:i.audioInput,audioTrack:i.audioTrack,autoGainControl:i.autoGainControl,blurRadius:i.blurRadius,cameraDevice:e,echoCancellation:i.echoCancellation,echoCancellationType:i.echoCancellationType,facingMode:i.facingMode,fakeContents:i.fakeContents,fakeVolume:i.fakeVolume,frameRate:i.frameRate,lightAdjustment:i.lightAdjustment,lightAdjustmentProcessor:i.lightAdjustmentProcessor,mediaProcessorsNoiseSuppression:i.mediaProcessorsNoiseSuppression,mediaType:i.mediaType,micDevice:i.micDevice,noiseSuppression:i.noiseSuppression,noiseSuppressionProcessor:i.noiseSuppressionProcessor,resizeMode:i.resizeMode,resolution:i.resolution,video:i.video,videoContentHint:i.videoContentHint,videoInput:i.videoInput,videoTrack:i.videoTrack,virtualBackgroundProcessor:i.virtualBackgroundProcessor},n.next=8,H(t,o).catch((function(e){throw t(E.t.actions.setSoraErrorAlertMessage(e.toString())),e}));case 8:c=n.sent,l=(0,r.Z)(c,2),u=l[0],d=l[1],0<u.getVideoTracks().length&&(i.soraContents.sora.replaceVideoTrack(i.soraContents.localMediaStream,u.getVideoTracks()[0]),t(E.t.actions.setFakeContentsGainNode(d))),n.next=16;break;case 15:i.soraContents.sora.stopVideoTrack(i.soraContents.localMediaStream);case 16:t(E.t.actions.setCameraDevice(e));case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(e.target.checked))},disabled:a,children:"Enable camera device"})})},Ua=function(){var e=jn((function(e){return e.channelId})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"channelId",children:[(0,Sn.jsx)(wa,{kind:"channelId",children:"channelId:"}),(0,Sn.jsx)(En.Z,{type:"text",placeholder:"ChannelId\u3092\u6307\u5b9a",value:e,onChange:function(e){t(me(e.target.value))},disabled:n})]})},La=function(){var e=jn((function(e){return e.enabledClientId})),n=jn((function(e){return e.clientId})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledClientId",children:(0,Sn.jsx)(Ra,{kind:"clientId",checked:e,onChange:function(e){a(Se(e.target.checked))},disabled:t,children:"clientId"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"clientId",children:(0,Sn.jsx)(En.Z,{className:"flex-fill w-500",type:"text",placeholder:"ClientId\u3092\u6307\u5b9a",value:n,onChange:function(e){a(pe(e.target.value))},disabled:t})})})}):null]})},_a=function(){var e=jn((function(e){return e.soraContents.connectionStatus})),n=xn();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"connect",defaultValue:"connect",onClick:function(){n(function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,o,c,l,u,f,m,p,g,h,v,j,b,C,y,k;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(E.t.actions.setTimelineMessage(z("start-connection"))),n(E.t.actions.setSoraConnectionStatus("connecting")),!(a=t()).soraContents.sora){e.next=6;break}return e.next=6,a.soraContents.sora.disconnect();case 6:if(o=x(a.enabledSignalingUrlCandidates,a.signalingUrlCandidates),n(E.t.actions.setLogMessages({title:"SIGNALING_URL",description:JSON.stringify(o)})),c=d.Z.connection(o,a.debug),l=_(a),u=A(l),f=T(a.enabledMetadata,a.metadata),e.prev=12,"sendonly"!==a.role){e.next=28;break}return(m=c.sendonly(a.channelId,null,u)).metadata=f,"boolean"===typeof a.googCpuOveruseDetection&&(m.constraints={optional:[{googCpuOveruseDetection:a.googCpuOveruseDetection}]}),L(n,t,m),e.next=20,H(n,a).catch((function(e){throw n(E.t.actions.setSoraErrorAlertMessage(e.toString())),n(E.t.actions.setSoraConnectionStatus("disconnected")),e}));case 20:return h=e.sent,v=(0,r.Z)(h,2),p=v[0],g=v[1],e.next=26,m.connect(p);case 26:e.next=49;break;case 28:if("sendrecv"!==a.role){e.next=43;break}return(m=c.sendrecv(a.channelId,null,u)).metadata=f,"boolean"===typeof a.googCpuOveruseDetection&&(m.constraints={optional:[{googCpuOveruseDetection:a.googCpuOveruseDetection}]}),L(n,t,m),e.next=35,H(n,a).catch((function(e){throw n(E.t.actions.setSoraErrorAlertMessage(e.toString())),n(E.t.actions.setSoraConnectionStatus("disconnected")),e}));case 35:return j=e.sent,b=(0,r.Z)(j,2),p=b[0],g=b[1],e.next=41,m.connect(p);case 41:e.next=49;break;case 43:if("recvonly"!==a.role){e.next=49;break}return(m=c.recvonly(a.channelId,null,u)).metadata=f,L(n,t,m),e.next=49,m.connect();case 49:e.next=60;break;case 51:throw e.prev=51,e.t0=e.catch(12),e.t0 instanceof Error&&n(E.t.actions.setSoraErrorAlertMessage("Failed to connect Sora. ".concat(e.t0.message))),a.lightAdjustmentProcessor&&a.lightAdjustmentProcessor.isProcessing()&&(C=a.lightAdjustmentProcessor.getOriginalTrack(),a.lightAdjustmentProcessor.stopProcessing()),a.virtualBackgroundProcessor&&a.virtualBackgroundProcessor.isProcessing()&&(void 0===C&&(C=a.virtualBackgroundProcessor.getOriginalTrack()),a.virtualBackgroundProcessor.stopProcessing()),C?(C.stop(),n(E.t.actions.setTimelineMessage(J("stop",C)))):p&&p.getVideoTracks().forEach((function(e){e.stop(),n(E.t.actions.setTimelineMessage(J("stop",e)))})),a.noiseSuppressionProcessor&&a.noiseSuppressionProcessor.isProcessing()?((y=a.noiseSuppressionProcessor.getOriginalTrack())&&(y.stop(),n(E.t.actions.setTimelineMessage(J("stop",y)))),a.noiseSuppressionProcessor.stopProcessing()):p&&p.getAudioTracks().forEach((function(e){e.stop(),n(E.t.actions.setTimelineMessage(J("stop",e)))})),n(E.t.actions.setSoraConnectionStatus("disconnected")),e.t0;case 60:if(void 0!==m){e.next=62;break}throw new Error("Failed to connect Sora. Connection object is 'undefined'");case 62:return n(E.t.actions.setSoraInfoAlertMessage("Succeeded to connect Sora.")),e.next=65,G(n,m);case 65:k=setInterval((0,i.Z)(s().mark((function e(){var a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(),!(r=a.soraContents).sora){e.next=6;break}return e.next=4,G(n,r.sora);case 4:e.next=7;break;case 6:clearInterval(k);case 7:case"end":return e.stop()}}),e)}))),1e3),m.stream=null,n(E.t.actions.setSora(m)),p&&n(E.t.actions.setLocalMediaStream(p)),g&&n(E.t.actions.setFakeContentsGainNode(g)),n(E.t.actions.setSoraConnectionStatus("connected")),n(E.t.actions.setTimelineMessage(z("connected")));case 72:case"end":return e.stop()}}),e,null,[[12,51]])})));return function(n,t){return e.apply(this,arguments)}}())},disabled:"disconnecting"===e||"connecting"===e||"initializing"===e})})},za=function(e){var n=jn((function(e){return e.ignoreDisconnectWebSocket})),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"ignoreDisconnectWebSocket",children:[(0,Sn.jsx)(wa,{kind:"ignoreDisconnectWebSocket",children:"ignoreDisconnectWebSocket:"}),(0,Sn.jsx)(tt.Z,{name:"ignoreDisconnectWebSocket",value:n,onChange:function(e){h(e.target.value,m.kt)&&t(Be(e.target.value))},disabled:e.disabled,children:m.kt.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ja=function(e){var n=jn((function(e){return e.dataChannelSignaling})),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"dataChannelSignaling",children:[(0,Sn.jsx)(wa,{kind:"dataChannelSignaling",children:"dataChannelSignaling:"}),(0,Sn.jsx)(tt.Z,{name:"dataChannelSignaling",value:n,onChange:function(e){h(e.target.value,m.l9)&&t(he(e.target.value))},disabled:e.disabled,children:m.l9.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ga=function(){var e=jn((function(e){return e.enabledDataChannel})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledDataChannel",children:(0,Sn.jsx)(Ta.Z,{type:"switch",name:"enabledDataChannel",label:"dataChannel",checked:e,onChange:function(e){t(Ne(e.target.checked))},disabled:n})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsxs)(Zt.Z,{xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Ja,{disabled:n})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(za,{disabled:n})})]})})}):null]})},Wa=function(){var e=jn((function(e){return e.enabledDataChannels})),n=jn((function(e){return e.dataChannels})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn(),r="dataChannels\u3092\u6307\u5b9a\n(\u4f8b)\n"+JSON.stringify([{label:"#spam",maxPacketLifeTime:10,ordered:!0,protocol:"efg",compress:!1,direction:"sendrecv"}],null,2);return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledDataChannels",children:(0,Sn.jsx)(Ra,{kind:"dataChannels",checked:e,onChange:function(e){a(we(e.target.checked))},disabled:t,children:"dataChannels"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"dataChannels",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:r,value:n,onChange:function(e){a(ge(e.target.value))},rows:12,cols:100,disabled:t})})})}):null]})},Ka=function(){var e=jn((function(e){return e.soraContents.connectionStatus})),n=xn();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"disconnect",defaultValue:"disconnect",onClick:function(){n(K())},disabled:"disconnecting"===e||"connecting"===e||"initializing"===e})})},qa=function(){var e=jn((function(e){return e.displayResolution})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,Sn.jsx)(wa,{kind:"displayResolution",children:"displayResolution:"}),(0,Sn.jsx)(tt.Z,{name:"displayResolution",value:e,onChange:function(e){h(e.target.value,m.hJ)&&n(be(e.target.value))},children:m.hJ.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Xa=t(2921),Qa=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],r=jn((function(e){return e.e2ee})),o=D(jn((function(e){return e.soraContents.connectionStatus}))),c=xn();return(0,a.useEffect)((function(){r&&t(!1)}),[r]),(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"e2ee",children:[(0,Sn.jsx)(Ra,{kind:"e2ee",checked:r,onChange:function(e){e.target.checked&&t(!0),c(function(e){return function(){var n=(0,i.Z)(s().mark((function n(t,a){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=14;break}r="Faild to execute WebAssembly '".concat("https://sora-e2ee-wasm.shiguredo.app/2020.2/wasm.wasm","'."),n.next=5;break;case 5:return n.prev=5,n.next=8,d.Z.initE2EE("https://sora-e2ee-wasm.shiguredo.app/2020.2/wasm.wasm");case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(5),t(E.t.actions.setSoraErrorAlertMessage(r)),n.abrupt("return");case 14:t(E.t.actions.setE2EE(e));case 15:case"end":return n.stop()}}),n,null,[[5,10]])})));return function(e,t){return n.apply(this,arguments)}}()}(e.target.checked))},disabled:o,children:"e2ee"}),n?(0,Sn.jsx)(Xa.Z,{className:"spinner-status",variant:"primary",animation:"border",role:"status"}):null]})})})},$a=function(){var e=jn((function(e){return e.echoCancellation})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,Sn.jsx)(wa,{kind:"echoCancellation",children:"echoCancellation:"}),(0,Sn.jsx)(tt.Z,{name:"echoCancellation",value:e,onChange:function(e){h(e.target.value,m.PS)&&n(Ce(e.target.value))},children:m.PS.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ya=function(){var e=jn((function(e){return e.echoCancellationType})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,Sn.jsx)(wa,{kind:"echoCancellationType",children:"echoCancellationType:"}),(0,Sn.jsx)(tt.Z,{name:"echoCancellationType",value:e,onChange:function(e){h(e.target.value,m.cJ)&&n(ye(e.target.value))},children:m.cJ.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},er=function(){var e=jn((function(e){return e.facingMode})),n=jn((function(e){return e.mediaType})),t=xn(),a="getUserMedia"!==n;return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"facingMode",children:[(0,Sn.jsx)(wa,{kind:"facingMode",children:"facingMode:"}),(0,Sn.jsx)(tt.Z,{name:"facingMode",value:e,onChange:function(e){h(e.target.value,m.pT)&&t(Ee(e.target.value))},disabled:a,children:m.pT.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},nr=t(8459),tr=function(){var e=jn((function(e){return e.mediaType})),n=jn((function(e){return e.fakeVolume})),t=xn();return"fakeMedia"!==e?null:(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,Sn.jsx)(wa,{kind:"fakeVolume",children:"fakeVolume:"}),(0,Sn.jsx)(nr.Z.Range,{min:"0",max:"1",step:"0.25",value:n,onChange:function(e){t(Ae(e.target.value))}})]})},ar=function(){var e=jn((function(e){return e.enabledForwardingFilter})),n=jn((function(e){return e.forwardingFilter})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledForwardingFilter",children:(0,Sn.jsx)(Ra,{kind:"forwardingFilter",checked:e,onChange:function(e){a(Pe(e.target.checked))},disabled:t,children:"forwardingFilter"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"forwardingFilter",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"forwardingFilter\u3092\u6307\u5b9a",value:n,onChange:function(e){a(Ye(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},rr=function(){var e=jn((function(e){return e.frameRate})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"frameRate",children:[(0,Sn.jsx)(wa,{kind:"frameRate",children:"frameRate:"}),(0,Sn.jsx)(tt.Z,{name:"frameRate",value:e,onChange:function(e){h(e.target.value,m.YX)&&n(Fe(e.target.value))},children:m.YX.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},ir=function(){var e=jn((function(e){return e.lightAdjustment})),n=jn((function(e){return e.mediaType})),t=xn(),a="getUserMedia"!==n;return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"lightAdjustment",children:[(0,Sn.jsx)(wa,{kind:"lightAdjustment",children:"lightAdjustment:"}),(0,Sn.jsx)(tt.Z,{value:e,onChange:function(e){h(e.target.value,m.Xv)&&t(He(e.target.value))},disabled:a,children:m.Xv.map((function(e){return(0,Sn.jsx)("option",{suppressHydrationWarning:!0,value:e,children:""===e||a?"\u672a\u6307\u5b9a":e},e)}))})]})},or=function(){var e=jn((function(e){return e.lyraParamsBitrate})),n=xn(),t=D(jn((function(e){return e.soraContents.connectionStatus})));return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"lyraParamsBitrate",children:[(0,Sn.jsx)(wa,{kind:"lyraParamsBitrate",children:"lyraParamsBitrate:"}),(0,Sn.jsx)(tt.Z,{name:"lyraParamsBitrate",value:e,onChange:function(e){h(e.target.value,m.P1)&&n(Ue(e.target.value))},disabled:t,children:m.P1.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},sr=function(){var e=jn((function(e){return e.mediaProcessorsNoiseSuppression})),n=jn((function(e){return e.mediaType})),t=xn(),a="getUserMedia"!==n;return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"mediaProcessorsNoiseSuppression",children:(0,Sn.jsx)(Ra,{kind:"mediaProcessorsNoiseSuppression",checked:e,onChange:function(e){t(Le(e.target.checked))},disabled:a,children:"mediaProcessorsNoiseSuppression"})})},cr=function(e){var n=e.label,t=e.disabled,a=e.onChange,r=e.mediaType;return(0,Sn.jsx)(Ta.Z,{type:"radio",inline:!0,id:n,label:n,value:n,checked:r===n,onChange:a,disabled:t})},lr=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],r=void 0!==window.CropTarget,i=jn((function(e){return e.soraContents.connectionStatus})),o=jn((function(e){return e.mediaType})),s=D(i),c=xn(),l=function(e){h(e.target.value,m.w_)&&c(_e(e.target.value))};return(0,a.useEffect)((function(){t(!0)}),[]),(0,Sn.jsxs)(Vn.Z,{className:"form-inline flex-wrap",children:[(0,Sn.jsx)(wa,{kind:"mediaType",children:"mediaType:"}),(0,Sn.jsx)(cr,{label:"getUserMedia",mediaType:o,disabled:s,onChange:l}),(0,Sn.jsx)(cr,{label:"getDisplayMedia",mediaType:o,disabled:s,onChange:l}),(0,Sn.jsx)(cr,{label:"fakeMedia",mediaType:o,disabled:s,onChange:l}),n&&(0,Sn.jsx)(cr,{label:"mediacaptureRegion",mediaType:o,disabled:s||!r,onChange:l})]})},ur=function(){var e=jn((function(e){return e.enabledMetadata})),n=jn((function(e){return e.metadata})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledMetadata",children:(0,Sn.jsx)(Ra,{kind:"metadata",checked:e,onChange:function(e){a(Ie(e.target.checked))},disabled:t,children:"metadata"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"metadata",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"Metadata\u3092\u6307\u5b9a",value:n,onChange:function(e){a(ze(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},dr=function(){var e=jn((function(e){return e.micDevice})),n=jn((function(e){return e.soraContents.sora})),t=jn((function(e){return e.audio})),a=!(n?n.audio:t),o=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"micDevice",children:(0,Sn.jsx)(Ra,{kind:"micDevice",checked:e,onChange:function(e){o(function(e){return function(){var n=(0,i.Z)(s().mark((function n(t,a){var i,o,c,l,u,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=a()).soraContents.localMediaStream&&i.soraContents.sora){n.next=4;break}return t(E.t.actions.setMicDevice(e)),n.abrupt("return");case 4:if(!e){n.next=18;break}return o={aspectRatio:i.aspectRatio,audio:i.audio,audioContentHint:i.audioContentHint,audioInput:i.audioInput,audioTrack:i.audioTrack,autoGainControl:i.autoGainControl,blurRadius:i.blurRadius,cameraDevice:i.cameraDevice,echoCancellation:i.echoCancellation,echoCancellationType:i.echoCancellationType,facingMode:i.facingMode,fakeContents:i.fakeContents,fakeVolume:i.fakeVolume,frameRate:i.frameRate,lightAdjustment:i.lightAdjustment,lightAdjustmentProcessor:i.lightAdjustmentProcessor,mediaProcessorsNoiseSuppression:i.mediaProcessorsNoiseSuppression,mediaType:i.mediaType,micDevice:e,noiseSuppression:i.noiseSuppression,noiseSuppressionProcessor:i.noiseSuppressionProcessor,resizeMode:i.resizeMode,resolution:i.resolution,video:!1,videoContentHint:i.videoContentHint,videoInput:i.videoInput,videoTrack:i.videoTrack,virtualBackgroundProcessor:i.virtualBackgroundProcessor},n.next=8,H(t,o).catch((function(e){throw t(E.t.actions.setSoraErrorAlertMessage(e.toString())),e}));case 8:if(c=n.sent,l=(0,r.Z)(c,2),u=l[0],d=l[1],!(0<u.getAudioTracks().length)){n.next=16;break}return n.next=15,i.soraContents.sora.replaceAudioTrack(i.soraContents.localMediaStream,u.getAudioTracks()[0]);case 15:t(E.t.actions.setFakeContentsGainNode(d));case 16:n.next=19;break;case 18:i.soraContents.sora.stopAudioTrack(i.soraContents.localMediaStream);case 19:t(E.t.actions.setMicDevice(e));case 20:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(e.target.checked))},disabled:a,children:"Enable mic device"})})},fr=function(){var e=jn((function(e){return e.multistream})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"multistream",children:[(0,Sn.jsx)(wa,{kind:"multistream",children:"multistream:"}),(0,Sn.jsx)(tt.Z,{name:"multistream",value:e,onChange:function(e){h(e.target.value,m.u9)&&t(Je(e.target.value))},disabled:n,children:m.u9.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},mr=function(){var e=jn((function(e){return e.noiseSuppression})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,Sn.jsx)(wa,{kind:"noiseSuppression",children:"noiseSuppression:"}),(0,Sn.jsx)(tt.Z,{name:"noiseSuppression",value:e,onChange:function(e){h(e.target.value,m.ad)&&n(Ge(e.target.value))},children:m.ad.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},pr=function(){var e=jn((function(e){return e.reconnect})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"reconnect",children:(0,Sn.jsx)(Ra,{kind:"reconnect",checked:e,onChange:function(e){t(We(e.target.checked))},disabled:n,children:"reconnect"})})})})},gr=function(){var e=xn();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){e(q())}})})},hr=function(){var e=jn((function(e){return e.resizeMode})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"resizeMode",children:[(0,Sn.jsx)(wa,{kind:"resizeMode",children:"resizeMode:"}),(0,Sn.jsx)(tt.Z,{name:"resizeMode",value:e,onChange:function(e){h(e.target.value,m.L4)&&n(Ke(e.target.value))},children:m.L4.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},vr=function(){var e=jn((function(e){return e.resolution})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"resolution",children:[(0,Sn.jsx)(wa,{kind:"resolution",children:"resolution:"}),(0,Sn.jsx)(tt.Z,{name:"resolution",value:e,onChange:function(e){h(e.target.value,m.Vf)&&n(Xe(e.target.value))},children:m.Vf.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},xr=function(){var e=jn((function(e){return e.role})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"role",children:[(0,Sn.jsx)(wa,{kind:"role",children:"role:"}),(0,Sn.jsx)(tt.Z,{name:"role",value:e,onChange:function(e){h(e.target.value,m.K$)&&t(qe(e.target.value))},disabled:n,children:m.K$.map((function(e){return(0,Sn.jsx)("option",{value:e,children:e},e)}))})]})},jr=function(){var e=jn((function(e){return e.enabledSignalingNotifyMetadata})),n=jn((function(e){return e.signalingNotifyMetadata})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledSignalingNotifyMetadata",children:(0,Sn.jsx)(Ra,{kind:"signalingNotifyMetadata",checked:e,onChange:function(e){a(Ze(e.target.checked))},disabled:t,children:"signalingNotifyMetadata"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"signalingNotifyMetadata",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"signalingNotifyMetadata\u3092\u6307\u5b9a",value:n,onChange:function(e){a(Qe(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},br=function(){var e=jn((function(e){return e.enabledSignalingUrlCandidates})),n=jn((function(e){return e.signalingUrlCandidates})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",xs:"auto",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledSignalingUrlCandidates",children:(0,Sn.jsx)(Ra,{kind:"signalingUrlCandidates",checked:e,onChange:function(e){a(Te(e.target.checked))},disabled:t,children:"signalingUrlCandidates"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",xs:"auto",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"signalingNotifyMetadata",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"signalingUrlCandidates\u3092\u6307\u5b9a",value:n.join("\n"),onChange:function(e){a($e(e.target.value.split("\n")))},rows:5,cols:100,disabled:t})})})}):null]})},Cr=function(){var e=jn((function(e){return e.simulcast})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"simulcast",children:[(0,Sn.jsx)(wa,{kind:"simulcast",children:"simulcast:"}),(0,Sn.jsx)(tt.Z,{name:"simulcast",value:e,onChange:function(e){h(e.target.value,m.VE)&&t(en(e.target.value))},disabled:n,children:m.VE.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},yr=function(){var e=jn((function(e){return e.simulcastRid})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,Sn.jsx)(wa,{kind:"simulcastRid",children:"simulcastRid:"}),(0,Sn.jsx)(tt.Z,{name:"simulcastRid",value:e,onChange:function(e){h(e.target.value,m.WJ)&&t(nn(e.target.value))},disabled:n,children:m.WJ.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},kr=function(){var e=jn((function(e){return e.spotlightFocusRid})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,Sn.jsx)(wa,{kind:"spotlightFocusRid",children:"spotlightFocusRid:"}),(0,Sn.jsx)(tt.Z,{value:e,onChange:function(e){h(e.target.value,m.I7)&&t(rn(e.target.value))},disabled:n,children:m.I7.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Sr=function(){var e=jn((function(e){return e.spotlight})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"spotlight",children:[(0,Sn.jsx)(wa,{kind:"spotlight",children:"spotlight:"}),(0,Sn.jsx)(tt.Z,{name:"spotlight",value:e,onChange:function(e){h(e.target.value,m.VJ)&&t(an(e.target.value))},disabled:n,children:m.VJ.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},wr=function(){var e=jn((function(e){return e.spotlightNumber})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,Sn.jsx)(wa,{kind:"spotlightNumber",children:"spotlightNumber:"}),(0,Sn.jsx)(tt.Z,{value:e,onChange:function(e){h(e.target.value,m.Xr)&&t(on(e.target.value))},disabled:n,children:m.Xr.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Nr=function(){var e=jn((function(e){return e.spotlightUnfocusRid})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,Sn.jsx)(wa,{kind:"spotlightUnfocusRid",children:"spotlightUnfocusRid:"}),(0,Sn.jsx)(tt.Z,{value:e,onChange:function(e){h(e.target.value,m.I7)&&t(sn(e.target.value))},disabled:n,children:m.I7.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Pr=function(){var e=jn((function(e){return e.channelId})),n=jn((function(e){return e.soraContents.connectionStatus})),t=jn((function(e){return e.apiUrl})),a=xn(),r=function(){var n=(0,i.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ht(t,e);case 3:r=n.sent,a(ne("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),n.t0 instanceof Error&&a(ee(n.t0.message));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:r,disabled:"initializing"===n})})},Ir=function(){var e=jn((function(e){return e.channelId})),n=jn((function(e){return e.soraContents.connectionStatus})),t=jn((function(e){return e.apiUrl})),a=xn(),r=function(){var n=(0,i.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ut(t,e);case 3:r=n.sent,a(ne("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),n.t0 instanceof Error&&a(ee(n.t0.message));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:r,disabled:"initializing"===n})})},Zr=function(){var e=xn();return(0,Sn.jsx)("div",{className:"col-auto mb-1",children:(0,Sn.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){e(X())}})})},Tr=function(){var e=jn((function(e){return e.enabledVideoAV1Params})),n=jn((function(e){return e.videoAV1Params})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledVideoAV1Params",children:(0,Sn.jsx)(Ra,{kind:"videoAV1Params",checked:e,onChange:function(e){a(Me(e.target.checked))},disabled:t,children:"videoAV1Params"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"videoAV1Params",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"videoAV1Params\u3092\u6307\u5b9a",value:n,onChange:function(e){a(hn(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},Rr=m.Q5.slice();Rr.splice(m.Q5.indexOf("15000")+1,0,"support-message");var Or=function(){var e=jn((function(e){return e.videoBitRate})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,Sn.jsx)(wa,{kind:"videoBitRate",children:"videoBitRate:"}),(0,Sn.jsx)(tt.Z,{name:"videoBitRate",value:e,onChange:function(e){h(e.target.value,m.Q5)&&t(ln(e.target.value))},disabled:n,children:Rr.map((function(e){var n=e;return""===e?n="\u672a\u6307\u5b9a":"support-message"===e&&(n="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,Sn.jsx)("option",{value:e,disabled:"support-message"===e,children:n},e)}))})]})},Mr=function(){var e=jn((function(e){return e.videoCodecType})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,Sn.jsx)(wa,{kind:"videoCodecType",children:"videoCodecType:"}),(0,Sn.jsx)(tt.Z,{name:"videoCodecType",value:e,onChange:function(e){h(e.target.value,m.Sh)&&t(un(e.target.value))},disabled:n,children:m.Sh.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Dr=function(){var e=jn((function(e){return e.videoContentHint})),n=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,Sn.jsx)(wa,{kind:"videoContentHint",children:"videoContentHint:"}),(0,Sn.jsx)(tt.Z,{name:"videoContentHint",value:e,onChange:function(e){h(e.target.value,m.QO)&&n(dn(e.target.value))},children:m.QO.map((function(e){return(0,Sn.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Vr=function(){var e=jn((function(e){return e.video})),n=D(jn((function(e){return e.soraContents.connectionStatus}))),t=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"video",children:(0,Sn.jsx)(Ra,{kind:"video",checked:e,onChange:function(e){t(cn(e.target.checked))},disabled:n,children:"video"})})},Ar=function(){var e=jn((function(e){return e.enabledVideoH264Params})),n=jn((function(e){return e.videoH264Params})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledVideoH264Params",children:(0,Sn.jsx)(Ra,{kind:"videoH264Params",checked:e,onChange:function(e){a(Oe(e.target.checked))},disabled:t,children:"videoH264Params"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"videoH264Params",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"videoH264Params\u3092\u6307\u5b9a",value:n,onChange:function(e){a(gn(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},Er=function(){var e=jn((function(e){return e.videoInput})),n=jn((function(e){return e.videoInputDevices})),t=xn();return(0,Sn.jsxs)(Vn.Z,{className:"form-inline",controlId:"videoInput",children:[(0,Sn.jsx)(wa,{kind:"videoInput",children:"videoInput:"}),(0,Sn.jsxs)(tt.Z,{name:"videoInput",value:e,onChange:function(e){t(fn(e.target.value)),t(X())},disabled:0===n.length,children:[(0,Sn.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,Sn.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},Fr=function(){var e=jn((function(e){return e.videoTrack})),n=xn();return(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"videoTrack",children:(0,Sn.jsx)(Ra,{kind:"videoTrack",checked:e,onChange:function(e){n(mn(e.target.checked))},disabled:!1,children:"Enable video track"})})},Br=function(){var e=jn((function(e){return e.enabledVideoVP9Params})),n=jn((function(e){return e.videoVP9Params})),t=D(jn((function(e){return e.soraContents.connectionStatus}))),a=xn();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"enabledVideoVP9Params",children:(0,Sn.jsx)(Ra,{kind:"videoVP9Params",checked:e,onChange:function(e){a(Re(e.target.checked))},disabled:t,children:"videoVP9Params"})})})}),e?(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Vn.Z,{className:"form-inline",controlId:"videoVP9Params",children:(0,Sn.jsx)(En.Z,{className:"flex-fill",as:"textarea",placeholder:"videoVP9Params\u3092\u6307\u5b9a",value:n,onChange:function(e){a(pn(e.target.value))},rows:10,cols:100,disabled:t})})})}):null]})},Hr=function(){return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{className:"form-row",xs:"auto",children:(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Ua,{})})}),(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(xr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(fr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Cr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Sr,{})})]})]})},Ur=function(){return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Oa,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Ia,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Pa,{})})]}),(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Vr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Mr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Or,{})})]})]})},Lr=function(){return"true"!==jn((function(e){return e.simulcast}))?null:(0,Sn.jsx)(Zt.Z,{className:"form-row",xs:"auto",children:(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(yr,{})})})},_r=function(){return"true"!==jn((function(e){return e.spotlight}))?null:(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(wr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(kr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Nr,{})})]})},zr=function(){var e=(0,a.useState)(!0),n=e[0],t=e[1],r=[jn((function(e){return e.e2ee})),jn((function(e){return e.enabledBundleId})),jn((function(e){return e.enabledClientId})),jn((function(e){return e.enabledDataChannel})),jn((function(e){return e.enabledDataChannels})),jn((function(e){return e.enabledForwardingFilter})),jn((function(e){return e.enabledMetadata})),jn((function(e){return e.enabledSignalingNotifyMetadata})),jn((function(e){return e.enabledSignalingUrlCandidates})),jn((function(e){return e.reconnect}))].some((function(e){return e})),i=["btn-collapse-options"];n&&i.push("collapsed"),r&&i.push("fw-bold");return(0,Sn.jsxs)(Zt.Z,{className:"form-row",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)("a",{href:"#",className:i.join(" "),onClick:function(e){e.preventDefault(),t(!n)},children:"Signaling options"})}),(0,Sn.jsx)(kn.Z,{in:!n,children:(0,Sn.jsxs)("div",{children:[(0,Sn.jsx)(Qa,{}),(0,Sn.jsx)(pr,{}),(0,Sn.jsx)(La,{}),(0,Sn.jsx)(ur,{}),(0,Sn.jsx)(Ba,{}),(0,Sn.jsx)(jr,{}),(0,Sn.jsx)(br,{}),(0,Sn.jsx)(ar,{}),(0,Sn.jsx)(Wa,{}),(0,Sn.jsx)(Ga,{})]})})]})},Jr=function(){var e=(0,a.useState)(!0),n=e[0],t=e[1],r=[""!==jn((function(e){return e.audioStreamingLanguageCode})),""!==jn((function(e){return e.lyraParamsBitrate})),jn((function(e){return e.enabledVideoVP9Params})),jn((function(e){return e.enabledVideoH264Params})),jn((function(e){return e.enabledVideoAV1Params}))].some((function(e){return e})),i=["btn-collapse-options"];n&&i.push("collapsed"),r&&i.push("fw-bold");return(0,Sn.jsxs)(Zt.Z,{className:"form-row",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)("a",{href:"#",className:i.join(" "),onClick:function(e){e.preventDefault(),t(!n)},children:"Advanced options"})}),(0,Sn.jsx)(kn.Z,{in:!n,children:(0,Sn.jsxs)("div",{children:[(0,Sn.jsx)(Va,{}),(0,Sn.jsx)(Zt.Z,{className:"form-row",children:(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(or,{})})}),(0,Sn.jsx)(Br,{}),(0,Sn.jsx)(Ar,{}),(0,Sn.jsx)(Tr,{})]})})]})},Gr=function(){return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Zt.Z,{xs:"auto",className:"form-row",children:(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(lr,{})})}),(0,Sn.jsx)(Zt.Z,{xs:"auto",className:"form-row",children:(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(tr,{})})})]})},Wr=function(){var e=(0,a.useState)(!0),n=e[0],t=e[1],r=[""!==jn((function(e){return e.audioContentHint})),""!==jn((function(e){return e.autoGainControl})),""!==jn((function(e){return e.noiseSuppression})),""!==jn((function(e){return e.echoCancellation})),""!==jn((function(e){return e.echoCancellationType})),""!==jn((function(e){return e.videoContentHint})),""!==jn((function(e){return e.resolution})),""!==jn((function(e){return e.frameRate})),""!==jn((function(e){return e.blurRadius})),""!==jn((function(e){return e.lightAdjustment})),jn((function(e){return e.mediaProcessorsNoiseSuppression}))].some((function(e){return e})),i=["btn-collapse-options"];n&&i.push("collapsed"),r&&i.push("fw-bold");return(0,Sn.jsxs)(Zt.Z,{className:"form-row",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)("a",{href:"#",className:i.join(" "),onClick:function(e){e.preventDefault(),t(!n)},children:"Media options"})}),(0,Sn.jsx)(kn.Z,{in:!n,children:(0,Sn.jsxs)("div",{children:[(0,Sn.jsxs)(Zt.Z,{className:"form-row",children:[(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Za,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Ea,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(mr,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)($a,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Ya,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(sr,{})})]}),(0,Sn.jsxs)(Zt.Z,{className:"form-row",children:[(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Dr,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(vr,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(rr,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Na,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(hr,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(Fa,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(ir,{})}),(0,Sn.jsx)(Tt.Z,{className:"col-auto",children:(0,Sn.jsx)(er,{})})]}),(0,Sn.jsx)(Zr,{})]})})]})},Kr=function(){var e=jn((function(e){return e.role}));return(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:["recvonly"!==e?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Ma,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Er,{})})]}):null,(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Da,{})}),(0,Sn.jsx)(gr,{})]})},qr=function(){var e=jn((function(e){return e.role}));return(0,Sn.jsxs)(Zt.Z,{className:"form-row",xs:"auto",children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(qa,{})}),"recvonly"!==e?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(dr,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Ha,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Aa,{})}),(0,Sn.jsx)(Tt.Z,{children:(0,Sn.jsx)(Fr,{})})]}):null]})},Xr=function(){var e=jn((function(e){return e.debug})),n=jn((function(e){return e.role}));return(0,Sn.jsxs)("div",{className:e?"col-devtools col-6":"col-devtools col-12",children:[(0,Sn.jsx)(Vt,{}),(0,Sn.jsx)(Hr,{}),(0,Sn.jsx)(Lr,{}),(0,Sn.jsx)(_r,{}),(0,Sn.jsx)("hr",{className:"hr-form"}),(0,Sn.jsx)(Ur,{}),(0,Sn.jsx)(zr,{}),(0,Sn.jsx)(Jr,{}),(0,Sn.jsx)("hr",{className:"hr-form"}),"recvonly"!==n?(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(Gr,{}),(0,Sn.jsx)(Wr,{}),(0,Sn.jsx)("hr",{className:"hr-form"})]}):null,(0,Sn.jsx)(Kr,{}),(0,Sn.jsx)(qr,{}),(0,Sn.jsx)("hr",{className:"hr-form"}),(0,Sn.jsxs)("div",{className:"row",children:[(0,Sn.jsx)(_a,{}),(0,Sn.jsx)(Ka,{}),(0,Sn.jsx)(Pr,{}),(0,Sn.jsx)(Ir,{})]}),(0,Sn.jsx)("hr",{className:"hr-form"}),(0,Sn.jsx)(ua,{}),"recvonly"===n||"sendrecv"===n?(0,Sn.jsx)(ya,{}):null]})},Qr=t(1747),$r=t(2293),Yr=function(){var e=jn((function(e){return e.debug})),n=xn(),t=e?"btn btn-footer-debug-mode active":"btn btn-footer-debug-mode";return(0,Sn.jsx)("div",{children:(0,Sn.jsx)("button",{className:t,onClick:function(){n(ve(!e))},children:"debug"})})},ei=function(){var e=jn((function(e){return e.version}));return(0,Sn.jsxs)("footer",{children:[(0,Sn.jsxs)(Qr.Z,{variant:"dark",bg:"sora",expand:"md",fixed:"bottom",children:[(0,Sn.jsx)($r.Z,{className:"me-auto"}),(0,Sn.jsx)($r.Z,{children:(0,Sn.jsxs)(Qr.Z.Collapse,{id:"navbar-collapse",children:[(0,Sn.jsxs)("a",{href:"https://github.com/shiguredo/sora-devtools",className:"btn btn-outline-light m-1",children:["GitHub: shiguredo/sora-devtools: ",e]}),(0,Sn.jsxs)("a",{href:"https://github.com/shiguredo/sora-js-sdk",className:"btn btn-outline-light m-1",children:["GitHub: shiguredo/sora-js-sdk: ",d.Z.version()]})]})})]}),(0,Sn.jsx)(Yr,{})]})},ni=t(6357),ti=t.n(ni),ai=function(){return(0,Sn.jsx)(ti(),{children:(0,Sn.jsx)("title",{children:"Sora DevTools"})})},ri=t(3888),ii=function(){var e=xn();return(0,Sn.jsx)("input",{className:"btn btn-light btn-sm ms-1",type:"button",name:"copyUrl",defaultValue:"copy URL",onClick:function(){e((function(e,n){var t=n(),a={channelId:t.channelId,role:t.role,audio:t.audio,video:t.video,debug:t.debug,mediaType:"getUserMedia"!==t.mediaType?t.mediaType:void 0,audioBitRate:""!==t.audioBitRate?t.audioBitRate:void 0,audioCodecType:""!==t.audioCodecType?t.audioCodecType:void 0,videoBitRate:""!==t.videoBitRate?t.videoBitRate:void 0,videoCodecType:""!==t.videoCodecType?t.videoCodecType:void 0,videoVP9Params:""!==t.videoVP9Params&&t.enabledVideoVP9Params?t.videoVP9Params:void 0,videoH264Params:""!==t.videoH264Params&&t.enabledVideoH264Params?t.videoH264Params:void 0,videoAV1Params:""!==t.videoAV1Params&&t.enabledVideoAV1Params?t.videoAV1Params:void 0,audioContentHint:""!==t.audioContentHint?t.audioContentHint:void 0,autoGainControl:""!==t.autoGainControl?t.autoGainControl:void 0,noiseSuppression:""!==t.noiseSuppression?t.noiseSuppression:void 0,echoCancellation:""!==t.echoCancellation?t.echoCancellation:void 0,echoCancellationType:""!==t.echoCancellationType?t.echoCancellationType:void 0,videoContentHint:""!==t.videoContentHint?t.videoContentHint:void 0,resolution:""!==t.resolution?t.resolution:void 0,facingMode:""!==t.facingMode?t.facingMode:void 0,frameRate:""!==t.frameRate?t.frameRate:void 0,aspectRatio:""!==t.aspectRatio?t.aspectRatio:void 0,resizeMode:""!==t.resizeMode?t.resizeMode:void 0,blurRadius:""!==t.blurRadius?t.blurRadius:void 0,lightAdjustment:""!==t.lightAdjustment?t.lightAdjustment:void 0,multistream:""!==t.multistream?t.multistream:void 0,simulcast:""!==t.simulcast?t.simulcast:void 0,simulcastRid:""!==t.simulcastRid?t.simulcastRid:void 0,spotlight:""!==t.spotlight?t.spotlight:void 0,spotlightNumber:""!==t.spotlightNumber?t.spotlightNumber:void 0,spotlightFocusRid:""!==t.spotlightFocusRid?t.spotlightFocusRid:void 0,spotlightUnfocusRid:""!==t.spotlightUnfocusRid?t.spotlightUnfocusRid:void 0,audioInput:""!==t.audioInput?t.audioInput:void 0,audioOutput:""!==t.audioOutput?t.audioOutput:void 0,videoInput:""!==t.videoInput?t.videoInput:void 0,displayResolution:""!==t.displayResolution?t.displayResolution:void 0,bundleId:""!==t.bundleId&&t.enabledBundleId?t.bundleId:void 0,clientId:""!==t.clientId&&t.enabledClientId?t.clientId:void 0,metadata:""!==t.metadata&&t.enabledMetadata?t.metadata:void 0,signalingNotifyMetadata:""!==t.signalingNotifyMetadata&&t.enabledSignalingNotifyMetadata?t.signalingNotifyMetadata:void 0,forwardingFilter:""!==t.forwardingFilter&&t.enabledForwardingFilter?t.forwardingFilter:void 0,dataChannelSignaling:""!==t.dataChannelSignaling&&t.enabledDataChannel?t.dataChannelSignaling:void 0,ignoreDisconnectWebSocket:""!==t.ignoreDisconnectWebSocket&&t.enabledDataChannel?t.ignoreDisconnectWebSocket:void 0,dataChannels:""!==t.dataChannels&&t.enabledDataChannels?t.dataChannels:void 0,reconnect:!0===t.reconnect||void 0,e2ee:!0===t.e2ee||void 0,mediaProcessorsNoiseSuppression:!0===t.mediaProcessorsNoiseSuppression||void 0,micDevice:!1!==t.micDevice&&void 0,cameraDevice:!1!==t.cameraDevice&&void 0,audioTrack:!1!==t.audioTrack&&void 0,videoTrack:!1!==t.videoTrack&&void 0,signalingUrlCandidates:0<t.signalingUrlCandidates.length&&t.enabledSignalingUrlCandidates?t.signalingUrlCandidates:void 0,apiUrl:null!==t.apiUrl?t.apiUrl:void 0,fakeVolume:"fakeMedia"===t.mediaType?t.fakeVolume:void 0,mute:!0===t.mute||void 0,audioStreamingLanguageCode:""!==t.audioStreamingLanguageCode&&t.enabledAudioStreamingLanguageCode?t.audioStreamingLanguageCode:void 0,lyraParamsBitrate:t.lyraParamsBitrate?t.lyraParamsBitrate:void 0},r=Object.keys(a).map((function(e){var n=a[e];if(void 0!==n)return"signalingUrlCandidates"===e?"".concat(e,"=").concat(encodeURIComponent(JSON.stringify(n))):"".concat(e,"=").concat(encodeURIComponent(n))})).filter((function(e){return void 0!==e}));g("".concat(location.origin).concat(location.pathname,"?").concat(r.join("&"))),window.history.replaceState(null,"","".concat(location.pathname,"?").concat(r.join("&")))}))}})},oi=function(){var e=jn((function(e){return e.debug})),n=xn(),t=["btn","btn-header-debug-mode","btn-sm","ms-1"];return e&&t.push("active"),(0,Sn.jsx)("input",{className:t.join(" "),type:"button",name:"debug",defaultValue:"debug",onClick:function(){n(ve(!e))}})},si=t(3805);function ci(){var e=si.h.getState(),n={aspectRatio:e.aspectRatio,audio:e.audio,audioBitRate:e.audioBitRate,audioCodecType:e.audioCodecType,audioContentHint:e.audioContentHint,audioInput:e.audioInput,audioInputDevices:e.audioInputDevices,audioOutput:e.audioOutput,audioOutputDevices:e.audioOutputDevices,audioStreamingLanguageCode:e.audioStreamingLanguageCode,lyraParamsBitrate:e.lyraParamsBitrate,audioTrack:e.audioTrack,autoGainControl:e.autoGainControl,bundleId:e.bundleId,cameraDevice:e.cameraDevice,channelId:e.channelId,clientId:e.clientId,dataChannelSignaling:e.dataChannelSignaling,dataChannels:e.dataChannels,debug:e.debug,displayResolution:e.displayResolution,e2ee:e.e2ee,echoCancellation:e.echoCancellation,echoCancellationType:e.echoCancellationType,enabledAudioStreamingLanguageCode:e.enabledAudioStreamingLanguageCode,enabledBundleId:e.enabledBundleId,enabledClientId:e.enabledClientId,enabledDataChannel:e.enabledDataChannel,enabledDataChannels:e.enabledDataChannels,enabledForwardingFilter:e.enabledForwardingFilter,enabledMetadata:e.enabledMetadata,enabledSignalingNotifyMetadata:e.enabledSignalingNotifyMetadata,enabledSignalingUrlCandidates:e.enabledSignalingUrlCandidates,enabledVideoVP9Params:e.enabledVideoVP9Params,enabledVideoH264Params:e.enabledVideoH264Params,enabledVideoAV1Params:e.enabledVideoAV1Params,facingMode:e.facingMode,fakeVolume:e.fakeVolume,forwardingFilter:e.forwardingFilter,frameRate:e.frameRate,googCpuOveruseDetection:e.googCpuOveruseDetection,ignoreDisconnectWebSocket:e.ignoreDisconnectWebSocket,mediaType:e.mediaType,metadata:e.metadata,micDevice:e.micDevice,multistream:e.multistream,noiseSuppression:e.noiseSuppression,reconnect:e.reconnect,resizeMode:e.resizeMode,resolution:e.resolution,role:e.role,signalingNotifyMetadata:e.signalingNotifyMetadata,signalingUrlCandidates:e.signalingUrlCandidates,simulcast:e.simulcast,simulcastRid:e.simulcastRid,spotlight:e.spotlight,spotlightFocusRid:e.spotlightFocusRid,spotlightNumber:e.spotlightNumber,spotlightUnfocusRid:e.spotlightUnfocusRid,video:e.video,videoBitRate:e.videoBitRate,videoCodecType:e.videoCodecType,videoContentHint:e.videoContentHint,videoInput:e.videoInput,videoInputDevices:e.videoInputDevices,videoTrack:e.videoTrack,videoVP9Params:e.videoVP9Params,videoH264Params:e.videoH264Params,videoAV1Params:e.videoAV1Params};return{userAgent:navigator.userAgent,"sora-devtools":e.version,"sora-js-sdk":d.Z.version(),parameters:n,timeline:e.timelineMessages.map((function(e){return{timestamp:e.timestamp,message:e}})),notify:e.notifyMessages,stats:e.soraContents.statsReport}}var li=function(){var e=(0,a.useRef)(null),n=function(){var n=(0,i.Z)(s().mark((function n(){var t,a,r,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=ci(),a=JSON.stringify(t),r=new Blob([a],{type:"text/plain"}),window.URL=window.URL||window.webkitURL,e.current&&(i=(new Date).toISOString().replaceAll(":","_").replaceAll(".","_"),e.current.download="sora-devtools-report-".concat(i,".json"),e.current.href=window.URL.createObjectURL(r),e.current.click());case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)("input",{className:"btn btn-light btn-sm ms-1",type:"button",name:"downloadReport",defaultValue:"Download report",onClick:n}),(0,Sn.jsx)("a",{ref:e,style:{display:"none"}})]})},ui=function(){var e=jn((function(e){return e.soraContents.sora}));return(0,Sn.jsx)("header",{children:(0,Sn.jsx)(Qr.Z,{variant:"dark",bg:"sora",expand:"md",fixed:"top",children:(0,Sn.jsxs)(ri.Z,{children:[(0,Sn.jsx)(Qr.Z.Brand,{href:"/",children:"Sora DevTools"}),(0,Sn.jsx)(Qr.Z.Toggle,{"aria-controls":"navbar-collapse"}),(0,Sn.jsxs)(Qr.Z.Collapse,{id:"navbar-collapse",children:[(0,Sn.jsx)($r.Z,{className:"me-auto"}),(0,Sn.jsxs)($r.Z,{children:[(0,Sn.jsx)(Qr.Z.Text,{className:"py-0 my-1 mx-1",children:(0,Sn.jsx)("p",{className:"navbar-signaling-url border rounded",children:e?e.connectedSignalingUrl:"\u672a\u63a5\u7d9a"})}),(0,Sn.jsx)(Qr.Z.Text,{className:"py-0 my-1 mx-1",children:(0,Sn.jsx)(oi,{})}),(0,Sn.jsx)(Qr.Z.Text,{className:"py-0 my-1 mx-1",children:(0,Sn.jsx)(li,{})}),(0,Sn.jsx)(Qr.Z.Text,{className:"py-0 my-1 ms-1",children:(0,Sn.jsx)(ii,{})})]})]})]})})})},di=t(962),fi=t.n(di);var mi=function(){var e=jn((function(e){return e.mediaType})),n={x:100,y:100},t=(0,a.useState)(n),r=t[0],i=t[1],o=(0,a.useState)(0),s=o[0],c=o[1];return(0,a.useEffect)((function(){var e=function(){var e;void 0!==window&&c((e=window.innerWidth)<680?e-40:640)};return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[]),"mediacaptureRegion"!==e?null:(0,Sn.jsx)(fi(),{position:r,onDrag:function(e,n){i({x:n.x,y:n.y})},defaultPosition:n,children:(0,Sn.jsx)("div",{id:"cropArea",className:"cropArea",style:{width:"".concat(s,"px"),height:"".concat(Math.floor(s/4*3),"px")}})})},pi=function(){var e=xn();return(0,a.useEffect)((function(){return e(function(){var e=(0,i.Z)(s().mark((function e(n,t){var a,r,i,o,c,l,u,f,m,p,g,h,x,j,b,C,y,k,S,w,N;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(E.t.actions.resetState()),void 0!==(a=v()).audio&&n(E.t.actions.setAudio(a.audio)),void 0!==a.audioBitRate&&n(E.t.actions.setAudioBitRate(a.audioBitRate)),void 0!==a.audioCodecType&&n(E.t.actions.setAudioCodecType(a.audioCodecType)),e.next=7,O();case 7:if(r=e.sent,void 0!==(i=r.find((function(e){return"audioinput"===e.kind&&e.deviceId===a.audioInput})))&&n(E.t.actions.setAudioInput(i.deviceId)),void 0!==(o=r.find((function(e){return"audiooutput"===e.kind&&e.deviceId===a.audioOutput})))&&n(E.t.actions.setAudioOutput(o.deviceId)),void 0!==(c=r.find((function(e){return"videoinput"===e.kind&&e.deviceId===a.videoInput})))&&n(E.t.actions.setVideoInput(c.deviceId)),void 0!==a.autoGainControl&&n(E.t.actions.setAutoGainControl(a.autoGainControl)),void 0!==a.channelId&&n(E.t.actions.setChannelId(a.channelId)),void 0!==a.displayResolution&&n(E.t.actions.setDisplayResolution(a.displayResolution)),void 0!==a.e2ee&&n(E.t.actions.setE2EE(a.e2ee)),void 0!==a.echoCancellation&&n(E.t.actions.setEchoCancellation(a.echoCancellation)),void 0!==a.echoCancellationType&&n(E.t.actions.setEchoCancellationType(a.echoCancellationType)),void 0!==a.mediaType&&n(E.t.actions.setMediaType(a.mediaType)),void 0!==a.facingMode&&n(E.t.actions.setFacingMode(a.facingMode)),void 0!==a.fakeVolume&&n(E.t.actions.setFakeVolume(a.fakeVolume)),void 0!==a.frameRate&&n(E.t.actions.setFrameRate(a.frameRate)),void 0!==a.multistream&&n(E.t.actions.setMultistream(a.multistream)),void 0!==a.noiseSuppression&&n(E.t.actions.setNoiseSuppression(a.noiseSuppression)),void 0!==a.resolution&&n(E.t.actions.setResolution(a.resolution)),void 0!==a.showStats&&n(E.t.actions.setShowStats(a.showStats)),void 0!==a.simulcast&&n(E.t.actions.setSimulcast(a.simulcast)),void 0!==a.simulcastRid&&n(E.t.actions.setSimulcastRid(a.simulcastRid)),void 0!==a.spotlight&&n(E.t.actions.setSpotlight(a.spotlight)),void 0!==a.spotlightNumber&&n(E.t.actions.setSpotlightNumber(a.spotlightNumber)),void 0!==a.spotlightFocusRid&&n(E.t.actions.setSpotlightFocusRid(a.spotlightFocusRid)),void 0!==a.spotlightUnfocusRid&&n(E.t.actions.setSpotlightUnfocusRid(a.spotlightUnfocusRid)),void 0!==a.video&&n(E.t.actions.setVideo(a.video)),void 0!==a.videoBitRate&&n(E.t.actions.setVideoBitRate(a.videoBitRate)),void 0!==a.videoCodecType?n(E.t.actions.setVideoCodecType(a.videoCodecType)):n(E.t.actions.setVideoCodecType(R())),void 0!==a.videoVP9Params&&n(E.t.actions.setVideoVP9Params(a.videoVP9Params)),void 0!==a.videoH264Params&&n(E.t.actions.setVideoH264Params(a.videoH264Params)),void 0!==a.videoAV1Params&&n(E.t.actions.setVideoAV1Params(a.videoAV1Params)),void 0!==a.debug&&n(E.t.actions.setDebug(a.debug)),void 0!==a.debugType&&n(E.t.actions.setDebugType(a.debugType)),void 0!==a.mute&&n(E.t.actions.setMute(a.mute)),void 0!==a.dataChannelSignaling&&n(E.t.actions.setDataChannelSignaling(a.dataChannelSignaling)),void 0!==a.ignoreDisconnectWebSocket&&n(E.t.actions.setIgnoreDisconnectWebSocket(a.ignoreDisconnectWebSocket)),void 0!==a.micDevice&&n(E.t.actions.setMicDevice(a.micDevice)),void 0!==a.cameraDevice&&n(E.t.actions.setCameraDevice(a.cameraDevice)),void 0!==a.audioTrack&&n(E.t.actions.setAudioTrack(a.audioTrack)),void 0!==a.videoTrack&&n(E.t.actions.setVideoTrack(a.videoTrack)),void 0!==a.googCpuOveruseDetection&&null!==a.googCpuOveruseDetection&&n(E.t.actions.setGoogCpuOveruseDetection(a.googCpuOveruseDetection)),void 0!==a.bundleId&&n(E.t.actions.setBundleId(a.bundleId)),void 0!==a.clientId&&n(E.t.actions.setClientId(a.clientId)),void 0!==a.metadata&&n(E.t.actions.setMetadata(a.metadata)),void 0!==a.signalingNotifyMetadata&&n(E.t.actions.setSignalingNotifyMetadata(a.signalingNotifyMetadata)),void 0!==a.signalingUrlCandidates&&n(E.t.actions.setSignalingUrlCandidates(a.signalingUrlCandidates)),void 0!==a.forwardingFilter&&n(E.t.actions.setForwardingFilter(a.forwardingFilter)),void 0!==a.dataChannels&&n(E.t.actions.setDataChannels(a.dataChannels)),void 0!==a.audioContentHint&&n(E.t.actions.setAudioContentHint(a.audioContentHint)),void 0!==a.videoContentHint&&n(E.t.actions.setVideoContentHint(a.videoContentHint)),void 0!==a.reconnect&&n(E.t.actions.setReconnect(a.reconnect)),void 0!==a.aspectRatio&&n(E.t.actions.setAspectRatio(a.aspectRatio)),void 0!==a.resizeMode&&n(E.t.actions.setResizeMode(a.resizeMode)),void 0!==a.blurRadius&&n(E.t.actions.setBlurRadius(a.blurRadius)),void 0!==a.lightAdjustment&&n(E.t.actions.setLightAdjustment(a.lightAdjustment)),void 0!==a.mediaProcessorsNoiseSuppression&&n(E.t.actions.setMediaProcessorsNoiseSuppression(a.mediaProcessorsNoiseSuppression)),void 0!==a.apiUrl&&null!==a.apiUrl&&n(E.t.actions.setApiUrl(a.apiUrl)),void 0!==a.role&&n(E.t.actions.setRole(a.role)),void 0!==a.audioStreamingLanguageCode&&n(E.t.actions.setAudioStreamingLanguageCode(a.audioStreamingLanguageCode)),void 0!==a.lyraParamsBitrate&&n(E.t.actions.setLyraParamsBitrate(a.lyraParamsBitrate)),n(E.t.actions.setInitialFakeContents()),l=t(),u=l.audioStreamingLanguageCode,f=l.bundleId,m=l.clientId,p=l.dataChannelSignaling,g=l.dataChannels,h=l.e2ee,x=l.ignoreDisconnectWebSocket,j=l.metadata,b=l.signalingNotifyMetadata,C=l.signalingUrlCandidates,y=l.forwardingFilter,k=l.videoVP9Params,S=l.videoH264Params,w=l.videoAV1Params,!h){e.next=85;break}N="Faild to execute WebAssembly '".concat("https://sora-e2ee-wasm.shiguredo.app/2020.2/wasm.wasm","'."),e.next=76;break;case 76:return e.prev=76,e.next=79,d.Z.initE2EE("https://sora-e2ee-wasm.shiguredo.app/2020.2/wasm.wasm");case 79:e.next=85;break;case 81:return e.prev=81,e.t0=e.catch(76),n(E.t.actions.setSoraErrorAlertMessage(N)),e.abrupt("return");case 85:""!==f&&n(E.t.actions.setEnabledBundleId(!0)),""!==m&&n(E.t.actions.setEnabledClientId(!0)),""!==j&&n(E.t.actions.setEnabledMetadata(!0)),""!==b&&n(E.t.actions.setEnabledSignalingNotifyMetadata(!0)),0<C.length&&n(E.t.actions.setEnabledSignalingUrlCandidates(!0)),""!==y&&n(E.t.actions.setEnabledForwardingFilter(!0)),""===p&&""===x||n(E.t.actions.setEnabledDataChannel(!0)),""!==g&&n(E.t.actions.setEnabledDataChannels(!0)),""!==u&&n(E.t.actions.setEnabledAudioStreamingLanguageCode(!0)),""!==k&&n(E.t.actions.setEnabledVideoVP9Params(!0)),""!==S&&n(E.t.actions.setEnabledVideoH264Params(!0)),""!==w&&n(E.t.actions.setEnabledVideoAV1Params(!0)),n(E.t.actions.setSoraConnectionStatus("disconnected"));case 98:case"end":return e.stop()}}),e,null,[[76,81]])})));return function(n,t){return e.apply(this,arguments)}}()),e(q()),e(function(){var e=(0,i.Z)(s().mark((function e(n,t){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="https://lyra-wasm.shiguredo.app/2022.2.0/",d.Z.initLyra({wasmPath:a,modelPath:"https://lyra-wasm.shiguredo.app/2022.2.0/"}),"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js").then((function(e){e.addEventListener("updatefound",(function(){var n=e.installing;null!==n&&n.addEventListener("statechange",(function(){"activated"==n.state&&location.reload()}))}))}));case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),function(){e(K())}}),[]),(0,Sn.jsxs)(Sn.Fragment,{children:[(0,Sn.jsx)(mi,{}),(0,Sn.jsx)(ai,{}),(0,Sn.jsx)(ui,{}),(0,Sn.jsx)("main",{role:"main",children:(0,Sn.jsx)("div",{className:"container",children:(0,Sn.jsxs)("div",{className:"row",children:[(0,Sn.jsx)(Xr,{}),(0,Sn.jsx)(It,{})]})})}),(0,Sn.jsx)(ei,{})]})}},5367:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/devtools",function(){return t(9646)}])}},function(e){e.O(0,[189,156,645,774,888,179],(function(){return n=5367,e(e.s=n);var n}));var n=e.O();_N_E=n}]);