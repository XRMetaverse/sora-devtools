"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{3703:function(e,n,t){t.d(n,{H:function(){return ln}});var r=t(7294),i=t(1397),a=t(9976),o=t(9641),c=t(7144),s=t(266),u=t(809),l=t.n(u);function d(e,n,t){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)(l().mark((function e(n,t,r){var i,a,o,c,s,u,d,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.location.protocol,a="https:"==i?"443":"3000",o="https:"==i?"api":"",c="Sora_".concat(n,".").concat(t),s="".concat(i,"//").concat(window.location.hostname,":").concat(a,"/").concat(o),e.next=7,fetch(s,{method:"POST",body:JSON.stringify(r),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":c},mode:"cors"});case 7:return u=e.sent,e.next=10,u.json();case 10:if(d=e.sent,u.ok){e.next=16;break}throw f="POST ".concat(s," ").concat(u.status," (").concat(u.statusText,") target:").concat(c),d.error_type&&(f+=" error_type: ".concat(d.error_type)),new Error(f);case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d("20161101","StartRecording",{channel_id:e,expire_time:3600})}function h(e){return d("20161101","StopRecording",{channel_id:e})}function v(e,n,t,r){var i={channel_id:e,recv_connection_id:n,rid:t};return r&&(i.send_connection_id=r),d("20201005","RequestRtpStream",i)}function p(e,n,t){var r={channel_id:e,recv_connection_id:n};return t&&(r.send_connection_id=t),d("20201005","ResetRtpStream",r)}var x=t(8253),j=t(5893),g=function(e){var n=(0,i.C)((function(e){return e.soraContents.sora})),t=(0,i.C)((function(e){return e.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,v(t,n.connectionId,e.rid);case 5:a=i.sent,r((0,x.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,x.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"col-auto mb-1",children:(0,j.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:a})})},C=function(){var e=(0,i.C)((function(e){return e.soraContents.sora})),n=(0,i.C)((function(e){return e.channelId})),t=(0,i.T)(),r=function(){var r=(0,s.Z)(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,p(n,e.connectionId);case 5:i=r.sent,t((0,x.du)("POST successed. response: ".concat(JSON.stringify(i)))),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),r.t0 instanceof Error&&t((0,x.i8)(r.t0.message));case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"col-auto mb-1",children:(0,j.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:r})})},b=function(){var e=(0,i.C)((function(e){return e.channelId})),n=(0,i.T)(),t=function(){var t=(0,s.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m(e);case 3:r=t.sent,n((0,x.du)("POST successed. response: ".concat(JSON.stringify(r)))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0 instanceof Error&&n((0,x.i8)(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"col-auto mb-1",children:(0,j.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:t})})},y=function(){var e=(0,i.C)((function(e){return e.channelId})),n=(0,i.T)(),t=function(){var t=(0,s.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(e);case 3:r=t.sent,n((0,x.du)("POST successed. response: ".concat(JSON.stringify(r)))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0 instanceof Error&&n((0,x.i8)(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"col-auto mb-1",children:(0,j.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:t})})},Z=t(4051),I=t(1555),T=t(6986),N=t(8571),k=function(){var e=(0,i.C)((function(e){return e.audio})),n=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"audio",children:(0,j.jsx)(N.Z,{type:"switch",name:"audio",label:"audio",checked:e,onChange:function(e){n((0,x.$p)(e.target.checked))}})})},w=t(1341),R=t(469),O=t(4007),S=t(8052),E=function(){var e=(0,i.C)((function(e){return e.audioBitRate})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,j.jsx)(w.Z,{children:"audioBitRate:"}),(0,j.jsx)(R.Z,{name:"audioBitRate",value:e,onChange:function(e){(0,S.nu)(e.target.value)&&n((0,x.VY)(e.target.value))},children:O.xR.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},P=function(){var e=(0,i.C)((function(e){return e.audioCodecType})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,j.jsx)(w.Z,{children:"audioCodecType:"}),(0,j.jsx)(R.Z,{name:"audioCodecType",value:e,onChange:function(e){(0,S.yP)(e.target.value)&&n((0,x.PQ)(e.target.value))},children:O.o1.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},D=function(){var e=(0,i.C)((function(e){return e.autoGainControl})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,j.jsx)(w.Z,{children:"autoGainControl:"}),(0,j.jsx)(R.Z,{name:"autoGainControl",value:e,onChange:function(e){(0,S.Ee)(e.target.value)&&n((0,x.yn)(e.target.value))},children:O.iN.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},B=function(){var e=(0,i.C)((function(e){return e.echoCancellation})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,j.jsx)(w.Z,{children:"echoCancellation:"}),(0,j.jsx)(R.Z,{name:"echoCancellation",value:e,onChange:function(e){(0,S.Tp)(e.target.value)&&n((0,x.LN)(e.target.value))},children:O.PS.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},F=function(){var e=(0,i.C)((function(e){return e.echoCancellationType})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,j.jsx)(w.Z,{children:"echoCancellationType:"}),(0,j.jsx)(R.Z,{name:"echoCancellationType",value:e,onChange:function(e){(0,S.Gn)(e.target.value)&&n((0,x.lW)(e.target.value))},children:O.cJ.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},_=function(){var e=(0,i.C)((function(e){return e.noiseSuppression})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,j.jsx)(w.Z,{children:"noiseSuppression:"}),(0,j.jsx)(R.Z,{name:"noiseSuppression",value:e,onChange:function(e){(0,S.E7)(e.target.value)&&n((0,x.fj)(e.target.value))},children:O.ad.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},A=function(){var e=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(k,{})}),e.audioCodecType?(0,j.jsx)(I.Z,{children:(0,j.jsx)(P,{})}):null,e.audioBitRate?(0,j.jsx)(I.Z,{children:(0,j.jsx)(E,{})}):null,e.audioConstraints?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(D,{})}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(_,{})}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(B,{})}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(F,{})})]}):null]})},V=t(6548),M=function(){var e=(0,i.T)();return(0,j.jsx)("div",{className:"col-auto mb-1",children:(0,j.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){e((0,x.pI)())}})})},J=function(){var e=(0,i.C)((function(e){return e.audioInput})),n=(0,i.C)((function(e){return e.audioInputDevices})),t=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"audioInput",children:[(0,j.jsx)(w.Z,{children:"audioInput:"}),(0,j.jsx)(R.Z,{name:"audioInput",value:e,onChange:function(e){t((0,x.hS)(e.target.value)),t((0,x.Lb)())},disabled:0===n.length,children:n.map((function(e){return(0,j.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))})]})},U=function(){var e=(0,i.C)((function(e){return e.audioOutput})),n=(0,i.C)((function(e){return e.audioOutputDevices})),t=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,j.jsx)(w.Z,{children:"audioOutput:"}),(0,j.jsx)(R.Z,{name:"audioOutput",value:e,onChange:function(e){t((0,x.SV)(e.target.value))},disabled:0===n.length,children:n.map((function(e){return(0,j.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))})]})},L=function(){var e=(0,i.C)((function(e){return e.videoInput})),n=(0,i.C)((function(e){return e.videoInputDevices})),t=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"videoInput",children:[(0,j.jsx)(w.Z,{children:"videoInput:"}),(0,j.jsx)(R.Z,{name:"videoInput",value:e,onChange:function(e){t((0,x.lZ)(e.target.value)),t((0,x.Lb)())},disabled:0===n.length,children:n.map((function(e){return(0,j.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))})]})},z=function(){var e=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[e.audioInput?(0,j.jsx)(I.Z,{children:(0,j.jsx)(J,{})}):null,e.videoInput?(0,j.jsx)(I.Z,{children:(0,j.jsx)(L,{})}):null,e.audioOutput?(0,j.jsx)(I.Z,{children:(0,j.jsx)(U,{})}):null,(0,j.jsx)(M,{})]})},G=function(){var e=(0,i.C)((function(e){return e.audioTrack})),n=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"audioTrack",children:(0,j.jsx)(N.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:e,onChange:function(e){n((0,x.XP)(e.target.checked))}})})},q=function(){var e=(0,i.C)((function(e){return e.cameraDevice})),n=(0,i.C)((function(e){return e.soraContents.sora})),t=(0,i.C)((function(e){return e.video})),r=!(n?n.video:t),a=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,j.jsx)(N.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:e,onChange:function(e){a((0,x.gF)(e.target.checked))},disabled:r})})},H=function(){var e=(0,i.C)((function(e){return e.displayResolution})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,j.jsx)(w.Z,{children:"displayResolution:"}),(0,j.jsx)(R.Z,{name:"displayResolution",value:e,onChange:function(e){(0,S.ko)(e.target.value)&&n((0,x.I$)(e.target.value))},children:O.hJ.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Q=function(){var e=(0,i.C)((function(e){return e.micDevice})),n=(0,i.C)((function(e){return e.soraContents.sora})),t=(0,i.C)((function(e){return e.audio})),r=!(n?n.audio:t),a=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"micDevice",children:(0,j.jsx)(N.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:e,onChange:function(e){a((0,x.vX)(e.target.checked))},disabled:r})})},X=function(){var e=(0,i.C)((function(e){return e.videoTrack})),n=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"videoTrack",children:(0,j.jsx)(N.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:e,onChange:function(e){n((0,x.e_)(e.target.checked))}})})},W=function(){var e=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(H,{})}),e.micDevice?(0,j.jsx)(I.Z,{children:(0,j.jsx)(Q,{})}):null,e.cameraDevice?(0,j.jsx)(I.Z,{children:(0,j.jsx)(q,{})}):null,e.audioTrack?(0,j.jsx)(I.Z,{children:(0,j.jsx)(G,{})}):null,e.videoTrack?(0,j.jsx)(I.Z,{children:(0,j.jsx)(X,{})}):null]})},$=t(4184),Y=t.n($),K=t(5697),ee=t.n(K),ne=t(4716),te=(0,t(4680).Z)("form-floating"),re=t(600),ie=t(1377);const ae=r.forwardRef((({bsPrefix:e,className:n,id:t,...i},a)=>{const{controlId:o}=(0,r.useContext)(ie.Z);return e=(0,re.vE)(e,"form-range"),(0,j.jsx)("input",{...i,type:"range",ref:a,className:Y()(n,e),id:t||o})}));ae.displayName="FormRange";var oe=ae;const ce=r.forwardRef((({bsPrefix:e,className:n,as:t="small",muted:r,...i},a)=>(e=(0,re.vE)(e,"form-text"),(0,j.jsx)(t,{...i,ref:a,className:Y()(n,e,r&&"text-muted")}))));ce.displayName="FormText";var se=ce;const ue=r.forwardRef(((e,n)=>(0,j.jsx)(N.Z,{...e,ref:n,type:"switch"})));ue.displayName="Switch";var le=Object.assign(ue,{Input:N.Z.Input,Label:N.Z.Label});const de=r.forwardRef((({bsPrefix:e,className:n,children:t,controlId:r,label:i,...a},o)=>(e=(0,re.vE)(e,"form-floating"),(0,j.jsxs)(T.Z,{ref:o,className:Y()(n,e),controlId:r,...a,children:[t,(0,j.jsx)("label",{htmlFor:r,children:i})]}))));de.displayName="FloatingLabel";var fe=de;const me={_ref:ee().any,validated:ee().bool,as:ee().elementType},he=r.forwardRef((({className:e,validated:n,as:t="form",...r},i)=>(0,j.jsx)(t,{...r,ref:i,className:Y()(e,n&&"was-validated")})));he.displayName="Form",he.propTypes=me;var ve=Object.assign(he,{Group:T.Z,Control:ne.Z,Floating:te,Check:N.Z,Switch:le,Label:w.Z,Text:se,Range:oe,Select:R.Z,FloatingLabel:fe}),pe=function(){var e=(0,i.C)((function(e){return e.mediaType})),n=(0,i.C)((function(e){return e.fakeVolume})),t=(0,i.T)();return"fakeMedia"!==e?null:(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,j.jsx)(w.Z,{children:"fakeVolume:"}),(0,j.jsx)(ve.Range,{min:"0",max:"1",step:"0.1",value:n,onChange:function(e){t((0,x.eW)(e.target.value))}})]})},xe=function(e){var n=e.label,t=e.disabled,r=e.onChange,i=e.mediaType;return(0,j.jsx)(N.Z,{type:"radio",inline:!0,id:n,label:n,value:n,checked:i===n,onChange:r,disabled:t})},je=function(){var e=(0,i.C)((function(e){return e.soraContents})),n=(0,i.C)((function(e){return e.mediaType})),t=null!==e.sora,r=(0,i.T)(),a=function(e){(0,S.nm)(e.target.value)&&r((0,x.y5)(e.target.value))};return(0,j.jsxs)(T.Z,{className:"form-inline",children:[(0,j.jsx)(w.Z,{children:"mediaType:"}),(0,j.jsx)(xe,{label:"getUserMedia",mediaType:n,disabled:t,onChange:a}),(0,j.jsx)(xe,{label:"getDisplayMedia",mediaType:n,disabled:t,onChange:a}),(0,j.jsx)(xe,{label:"fakeMedia",mediaType:n,disabled:t,onChange:a})]})},ge=function(){return(0,j.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(je,{})}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(pe,{})})]})},Ce=t(9693),be=function(){var e=(0,i.C)((function(e){return e.spotlightFocusRid})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,j.jsx)(w.Z,{children:"spotlightFocusRid:"}),(0,j.jsx)(R.Z,{value:e,onChange:function(e){(0,S.iF)(e.target.value)&&n((0,x.CV)(e.target.value))},children:O.I7.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},ye=function(){var e=(0,i.C)((function(e){return e.spotlightNumber})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,j.jsx)(w.Z,{children:"spotlightNumber:"}),(0,j.jsx)(R.Z,{value:e,onChange:function(e){(0,S.EQ)(e.target.value)&&n((0,x.TT)(e.target.value))},children:O.Xr.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ze=function(){var e=(0,i.C)((function(e){return e.spotlightUnfocusRid})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,j.jsx)(w.Z,{children:"spotlightUnfocusRid:"}),(0,j.jsx)(R.Z,{value:e,onChange:function(e){(0,S.iF)(e.target.value)&&n((0,x.qV)(e.target.value))},children:O.I7.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ie=function(){var e=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[e.spotlightNumber?(0,j.jsx)(I.Z,{children:(0,j.jsx)(ye,{})}):null,e.spotlightFocusRid?(0,j.jsx)(I.Z,{children:(0,j.jsx)(be,{})}):null,e.spotlightUnfocusRid?(0,j.jsx)(I.Z,{children:(0,j.jsx)(Ze,{})}):null]})},Te=function(){var e=(0,i.C)((function(e){return e.frameRate})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"frameRate",children:[(0,j.jsx)(w.Z,{children:"frameRate:"}),(0,j.jsx)(R.Z,{name:"frameRate",value:e,onChange:function(e){(0,S.F9)(e.target.value)&&n((0,x.co)(e.target.value))},children:O.YX.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ne=function(){var e=(0,i.C)((function(e){return e.resolution})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"resolution",children:[(0,j.jsx)(w.Z,{children:"resolution:"}),(0,j.jsx)(R.Z,{name:"resolution",value:e,onChange:function(e){(0,S.zM)(e.target.value)&&n((0,x.Ik)(e.target.value))},children:O.Vf.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},ke=function(){var e=(0,i.C)((function(e){return e.simulcastRid})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,j.jsx)(w.Z,{children:"simulcastRid:"}),(0,j.jsx)(R.Z,{name:"simulcastRid",value:e,onChange:function(e){(0,S.zG)(e.target.value)&&n((0,x.vM)(e.target.value))},children:O.WJ.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},we=function(){var e=(0,i.C)((function(e){return e.video})),n=(0,i.T)();return(0,j.jsx)(T.Z,{className:"form-inline",controlId:"video",children:(0,j.jsx)(N.Z,{type:"switch",name:"video",label:"video",checked:e,onChange:function(e){n((0,x.ge)(e.target.checked))}})})},Re=O.Q5.slice();Re.splice(O.Q5.indexOf("15000")+1,0,"support-message");var Oe=function(){var e=(0,i.C)((function(e){return e.videoBitRate})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,j.jsx)(w.Z,{children:"videoBitRate:"}),(0,j.jsx)(R.Z,{name:"videoBitRate",value:e,onChange:function(e){(0,S.Uz)(e.target.value)&&n((0,x.as)(e.target.value))},children:Re.map((function(e){var n=e;return""===e?n="\u672a\u6307\u5b9a":"support-message"===e&&(n="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,j.jsx)("option",{value:e,disabled:"support-message"===e,children:n},e)}))})]})},Se=function(){var e=(0,i.C)((function(e){return e.videoCodecType})),n=(0,i.T)();return(0,j.jsxs)(T.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,j.jsx)(w.Z,{children:"videoCodecType:"}),(0,j.jsx)(R.Z,{name:"videoCodecType",value:e,onChange:function(e){(0,S.ou)(e.target.value)&&n((0,x.h2)(e.target.value))},children:O.Sh.map((function(e){return(0,j.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ee=function(){var e=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(we,{})}),e.videoCodecType?(0,j.jsx)(I.Z,{children:(0,j.jsx)(Se,{})}):null,e.videoBitRate?(0,j.jsx)(I.Z,{children:(0,j.jsx)(Oe,{})}):null,e.videoConstraints?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.Z,{children:(0,j.jsx)(Ne,{})}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(Te,{})})]}):null,e.simulcastRid?(0,j.jsx)(I.Z,{children:(0,j.jsx)(ke,{})}):null]})},Pe=t(6435),De=function(e){return(0,j.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,j.jsx)("p",{className:"mx-2 p-1",children:e.text}),(0,j.jsx)("div",{className:"border-left border-secondary",children:(0,j.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(n){(0,S.f7)(e.text),n.currentTarget.blur()},children:(0,j.jsx)(Pe.R,{})})})]})},Be=function(e){return(0,j.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[e.connectionId?(0,j.jsx)(De,{text:e.connectionId}):null,null!==e.clientId&&void 0!==e.clientId&&e.connectionId!==e.clientId?(0,j.jsx)(De,{text:e.clientId}):null]})},Fe=t(2809);function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var Ae=function(e){var n,t=e.displayResolution,i=e.stream,a=e.mute,o=e.audioOutput,c=e.setHeight,s=(0,r.useRef)(null),u=(0,S.fl)(t);return(0,r.useEffect)((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){c(e.contentRect.height)}))}));return s.current&&(o&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),e.observe(s.current)),function(){e.disconnect()}}),[]),(0,r.useEffect)((function(){s.current&&a&&(s.current.muted=!0)}),[a]),(0,r.useEffect)((function(){var e;s.current&&i?(i.getVideoTracks().forEach((function(n){e=n.enabled,n.enabled=!1})),s.current.onloadedmetadata=function(n){i.getVideoTracks().forEach((function(n){void 0!==e&&(n.enabled=e)}))},s.current.srcObject=i,o&&i.getAudioTracks().length>0&&s.current.setSinkId(o)):s.current&&null===i&&(s.current.srcObject=null)}),[i]),o&&null!==(n=s.current)&&void 0!==n&&n.setSinkId&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),(0,j.jsx)("video",{autoPlay:!0,playsInline:!0,controls:!0,muted:a,ref:s,width:0<u.width?u.width:void 0,height:0<u.height?u.height:void 0})},Ve=r.memo((function(e){return(0,j.jsx)(Ae,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,Fe.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))}));function Me(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Je(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Me(Object(t),!0).forEach((function(n){(0,Fe.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ue=2.5,Le=10,ze="#CCCCCC";function Ge(e,n,t){e.beginPath(),e.fillStyle=n,e.fillRect(0,t,25,Le),e.closePath()}function qe(e,n){var t=Math.ceil(n/12.5),r=n-Le;Ge(e,ze,r);for(var i=0;i<t;i++)Ge(e,ze,r=r-Le-Ue)}var He=function(e){var n=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(0!==e.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(e.stream),i=t.createAnalyser();i.fftSize=2048;var a=i.frequencyBinCount,o=new Uint8Array(a);r.connect(i);var c=null;return function e(){c=requestAnimationFrame(e),i.getByteTimeDomainData(o);var t=Array.from(o),r=Math.max.apply(null,t)-128,a=n.current;if(null!==a){var s=a.getContext("2d");null!==s&&(s.clearRect(0,0,25,a.height),s.save(),qe(s,a.height),function(e,n,t){for(var r=n*t,i=Math.ceil(r/12.5),a=0;a<i;a++)Ge(e,"#000000",n-Le*(a+1)-Ue*a)}(s,a.height,r/128),s.restore())}}(),function(){t&&t.close(),c&&cancelAnimationFrame(c)}}}),[]),(0,j.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},Qe=function(e){var n=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=n.current;if(null!==e){var t=e.getContext("2d");null!==t&&(t.clearRect(0,0,25,e.height),t.save(),qe(t,e.height),t.restore())}}),[]),(0,j.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},Xe=r.memo((function(e){return e.micDevice&&0<e.stream.getAudioTracks().length?(0,j.jsx)(He,Je({},e)):(0,j.jsx)(Qe,Je({},e))})),We=function(){var e=(0,r.useState)(0),n=e[0],t=e[1],a=(0,i.C)((function(e){return e.audioOutput})),o=(0,i.C)((function(e){return e.displayResolution})),c=(0,i.C)((function(e){return e.focusedSpotlightConnectionIds})),s=(0,i.C)((function(e){return e.soraContents.connectionId})),u=(0,i.C)((function(e){return e.soraContents.localMediaStream})),l=(0,i.C)((function(e){return e.micDevice})),d=s&&c[s];return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"d-flex",children:(0,j.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(d?" spotlight-focused":""),children:[(0,j.jsx)(Ve,{stream:u,setHeight:t,audioOutput:a,displayResolution:o,mute:!0}),null!==u?(0,j.jsx)(Xe,{micDevice:l,stream:u,height:n}):null]})})})},$e=function(){var e=(0,i.C)((function(e){return e.soraContents.connectionId})),n=(0,i.C)((function(e){return e.soraContents.clientId})),t=(0,i.C)((function(e){return e.role}));return(0,j.jsx)("div",{className:"row my-1",children:(0,j.jsxs)("div",{className:"col-auto",children:[(0,j.jsx)("div",{className:"video-status mb-1",children:null!==e||null!==n?(0,j.jsx)(Be,{connectionId:e,clientId:n}):null}),"recvonly"!==t?(0,j.jsx)(We,{}):null]})})},Ye=t(6311),Ke=function(e){var n=(0,i.C)((function(e){return e.soraContents.sora})),t=(0,i.C)((function(e){return e.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,v(t,n.connectionId,e.rid,e.sendConnectionId);case 5:a=i.sent,r((0,x.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,x.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,j.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:a})},en=function(e){var n=(0,i.C)((function(e){return e.soraContents.sora})),t=(0,i.C)((function(e){return e.channelId})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,p(t,n.connectionId,e.sendConnectionId);case 5:a=i.sent,r((0,x.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,x.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,j.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:a})};function nn(e,n,t){if(null!==n){var r=[];return"video"===t?r=n.getVideoTracks().map((function(e){return e.id})):"audio"===t&&(r=n.getAudioTracks().map((function(e){return e.id}))),e.find((function(e){if(e.id&&!e.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in e){var n=e;return n.trackIdentifier&&r.includes(n.trackIdentifier)}return!1}))}}var tn=function(e){var n=(0,i.C)((function(e){return e.soraContents.statsReport})),t=(0,i.C)((function(e){return e.soraContents.prevStatsReport})),r=nn(n,e.stream,e.type),a=nn(t,e.stream,e.type);if(!r)return null;var o=r.jitterBufferDelay,c=r.jitterBufferEmittedCount;a&&(o=r.jitterBufferDelay-a.jitterBufferDelay,c=r.jitterBufferEmittedCount-a.jitterBufferEmittedCount);var s=Math.floor(o/c*1e3),u="normal-jitter-buffer";return 500<s?u="critical-jitter-buffer":300<s?u="danger-jitter-buffer":100<s&&(u="warning-jitter-buffer"),(0,j.jsx)("div",{className:"btn btn-sm mx-1 ".concat(u),children:(0,j.jsxs)("span",{children:[e.type,": ",s]})})};function rn(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return an(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return an(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw a}}}}function an(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function on(e,n){if(null===n)return[];var t,r=n.getTracks().map((function(e){return e.id})),i=[],a=rn(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if((!o.id||o.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in o){var c=o;c.trackIdentifier&&r.includes(c.trackIdentifier)&&i.push(c)}}}catch(s){a.e(s)}finally{a.f()}return i}var cn=function(e){var n=(0,i.C)((function(e){return e.showStats})),t=(0,i.C)((function(e){return e.soraContents.statsReport})),r=(0,i.C)((function(e){return e.soraContents.prevStatsReport}));if(!n)return null;var a=on(t,e.stream),o=on(r,e.stream);return(0,j.jsx)(j.Fragment,{children:a.map((function(e){var n=0,t=0,r=o.find((function(n){return e.id===n.id}));return r&&(n=e.jitterBufferDelay-r.jitterBufferDelay,t=e.jitterBufferEmittedCount-r.jitterBufferEmittedCount),(0,j.jsx)("div",{children:(0,j.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(e).map((function(e){var n=(0,Ye.Z)(e,2),t=n[0],r=n[1];return(0,j.jsxs)("li",{children:[(0,j.jsxs)("strong",{children:[t,":"]})," ",r]},t)})),(0,j.jsxs)("li",{children:[(0,j.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(n/t*1e3)]})]})},e.id)}))})},sn=function(e){var n=(0,r.useState)(0),t=n[0],a=n[1],o=(0,i.C)((function(e){return e.audioOutput})),c=(0,i.C)((function(e){return e.displayResolution})),s=(0,i.C)((function(e){return e.focusedSpotlightConnectionIds})),u=(0,i.C)((function(e){return e.multistream})),l=(0,i.C)((function(e){return e.mute})),d=(0,i.C)((function(e){return e.simulcast})),f=(0,i.C)((function(e){return e.spotlight})),m=e.stream.id&&s[e.stream.id];return(0,j.jsxs)("div",{className:"col-auto",children:[(0,j.jsxs)("div",{className:"video-status",children:[(0,j.jsx)(Be,{connectionId:e.stream.id}),(0,j.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,j.jsx)(tn,{type:"audio",stream:e.stream}),(0,j.jsx)(tn,{type:"video",stream:e.stream}),!f&&u&&d?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ke,{rid:"r0",sendConnectionId:e.stream.id}),(0,j.jsx)(Ke,{rid:"r1",sendConnectionId:e.stream.id}),(0,j.jsx)(Ke,{rid:"r2",sendConnectionId:e.stream.id})]}):null,f&&u&&d?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ke,{rid:"r0",sendConnectionId:e.stream.id}),(0,j.jsx)(Ke,{rid:"r1",sendConnectionId:e.stream.id}),(0,j.jsx)(Ke,{rid:"r2",sendConnectionId:e.stream.id}),(0,j.jsx)(en,{sendConnectionId:e.stream.id})]}):null]})]}),(0,j.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,j.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(m?" spotlight-focused":""),children:[(0,j.jsx)(Ve,{stream:e.stream,setHeight:a,mute:l,audioOutput:o,displayResolution:c}),(0,j.jsx)(Xe,{micDevice:!0,stream:e.stream,height:t})]}),(0,j.jsx)(cn,{stream:e.stream})]})]})},un=function(){var e=(0,i.C)((function(e){return e.soraContents.remoteMediaStreams}));return(0,j.jsx)("div",{className:"row my-2",children:e.map((function(e){return(0,j.jsx)(sn,{stream:e},e.id)}))})},ln=function(){var e=(0,i.C)((function(e){return e.debug})),n=(0,i.C)((function(e){return e.role})),t=(0,i.C)((function(e){return e.spotlight})),r=(0,i.C)((function(e){return e.simulcast})),s=(0,i.C)((function(e){return e.displaySettings}));return(0,j.jsxs)("div",{className:e?"col-demo col-6":"col-demo col-12",children:[(0,j.jsx)(a.P,{}),s.mediaType?(0,j.jsx)(ge,{}):null,(0,j.jsx)(V.P,{}),(0,j.jsx)(A,{}),(0,j.jsx)(Ee,{}),(0,j.jsx)(Ie,{}),(0,j.jsx)(z,{}),(0,j.jsx)(W,{}),(0,j.jsx)(Ce.A,{}),(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)(o.l,{}),(0,j.jsx)(c.c,{}),(0,j.jsx)(b,{}),(0,j.jsx)(y,{}),!t&&r&&"sendonly"!==n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g,{rid:"r0"}),(0,j.jsx)(g,{rid:"r1"}),(0,j.jsx)(g,{rid:"r2"})]}):null,t&&r&&"sendonly"!==n?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g,{rid:"r0"}),(0,j.jsx)(g,{rid:"r1"}),(0,j.jsx)(g,{rid:"r2"}),(0,j.jsx)(C,{})]}):null]}),(0,j.jsx)($e,{}),"recvonly"===n||"sendrecv"===n?(0,j.jsx)(un,{}):null]})}}}]);