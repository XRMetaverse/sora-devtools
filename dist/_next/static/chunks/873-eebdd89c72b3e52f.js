"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{7821:function(e,n,t){t.d(n,{$p:function(){return B},AZ:function(){return L},CV:function(){return we},E1:function(){return N},EG:function(){return A},Gc:function(){return q},H6:function(){return je},H_:function(){return m},Hi:function(){return h},I$:function(){return ee},Ik:function(){return Ce},LN:function(){return ne},Lb:function(){return w},Nd:function(){return ue},P6:function(){return be},PQ:function(){return V},SV:function(){return _},TT:function(){return Ze},VI:function(){return ie},VY:function(){return U},XH:function(){return Ne},XP:function(){return J},Xk:function(){return $},Yr:function(){return S},as:function(){return Re},b3:function(){return fe},bH:function(){return G},b_:function(){return D},bl:function(){return K},c0:function(){return Z},cA:function(){return W},cT:function(){return ve},co:function(){return de},du:function(){return E},eO:function(){return M},eU:function(){return Y},eW:function(){return le},eX:function(){return k},e_:function(){return Ee},ew:function(){return X},fj:function(){return ge},gF:function(){return O},ge:function(){return Oe},h2:function(){return Me},hS:function(){return F},i8:function(){return P},l7:function(){return ye},lW:function(){return te},lZ:function(){return Pe},mK:function(){return H},nD:function(){return Se},pD:function(){return Q},pI:function(){return T},pv:function(){return ae},qV:function(){return Ie},rY:function(){return oe},rv:function(){return pe},sD:function(){return Te},sk:function(){return xe},vM:function(){return ke},vX:function(){return I},vq:function(){return ce},w6:function(){return De},y5:function(){return me},yC:function(){return he},yQ:function(){return re},yn:function(){return z},yq:function(){return se}});var r=t(2640),a=t(29),i=t(7794),o=t.n(i),s=t(7690),c=t(6897),u=t(2923),l=t(7174),d=t(4839);function f(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var m=function(e){return function(){var n=(0,a.Z)(o().mark((function n(t,r){var a,i,s,c,f,p,m,h,v,g,x,b,C,j,y,S;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(d.t.actions.resetState()),a=(0,l.dD)(),t(d.t.actions.setRole(e)),void 0!==a.audio&&t(d.t.actions.setAudio(a.audio)),void 0!==a.audioBitRate&&t(d.t.actions.setAudioBitRate(a.audioBitRate)),void 0!==a.audioCodecType&&t(d.t.actions.setAudioCodecType(a.audioCodecType)),n.next=8,(0,l.PW)();case 8:if(i=n.sent,void 0!==(s=i.find((function(e){return"audioinput"===e.kind&&e.deviceId===a.audioInput})))&&t(d.t.actions.setAudioInput(s.deviceId)),void 0!==(c=i.find((function(e){return"audiooutput"===e.kind&&e.deviceId===a.audioOutput})))&&t(d.t.actions.setAudioOutput(c.deviceId)),void 0!==(f=i.find((function(e){return"videoinput"===e.kind&&e.deviceId===a.videoInput})))&&t(d.t.actions.setVideoInput(f.deviceId)),void 0!==a.autoGainControl&&t(d.t.actions.setAutoGainControl(a.autoGainControl)),void 0!==a.channelId&&t(d.t.actions.setChannelId(a.channelId)),void 0!==a.displayResolution&&t(d.t.actions.setDisplayResolution(a.displayResolution)),void 0!==a.e2ee&&t(d.t.actions.setE2EE(a.e2ee)),void 0!==a.echoCancellation&&t(d.t.actions.setEchoCancellation(a.echoCancellation)),void 0!==a.echoCancellationType&&t(d.t.actions.setEchoCancellationType(a.echoCancellationType)),void 0!==a.mediaType&&t(d.t.actions.setMediaType(a.mediaType)),void 0!==a.fakeVolume&&t(d.t.actions.setFakeVolume(a.fakeVolume)),void 0!==a.frameRate&&t(d.t.actions.setFrameRate(a.frameRate)),void 0!==a.multistream&&t(d.t.actions.setMultistream(a.multistream)),void 0!==a.noiseSuppression&&t(d.t.actions.setNoiseSuppression(a.noiseSuppression)),void 0!==a.resolution&&t(d.t.actions.setResolution(a.resolution)),void 0!==a.showStats&&t(d.t.actions.setShowStats(a.showStats)),void 0!==a.simulcast&&t(d.t.actions.setSimulcast(a.simulcast)),void 0!==a.simulcastRid&&t(d.t.actions.setSimulcastRid(a.simulcastRid)),void 0!==a.spotlight&&t(d.t.actions.setSpotlight(a.spotlight)),void 0!==a.spotlightNumber&&t(d.t.actions.setSpotlightNumber(a.spotlightNumber)),void 0!==a.spotlightFocusRid&&t(d.t.actions.setSpotlightFocusRid(a.spotlightFocusRid)),void 0!==a.spotlightUnfocusRid&&t(d.t.actions.setSpotlightUnfocusRid(a.spotlightUnfocusRid)),void 0!==a.video&&t(d.t.actions.setVideo(a.video)),void 0!==a.videoBitRate&&t(d.t.actions.setVideoBitRate(a.videoBitRate)),void 0!==a.videoCodecType?t(d.t.actions.setVideoCodecType(a.videoCodecType)):t(d.t.actions.setVideoCodecType((0,l.Sg)())),void 0!==a.debug&&t(d.t.actions.setDebug(a.debug)),void 0!==a.debugType&&t(d.t.actions.setDebugType(a.debugType)),void 0!==a.mute&&t(d.t.actions.setMute(a.mute)),void 0!==a.dataChannelSignaling&&t(d.t.actions.setDataChannelSignaling(a.dataChannelSignaling)),void 0!==a.ignoreDisconnectWebSocket&&t(d.t.actions.setIgnoreDisconnectWebSocket(a.ignoreDisconnectWebSocket)),void 0!==a.micDevice&&t(d.t.actions.setMicDevice(a.micDevice)),void 0!==a.cameraDevice&&t(d.t.actions.setCameraDevice(a.cameraDevice)),void 0!==a.audioTrack&&t(d.t.actions.setAudioTrack(a.audioTrack)),void 0!==a.videoTrack&&t(d.t.actions.setVideoTrack(a.videoTrack)),void 0!==a.googCpuOveruseDetection&&null!==a.googCpuOveruseDetection&&t(d.t.actions.setGoogCpuOveruseDetection(a.googCpuOveruseDetection)),void 0!==a.bundleId&&t(d.t.actions.setBundleId(a.bundleId)),void 0!==a.clientId&&t(d.t.actions.setClientId(a.clientId)),void 0!==a.metadata&&t(d.t.actions.setMetadata(a.metadata)),void 0!==a.signalingNotifyMetadata&&t(d.t.actions.setSignalingNotifyMetadata(a.signalingNotifyMetadata)),void 0!==a.signalingUrlCandidates&&t(d.t.actions.setSignalingUrlCandidates(a.signalingUrlCandidates)),void 0!==a.dataChannels&&t(d.t.actions.setDataChannels(a.dataChannels)),void 0!==a.audioContentHint&&t(d.t.actions.setAudioContentHint(a.audioContentHint)),void 0!==a.videoContentHint&&t(d.t.actions.setVideoContentHint(a.videoContentHint)),void 0!==a.reconnect&&t(d.t.actions.setReconnect(a.reconnect)),void 0!==a.aspectRatio&&t(d.t.actions.setAspectRatio(a.aspectRatio)),void 0!==a.resizeMode&&t(d.t.actions.setResizeMode(a.resizeMode)),void 0!==a.blurRadius&&t(d.t.actions.setBlurRadius(a.blurRadius)),void 0!==a.mediaProcessorsNoiseSuppression&&t(d.t.actions.setMediaProcessorsNoiseSuppression(a.mediaProcessorsNoiseSuppression)),void 0!==a.apiUrl&&null!==a.apiUrl&&t(d.t.actions.setApiUrl(a.apiUrl)),t(d.t.actions.setInitialFakeContents()),p=r(),m=p.bundleId,h=p.clientId,v=p.dataChannels,g=p.dataChannelSignaling,x=p.e2ee,b=p.ignoreDisconnectWebSocket,C=p.metadata,j=p.signalingNotifyMetadata,y=p.signalingUrlCandidates,!x){n.next=77;break}S="Faild to execute WebAssembly '".concat("https://sora-e2ee-wasm.shiguredo.jp/2020.2/wasm.wasm","'."),n.next=68;break;case 68:return n.prev=68,n.next=71,u.Z.initE2EE("https://sora-e2ee-wasm.shiguredo.jp/2020.2/wasm.wasm");case 71:n.next=77;break;case 73:return n.prev=73,n.t0=n.catch(68),t(d.t.actions.setSoraErrorAlertMessage(S)),n.abrupt("return");case 77:""!==m&&t(d.t.actions.setEnabledBundleId(!0)),""!==h&&t(d.t.actions.setEnabledClientId(!0)),""!==C&&t(d.t.actions.setEnabledMetadata(!0)),""!==j&&t(d.t.actions.setEnabledSignalingNotifyMetadata(!0)),0<y.length&&t(d.t.actions.setEnabledSignalingUrlCandidates(!0)),""===g&&""===b||t(d.t.actions.setEnabledDataChannel(!0)),""!==v&&t(d.t.actions.setEnabledDataChannels(!0)),t(d.t.actions.setSoraConnectionStatus("disconnected"));case 85:case"end":return n.stop()}}),n,null,[[68,73]])})));return function(e,t){return n.apply(this,arguments)}}()},h=function(){return function(e,n){var t=n(),r={channelId:t.channelId,audio:t.audio,video:t.video,debug:t.debug,mediaType:"getUserMedia"!==t.mediaType?t.mediaType:void 0,audioBitRate:""!==t.audioBitRate?t.audioBitRate:void 0,audioCodecType:""!==t.audioCodecType?t.audioCodecType:void 0,videoBitRate:""!==t.videoBitRate?t.videoBitRate:void 0,videoCodecType:""!==t.videoCodecType?t.videoCodecType:void 0,audioContentHint:""!==t.audioContentHint?t.audioContentHint:void 0,autoGainControl:""!==t.autoGainControl?t.autoGainControl:void 0,noiseSuppression:""!==t.noiseSuppression?t.noiseSuppression:void 0,echoCancellation:""!==t.echoCancellation?t.echoCancellation:void 0,echoCancellationType:""!==t.echoCancellationType?t.echoCancellationType:void 0,videoContentHint:""!==t.videoContentHint?t.videoContentHint:void 0,resolution:""!==t.resolution?t.resolution:void 0,frameRate:""!==t.frameRate?t.frameRate:void 0,aspectRatio:""!==t.aspectRatio?t.aspectRatio:void 0,resizeMode:""!==t.resizeMode?t.resizeMode:void 0,blurRadius:""!==t.blurRadius?t.blurRadius:void 0,multistream:""!==t.multistream?t.multistream:void 0,simulcast:""!==t.simulcast?t.simulcast:void 0,simulcastRid:""!==t.simulcastRid?t.simulcastRid:void 0,spotlight:""!==t.spotlight?t.spotlight:void 0,spotlightNumber:""!==t.spotlightNumber?t.spotlightNumber:void 0,spotlightFocusRid:""!==t.spotlightFocusRid?t.spotlightFocusRid:void 0,spotlightUnfocusRid:""!==t.spotlightUnfocusRid?t.spotlightUnfocusRid:void 0,audioInput:""!==t.audioInput?t.audioInput:void 0,audioOutput:""!==t.audioOutput?t.audioOutput:void 0,videoInput:""!==t.videoInput?t.videoInput:void 0,displayResolution:""!==t.displayResolution?t.displayResolution:void 0,bundleId:""!==t.bundleId&&t.enabledBundleId?t.bundleId:void 0,clientId:""!==t.clientId&&t.enabledClientId?t.clientId:void 0,metadata:""!==t.metadata&&t.enabledMetadata?t.metadata:void 0,signalingNotifyMetadata:""!==t.signalingNotifyMetadata&&t.enabledSignalingNotifyMetadata?t.signalingNotifyMetadata:void 0,dataChannelSignaling:""!==t.dataChannelSignaling&&t.enabledDataChannel?t.dataChannelSignaling:void 0,ignoreDisconnectWebSocket:""!==t.ignoreDisconnectWebSocket&&t.enabledDataChannel?t.ignoreDisconnectWebSocket:void 0,dataChannels:""!==t.dataChannels&&t.enabledDataChannels?t.dataChannels:void 0,reconnect:!0===t.reconnect||void 0,e2ee:!0===t.e2ee||void 0,mediaProcessorsNoiseSuppression:!0===t.mediaProcessorsNoiseSuppression||void 0,micDevice:!1!==t.micDevice&&void 0,cameraDevice:!1===t.cameraDevice||void 0,audioTrack:!1===t.audioTrack||void 0,videoTrack:!1!==t.videoTrack&&void 0,signalingUrlCandidates:0<t.signalingUrlCandidates.length&&t.enabledSignalingUrlCandidates?t.signalingUrlCandidates:void 0,apiUrl:null!==t.apiUrl?t.apiUrl:void 0,fakeVolume:"fakeMedia"===t.mediaType?t.fakeVolume:void 0},a=Object.keys(r).map((function(e){var n=r[e];if(void 0!==n)return"signalingUrlCandidates"===e?"".concat(e,"=").concat(encodeURIComponent(JSON.stringify(n))):"".concat(e,"=").concat(encodeURIComponent(n))})).filter((function(e){return void 0!==e}));(0,l.f7)("".concat(location.origin).concat(location.pathname,"?").concat(a.join("&")))}};function v(e,n){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(o().mark((function e(n,t){var r,a,i,u,p,m,h,v,g,x,b,j,y,S,k,N,T,w,Z,I,O,R,M,D,P,E,A,B,U,V,H;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="MEDIA_CONSTRAINTS","getDisplayMedia"!==t.mediaType){e.next=16;break}if(t.video&&t.cameraDevice){e.next=4;break}return e.abrupt("return",[new MediaStream,null]);case 4:if(void 0!==navigator.mediaDevices){e.next=6;break}throw new Error("Failed to call getUserMedia. Make sure domain is secure");case 6:return a=(0,l.fR)({frameRate:t.frameRate,resolution:t.resolution,aspectRatio:t.aspectRatio,resizeMode:t.resizeMode}),n(d.t.actions.setLogMessages({title:r,description:JSON.stringify(a)})),n(d.t.actions.setTimelineMessage(C("media-constraints",a))),e.next=11,navigator.mediaDevices.getDisplayMedia(a);case 11:i=e.sent,n(d.t.actions.setTimelineMessage(C("succeed-get-display-media"))),u=f(i.getVideoTracks());try{for(u.s();!(p=u.n()).done;)void 0!==(m=p.value).contentHint&&(m.contentHint=t.videoContentHint),m.enabled=t.videoTrack,n(d.t.actions.setTimelineMessage(C("".concat(m.kind,"-mediastream-track-properties"),(0,l.We)(m))))}catch(o){u.e(o)}finally{u.f()}return e.abrupt("return",[i,null]);case 16:if("fakeMedia"!==t.mediaType||!t.fakeContents.worker){e.next=28;break}h=(0,l._8)({audio:t.audio&&t.micDevice,video:t.video&&t.cameraDevice,frameRate:t.frameRate,resolution:t.resolution,volume:t.fakeVolume,aspectRatio:t.aspectRatio,resizeMode:t.resizeMode}),n(d.t.actions.setLogMessages({title:r,description:JSON.stringify(h)})),n(d.t.actions.setTimelineMessage(C("media-constraints",h))),v=(0,l.gU)(h),g=v.canvas,x=v.mediaStream,b=v.gainNode,null!==g&&(t.fakeContents.worker.onmessage=function(e){var n=e.data;"update"===n.type&&(0,l.zW)(g,t.fakeContents.colorCode,h.fontSize,n.counter.toString())},t.fakeContents.worker.postMessage({type:"stop"}),t.fakeContents.worker.postMessage({type:"start",interval:1e3/h.frameRate})),j=f(x.getVideoTracks());try{for(j.s();!(y=j.n()).done;)void 0!==(S=y.value).contentHint&&(S.contentHint=t.videoContentHint),S.enabled=t.videoTrack,n(d.t.actions.setTimelineMessage(C("".concat(S.kind,"-mediastream-track-properties"),(0,l.We)(S))))}catch(o){j.e(o)}finally{j.f()}k=f(x.getAudioTracks());try{for(k.s();!(N=k.n()).done;)void 0!==(T=N.value).contentHint&&(T.contentHint=t.audioContentHint),T.enabled=t.audioTrack,n(d.t.actions.setTimelineMessage(C("".concat(T.kind,"-mediastream-track-properties"),(0,l.We)(T))))}catch(o){k.e(o)}finally{k.f()}return n(d.t.actions.setTimelineMessage(C("succeed-create-fake-media"))),e.abrupt("return",[x,b]);case 28:if(void 0!==navigator.mediaDevices){e.next=30;break}throw new Error("Failed to call getUserMedia. Make sure domain is secure");case 30:if(w=new MediaStream,!(Z=(0,l.dV)({audio:t.audio&&t.micDevice,autoGainControl:t.autoGainControl,noiseSuppression:t.noiseSuppression,echoCancellation:t.echoCancellation,echoCancellationType:t.echoCancellationType,audioInput:t.audioInput}))){e.next=48;break}return n(d.t.actions.setLogMessages({title:r,description:JSON.stringify({audio:Z})})),n(d.t.actions.setTimelineMessage(C("audio-media-constraints",{audio:Z}))),e.next=37,navigator.mediaDevices.getUserMedia({audio:Z});case 37:if(I=e.sent,O=I.getAudioTracks()[0],!t.mediaProcessorsNoiseSuppression||!s.b.isSupported()){e.next=46;break}if(null!==t.noiseSuppressionProcessor){e.next=42;break}throw new Error("Failed to start NoiseSuppressionProcessor. NoiseSuppressionProcessor is 'null'");case 42:return t.noiseSuppressionProcessor.stopProcessing(),e.next=45,t.noiseSuppressionProcessor.startProcessing(O);case 45:O=e.sent;case 46:n(d.t.actions.setTimelineMessage(C("succeed-audio-get-user-media"))),w.addTrack(O);case 48:if(!(R=(0,l.Tm)({aspectRatio:t.aspectRatio,frameRate:t.frameRate,resizeMode:t.resizeMode,resolution:t.resolution,video:t.video&&t.cameraDevice,videoInput:t.videoInput}))){e.next=66;break}return n(d.t.actions.setLogMessages({title:r,description:JSON.stringify({video:R})})),n(d.t.actions.setTimelineMessage(C("video-media-constraints",{video:R}))),e.next=54,navigator.mediaDevices.getUserMedia({video:R});case 54:if(M=e.sent,D=M.getVideoTracks()[0],""===t.blurRadius||!c.s.isSupported()){e.next=64;break}if(null!==t.virtualBackgroundProcessor){e.next=59;break}throw new Error("Failed to start VirtualBackgroundProcessor. VirtualBackgroundProcessor is 'null'");case 59:return P={blurRadius:(0,l.Yw)(t.blurRadius)},t.virtualBackgroundProcessor.stopProcessing(),e.next=63,t.virtualBackgroundProcessor.startProcessing(D,P);case 63:D=e.sent;case 64:n(d.t.actions.setTimelineMessage(C("succeed-video-get-user-media"))),w.addTrack(D);case 66:E=f(w.getVideoTracks());try{for(E.s();!(A=E.n()).done;)void 0!==(B=A.value).contentHint&&(B.contentHint=t.videoContentHint),B.enabled=t.videoTrack,n(d.t.actions.setTimelineMessage(C("".concat(B.kind,"-mediastream-track-properties"),(0,l.We)(B))))}catch(o){E.e(o)}finally{E.f()}U=f(w.getAudioTracks());try{for(U.s();!(V=U.n()).done;)void 0!==(H=V.value).contentHint&&(H.contentHint=t.audioContentHint),H.enabled=t.audioTrack,n(d.t.actions.setTimelineMessage(C("".concat(H.kind,"-mediastream-track-properties"),(0,l.We)(H))))}catch(o){U.e(o)}finally{U.f()}return e.abrupt("return",[w,null]);case 71:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,n,t){t.on("log",(function(n,t){e(d.t.actions.setLogMessages({title:n,description:JSON.stringify(t)}))})),t.on("notify",(function(n,t){"spotlight.focused"===n.event_type&&"string"===typeof n.connection_id&&e(d.t.actions.setFocusedSpotlightConnectionId(n.connection_id)),"spotlight.unfocused"===n.event_type&&"string"===typeof n.connection_id&&e(d.t.actions.setUnFocusedSpotlightConnectionId(n.connection_id)),"connection.destroyed"===n.event_type&&"string"===typeof n.connection_id&&e(d.t.actions.deleteFocusedSpotlightConnectionId(n.connection_id)),e(d.t.actions.setNotifyMessages({timestamp:(new Date).getTime(),message:n,transportType:t}))})),t.on("push",(function(n,t){e(d.t.actions.setPushMessages({timestamp:(new Date).getTime(),message:n,transportType:t}))})),t.on("track",(function(t){if(e(d.t.actions.setTimelineMessage(C("event-on-track"))),!n().soraContents.remoteMediaStreams.find((function(e){return e.id===t.streams[0].id}))){var r,a=f(t.streams[0].getTracks());try{for(a.s();!(r=a.n()).done;){var i=r.value;e(d.t.actions.setTimelineMessage(C("mediastream-track-properties",(0,l.We)(i))))}}catch(o){a.e(o)}finally{a.f()}e(d.t.actions.setRemoteMediaStream(t.streams[0]))}})),t.on("removetrack",(function(t){e(d.t.actions.setTimelineMessage(C("event-on-removetrack"))),n().soraContents.remoteMediaStreams.find((function(e){if(null!==t&&void 0!==t&&t.target)return e.id===t.target.id}))&&e(d.t.actions.removeRemoteMediaStream(t.target.id))})),t.on("disconnect",(function(t){var r={type:t.type,title:t.title};void 0!==t.code&&(r.code=t.code),void 0!==t.reason&&(r.reason=t.reason),void 0!==t.params&&(r.params=t.params),e(d.t.actions.setTimelineMessage(C("event-on-disconnect",r)));var a=n(),i=a.fakeContents,o=a.soraContents,s=a.reconnect,c=a.noiseSuppressionProcessor,u=a.virtualBackgroundProcessor,l=o.localMediaStream,f=o.remoteMediaStreams;if(u){var p=u.getOriginalTrack();null===p||void 0===p||p.stop(),u.stopProcessing()}if(c){var m=c.getOriginalTrack();null===m||void 0===m||m.stop(),c.stopProcessing()}l&&l.getTracks().forEach((function(e){e.stop()})),f.forEach((function(e){e.getTracks().forEach((function(e){e.stop()}))})),i.worker&&i.worker.postMessage({type:"stop"}),e(d.t.actions.setSora(null)),e(d.t.actions.setSoraConnectionStatus("disconnected")),e(d.t.actions.setLocalMediaStream(null)),e(d.t.actions.removeAllRemoteMediaStreams()),e(d.t.actions.setSoraInfoAlertMessage("Disconnect Sora.")),e(d.t.actions.setTimelineMessage(C("disconnected"))),"abend"===t.type&&s&&e(d.t.actions.setSoraReconnecting(!0))})),t.on("timeline",(function(n){var t={timestamp:(new Date).getTime(),type:n.type,data:n.data,dataChannelId:n.dataChannelId,dataChannelLabel:n.dataChannelLabel,logType:n.logType};e(d.t.actions.setTimelineMessage(t)),n.data&&"object"===typeof n.data&&"sdp"in n.data&&e(d.t.actions.setTimelineMessage(C("".concat(n.type,"-sdp"),n.data.sdp)))})),t.on("signaling",(function(n){var t={timestamp:(new Date).getTime(),transportType:n.transportType,type:n.type,data:n.data};e(d.t.actions.setSignalingMessage(t))})),t.on("message",(function(n){e(d.t.actions.setDataChannelMessage({timestamp:(new Date).getTime(),label:n.label,data:n.data}))})),t.on("datachannel",(function(n){e(d.t.actions.setSoraDataChannels(n.datachannel))}))}function b(e){return{audio:e.audio,audioBitRate:e.audioBitRate,audioCodecType:e.audioCodecType,bundleId:e.bundleId,clientId:e.clientId,dataChannels:e.enabledDataChannels?e.dataChannels:"",dataChannelSignaling:e.dataChannelSignaling,e2ee:e.e2ee,enabledBundleId:e.enabledBundleId,enabledClientId:e.enabledClientId,enabledDataChannel:e.enabledDataChannel,enabledSignalingNotifyMetadata:e.enabledSignalingNotifyMetadata,ignoreDisconnectWebSocket:e.ignoreDisconnectWebSocket,multistream:e.multistream,signalingNotifyMetadata:e.signalingNotifyMetadata,simulcast:e.simulcast,simulcastRid:e.simulcastRid,spotlight:e.spotlight,spotlightFocusRid:e.spotlightFocusRid,spotlightNumber:e.spotlightNumber,spotlightUnfocusRid:e.spotlightUnfocusRid,video:e.video,videoBitRate:e.videoBitRate,videoCodecType:e.videoCodecType}}function C(e,n){return{type:e,logType:"sora-devtools",timestamp:(new Date).getTime(),data:n}}function j(e,n){return y.apply(this,arguments)}function y(){return(y=(0,a.Z)(o().mark((function e(n,t){var r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pc||"closed"===(null===(r=t.pc)||void 0===r?void 0:r.iceConnectionState)){e.next=7;break}return e.next=3,t.pc.getStats();case 3:a=e.sent,i=[],a.forEach((function(e){i.push(e)})),n(d.t.actions.setStatsReport(i));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(){return function(){var e=(0,a.Z)(o().mark((function e(n,t){var i,s,c,f,p,m,h,g,y,S,k,N,T,w,Z,I;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(d.t.actions.setTimelineMessage(C("start-connection"))),n(d.t.actions.setSoraConnectionStatus("connecting")),!(i=t()).soraContents.sora){e.next=6;break}return e.next=6,i.soraContents.sora.disconnect();case 6:if(s=(0,l.EO)(i.enabledSignalingUrlCandidates,i.signalingUrlCandidates),n(d.t.actions.setLogMessages({title:"SIGNALING_URL",description:JSON.stringify(s)})),c=u.Z.connection(s,i.debug),f=b(i),p=(0,l.Kr)(f),m=(0,l.BB)(i.enabledMetadata,i.metadata),e.prev=12,"sendonly"!==i.role){e.next=28;break}return(h=c.sendonly(i.channelId,null,p)).metadata=m,"boolean"===typeof i.googCpuOveruseDetection&&(h.constraints={optional:[{googCpuOveruseDetection:i.googCpuOveruseDetection}]}),x(n,t,h),e.next=20,v(n,i).catch((function(e){throw n(d.t.actions.setSoraErrorAlertMessage(e.toString())),n(d.t.actions.setSoraConnectionStatus("disconnected")),e}));case 20:return S=e.sent,k=(0,r.Z)(S,2),g=k[0],y=k[1],e.next=26,h.connect(g);case 26:e.next=49;break;case 28:if("sendrecv"!==i.role){e.next=43;break}return(h=c.sendrecv(i.channelId,null,p)).metadata=m,"boolean"===typeof i.googCpuOveruseDetection&&(h.constraints={optional:[{googCpuOveruseDetection:i.googCpuOveruseDetection}]}),x(n,t,h),e.next=35,v(n,i).catch((function(e){throw n(d.t.actions.setSoraErrorAlertMessage(e.toString())),n(d.t.actions.setSoraConnectionStatus("disconnected")),e}));case 35:return N=e.sent,T=(0,r.Z)(N,2),g=T[0],y=T[1],e.next=41,h.connect(g);case 41:e.next=49;break;case 43:if("recvonly"!==i.role){e.next=49;break}return(h=c.recvonly(i.channelId,null,p)).metadata=m,x(n,t,h),e.next=49,h.connect();case 49:e.next=59;break;case 51:throw e.prev=51,e.t0=e.catch(12),e.t0 instanceof Error&&n(d.t.actions.setSoraErrorAlertMessage("Failed to connect Sora. ".concat(e.t0.message))),i.virtualBackgroundProcessor&&((w=i.virtualBackgroundProcessor.getOriginalTrack())&&w.stop(),i.virtualBackgroundProcessor.stopProcessing()),i.noiseSuppressionProcessor&&((Z=i.noiseSuppressionProcessor.getOriginalTrack())&&Z.stop(),i.noiseSuppressionProcessor.stopProcessing()),g&&g.getTracks().forEach((function(e){e.stop()})),n(d.t.actions.setSoraConnectionStatus("disconnected")),e.t0;case 59:if(void 0!==h){e.next=61;break}throw new Error("Failed to connect Sora. Connection object is 'undefined'");case 61:return n(d.t.actions.setSoraInfoAlertMessage("Succeeded to connect Sora.")),e.next=64,j(n,h);case 64:I=setInterval((0,a.Z)(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),!(a=r.soraContents).sora){e.next=6;break}return e.next=4,j(n,a.sora);case 4:e.next=7;break;case 6:clearInterval(I);case 7:case"end":return e.stop()}}),e)}))),1e3),h.stream=null,n(d.t.actions.setSora(h)),g&&n(d.t.actions.setLocalMediaStream(g)),y&&n(d.t.actions.setFakeContentsGainNode(y)),n(d.t.actions.setSoraConnectionStatus("connected")),n(d.t.actions.setTimelineMessage(C("connected")));case 71:case"end":return e.stop()}}),e,null,[[12,51]])})));return function(n,t){return e.apply(this,arguments)}}()},k=function(){return function(){var e=(0,a.Z)(o().mark((function e(n,t){var i,s,c,f,p,m,h,g,y,S,k,N,T,w;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(d.t.actions.setTimelineMessage(C("start-reconnect"))),n(d.t.actions.setSoraConnectionStatus("connecting")),!(i=t()).soraContents.sora){e.next=6;break}return e.next=6,i.soraContents.sora.disconnect();case 6:if(s=(0,l.EO)(i.enabledSignalingUrlCandidates,i.signalingUrlCandidates),n(d.t.actions.setLogMessages({title:"SIGNALING_URL",description:JSON.stringify(s)})),c=u.Z.connection(s,i.debug),f=b(i),p=(0,l.Kr)(f),m=(0,l.BB)(i.enabledMetadata,i.metadata),"sendonly"!==i.role&&"sendrecv"!==i.role){e.next=19;break}return e.next=15,v(n,i).catch((function(e){throw n(d.t.actions.setSoraErrorAlertMessage(e.toString())),n(d.t.actions.setSoraConnectionStatus("disconnected")),e}));case 15:S=e.sent,k=(0,r.Z)(S,2),g=k[0],y=k[1];case 19:N=o().mark((function e(r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t(),!1!==a.soraContents.reconnecting){e.next=3;break}return e.abrupt("return","break");case 3:if(n(d.t.actions.setSoraReconnectingTrials(r)),e.prev=4,"sendonly"!==i.role){e.next=15;break}if((h=c.sendonly(i.channelId,null,p)).metadata=m,"boolean"===typeof i.googCpuOveruseDetection&&(h.constraints={optional:[{googCpuOveruseDetection:i.googCpuOveruseDetection}]}),x(n,t,h),!g){e.next=13;break}return e.next=13,h.connect(g);case 13:e.next=31;break;case 15:if("sendrecv"!==i.role){e.next=25;break}if((h=c.sendrecv(i.channelId,null,p)).metadata=m,"boolean"===typeof i.googCpuOveruseDetection&&(h.constraints={optional:[{googCpuOveruseDetection:i.googCpuOveruseDetection}]}),x(n,t,h),!g){e.next=23;break}return e.next=23,h.connect(g);case 23:e.next=31;break;case 25:if("recvonly"!==i.role){e.next=31;break}return(h=c.recvonly(i.channelId,null,p)).metadata=m,x(n,t,h),e.next=31,h.connect();case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(4),e.t0 instanceof Error&&n(d.t.actions.setSoraErrorAlertMessage("(trials ".concat(r,") Failed to connect Sora. ").concat(e.t0.message))),h=void 0;case 37:if(void 0===h){e.next=39;break}return e.abrupt("return","break");case 39:return e.next=41,new Promise((function(e){return setTimeout(e,500*r+500)}));case 41:case"end":return e.stop()}}),e,null,[[4,33]])})),T=1;case 21:if(!(T<=10)){e.next=29;break}return e.delegateYield(N(T),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:T++,e.next=21;break;case 29:if(void 0!==h){e.next=34;break}return n(d.t.actions.setSoraErrorAlertMessage("Failed to reconnect Sora.")),n(d.t.actions.setSoraConnectionStatus("disconnected")),n(d.t.actions.setSoraReconnecting(!1)),e.abrupt("return");case 34:return n(d.t.actions.setSoraInfoAlertMessage("Succeeded to reconnect Sora.")),e.next=37,j(n,h);case 37:w=setInterval((0,a.Z)(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),!(a=r.soraContents).sora){e.next=6;break}return e.next=4,j(n,a.sora);case 4:e.next=7;break;case 6:clearInterval(w);case 7:case"end":return e.stop()}}),e)}))),1e3),n(d.t.actions.setSora(h)),g&&n(d.t.actions.setLocalMediaStream(g)),y&&n(d.t.actions.setFakeContentsGainNode(y)),n(d.t.actions.setSoraConnectionStatus("connected")),n(d.t.actions.setTimelineMessage(C("connected"))),n(d.t.actions.setSoraReconnecting(!1));case 44:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},N=function(){return function(){var e=(0,a.Z)(o().mark((function e(n,t){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),!(a=r.soraContents).sora){e.next=6;break}return n(d.t.actions.setSoraConnectionStatus("disconnecting")),e.next=5,a.sora.disconnect();case 5:n(d.t.actions.setSoraConnectionStatus("disconnected"));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},T=function(){return function(){var e=(0,a.Z)(o().mark((function e(n,t){var r,a,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.PW)();case 2:r=e.sent,a=[],i=[],s=[],r.forEach((function(e){""!==e.deviceId&&("audioinput"===e.kind?a.push(e.toJSON()):"audiooutput"===e.kind?s.push(e.toJSON()):"videoinput"===e.kind&&i.push(e.toJSON()))})),n(d.t.actions.setAudioInputDevices(a)),n(d.t.actions.setVideoInputDevices(i)),n(d.t.actions.setAudioOutputDevices(s));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},w=function(){return function(){var e=(0,a.Z)(o().mark((function e(n,t){var a,i,s,c,u,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t()).soraContents.sora){e.next=3;break}return e.abrupt("return");case 3:return a.virtualBackgroundProcessor&&(null===(i=a.virtualBackgroundProcessor.getOriginalTrack())||void 0===i||i.stop(),a.virtualBackgroundProcessor.stopProcessing()),a.noiseSuppressionProcessor&&(null===(s=a.noiseSuppressionProcessor.getOriginalTrack())||void 0===s||s.stop(),a.noiseSuppressionProcessor.stopProcessing()),e.next=7,v(n,a).catch((function(e){throw n(d.t.actions.setSoraErrorAlertMessage(e.toString())),n(d.t.actions.setSoraConnectionStatus("disconnected")),e}));case 7:c=e.sent,u=(0,r.Z)(c,2),l=u[0],f=u[1],l.getTracks().forEach((function(e){if(a.soraContents.sora&&a.soraContents.sora.pc){var n=a.soraContents.sora.pc.getSenders().find((function(n){return!!n.track&&n.track.kind===e.kind}));n&&n.replaceTrack(e)}})),a.soraContents.localMediaStream&&a.soraContents.localMediaStream.getTracks().forEach((function(e){e.stop()})),n(d.t.actions.setLocalMediaStream(l)),n(d.t.actions.setFakeContentsGainNode(f));case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},Z=function(e){return function(){var n=(0,a.Z)(o().mark((function n(t,r){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=14;break}a="Faild to execute WebAssembly '".concat("https://sora-e2ee-wasm.shiguredo.jp/2020.2/wasm.wasm","'."),n.next=5;break;case 5:return n.prev=5,n.next=8,u.Z.initE2EE("https://sora-e2ee-wasm.shiguredo.jp/2020.2/wasm.wasm");case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(5),t(d.t.actions.setSoraErrorAlertMessage(a)),n.abrupt("return");case 14:t(d.t.actions.setE2EE(e));case 15:case"end":return n.stop()}}),n,null,[[5,10]])})));return function(e,t){return n.apply(this,arguments)}}()},I=function(e){return function(){var n=(0,a.Z)(o().mark((function n(t,a){var i,s,c,u,l,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=a()).soraContents.localMediaStream&&i.soraContents.sora){n.next=4;break}return t(d.t.actions.setMicDevice(e)),n.abrupt("return");case 4:if(!e){n.next=18;break}return s={aspectRatio:i.aspectRatio,audio:i.audio,audioContentHint:i.audioContentHint,audioInput:i.audioInput,audioTrack:i.audioTrack,autoGainControl:i.autoGainControl,blurRadius:i.blurRadius,cameraDevice:i.cameraDevice,echoCancellation:i.echoCancellation,echoCancellationType:i.echoCancellationType,fakeContents:i.fakeContents,fakeVolume:i.fakeVolume,frameRate:i.frameRate,mediaProcessorsNoiseSuppression:i.mediaProcessorsNoiseSuppression,mediaType:i.mediaType,micDevice:e,noiseSuppression:i.noiseSuppression,noiseSuppressionProcessor:i.noiseSuppressionProcessor,resizeMode:i.resizeMode,resolution:i.resolution,video:!1,videoContentHint:i.videoContentHint,videoInput:i.videoInput,videoTrack:i.videoTrack,virtualBackgroundProcessor:i.virtualBackgroundProcessor},n.next=8,v(t,s).catch((function(e){throw t(d.t.actions.setSoraErrorAlertMessage(e.toString())),e}));case 8:if(c=n.sent,u=(0,r.Z)(c,2),l=u[0],f=u[1],!(0<l.getAudioTracks().length)){n.next=16;break}return n.next=15,i.soraContents.sora.replaceAudioTrack(i.soraContents.localMediaStream,l.getAudioTracks()[0]);case 15:t(d.t.actions.setFakeContentsGainNode(f));case 16:n.next=19;break;case 18:i.soraContents.sora.stopAudioTrack(i.soraContents.localMediaStream);case 19:t(d.t.actions.setMicDevice(e));case 20:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},O=function(e){return function(){var n=(0,a.Z)(o().mark((function n(t,a){var i,s,c,u,l,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=a()).soraContents.localMediaStream&&i.soraContents.sora){n.next=4;break}return t(d.t.actions.setCameraDevice(e)),n.abrupt("return");case 4:if(!e){n.next=15;break}return s={aspectRatio:i.aspectRatio,audio:!1,audioContentHint:i.audioContentHint,audioInput:i.audioInput,audioTrack:i.audioTrack,autoGainControl:i.autoGainControl,blurRadius:i.blurRadius,cameraDevice:e,echoCancellation:i.echoCancellation,echoCancellationType:i.echoCancellationType,fakeContents:i.fakeContents,fakeVolume:i.fakeVolume,frameRate:i.frameRate,mediaProcessorsNoiseSuppression:i.mediaProcessorsNoiseSuppression,mediaType:i.mediaType,micDevice:i.micDevice,noiseSuppression:i.noiseSuppression,noiseSuppressionProcessor:i.noiseSuppressionProcessor,resizeMode:i.resizeMode,resolution:i.resolution,video:i.video,videoContentHint:i.videoContentHint,videoInput:i.videoInput,videoTrack:i.videoTrack,virtualBackgroundProcessor:i.virtualBackgroundProcessor},n.next=8,v(t,s).catch((function(e){throw t(d.t.actions.setSoraErrorAlertMessage(e.toString())),e}));case 8:c=n.sent,u=(0,r.Z)(c,2),l=u[0],f=u[1],0<l.getVideoTracks().length&&(i.soraContents.sora.replaceVideoTrack(i.soraContents.localMediaStream,l.getVideoTracks()[0]),t(d.t.actions.setFakeContentsGainNode(f))),n.next=16;break;case 15:i.soraContents.sora.stopVideoTrack(i.soraContents.localMediaStream);case 16:t(d.t.actions.setCameraDevice(e));case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},R=d.t.actions,M=R.clearDataChannelMessages,D=R.deleteAlertMessage,P=R.setAPIErrorAlertMessage,E=R.setAPIInfoAlertMessage,A=R.setAspectRatio,B=R.setAudio,U=R.setAudioBitRate,V=R.setAudioCodecType,H=R.setAudioContentHint,F=R.setAudioInput,_=R.setAudioOutput,J=R.setAudioTrack,z=R.setAutoGainControl,G=R.setBlurRadius,L=R.setBundleId,W=R.setChannelId,$=R.setClientId,K=R.setDataChannels,q=R.setDataChannelSignaling,X=R.setDebug,Y=R.setDebugFilterText,Q=R.setDebugType,ee=R.setDisplayResolution,ne=R.setEchoCancellation,te=R.setEchoCancellationType,re=R.setEnabledBundleId,ae=R.setEnabledClientId,ie=R.setEnabledDataChannels,oe=R.setEnabledDataChannel,se=R.setEnabledMetadata,ce=R.setEnabledSignalingNotifyMetadata,ue=R.setEnabledSignalingUrlCandidates,le=R.setFakeVolume,de=R.setFrameRate,fe=R.setIgnoreDisconnectWebSocket,pe=(R.setLocalMediaStream,R.setLogMessages,R.setMediaProcessorsNoiseSuppression),me=R.setMediaType,he=R.setMetadata,ve=R.setMultistream,ge=R.setNoiseSuppression,xe=(R.setNotifyMessages,R.setReconnect),be=R.setResizeMode,Ce=R.setResolution,je=R.setSignalingNotifyMetadata,ye=R.setSignalingUrlCandidates,Se=R.setSimulcast,ke=R.setSimulcastRid,Ne=(R.setSora,R.setSoraReconnecting),Te=(R.setSoraErrorAlertMessage,R.setSoraInfoAlertMessage,R.setSpotlight),we=R.setSpotlightFocusRid,Ze=R.setSpotlightNumber,Ie=R.setSpotlightUnfocusRid,Oe=R.setVideo,Re=R.setVideoBitRate,Me=R.setVideoCodecType,De=R.setVideoContentHint,Pe=R.setVideoInput,Ee=R.setVideoTrack},873:function(e,n,t){t.d(n,{C:function(){return i},T:function(){return a}});var r=t(9473),a=function(){return(0,r.I0)()},i=r.v9},3359:function(e,n,t){t.d(n,{K:function(){return a}});t(7294);var r=t(5893),a=function(){return(0,r.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-clipboard",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})}},2846:function(e,n,t){t.d(n,{v:function(){return he}});var r=t(7294),a=t(5509),i=t(3192),o=t(7821),s=t(873),c=t(9499),u=t(6518),l=t(7174),d=t(3359),f=t(5893),p=function(e){return e.disabled?(0,f.jsx)("div",{style:{height:"31px"}}):(0,f.jsx)("button",{className:"btn btn-sm btn-dark",onClick:function(n){(0,l.f7)(e.text),n.currentTarget.blur()},children:(0,f.jsx)(d.K,{})})},m=function(e){var n=e.description;return void 0===n?null:"object"!==typeof n?(0,f.jsx)("div",{className:"debug-message",children:(0,f.jsx)("div",{className:"col-sm-12",children:(0,f.jsx)("pre",{className:e.wordBreak?"word-break":"",children:n})})}):(0,f.jsx)("div",{className:"debug-message",children:(0,f.jsx)("div",{className:"col-sm-12",children:(0,f.jsx)("pre",{className:e.wordBreak?"word-break":"",children:JSON.stringify(n,null,2)})})})},h=function(e){var n=e.defaultShow,t=e.description,a=e.title,i=e.timestamp,o=e.label,s=(0,r.useState)(void 0!==n&&n),c=s[0],d=s[1],h=i?a+i:a,v=void 0===t;return(0,f.jsxs)("div",{className:"border border-light rounded mb-1 bg-dark","data-title":a,children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center text-break",children:[(0,f.jsxs)("a",{className:"debug-title ".concat(v?"disabled":""),onClick:function(){return d(!c)},"aria-controls":h,"aria-expanded":c,children:[(0,f.jsx)("i",{className:"".concat(c?"arrow-bottom":"arrow-right"," ").concat(v?"disabled":"")})," ",i?(0,f.jsxs)("span",{className:"text-white-50 me-1",children:["[",(0,l.o5)(i),"]"]}):null,o,(0,f.jsx)("span",{children:a})]}),(0,f.jsx)("div",{className:"border-left",children:(0,f.jsx)(p,{text:"string"===typeof t?t:JSON.stringify(t,null,2),disabled:v})})]}),(0,f.jsx)(u.Z,{in:c,children:(0,f.jsx)("div",{className:"border-top",children:(0,f.jsx)(m,{description:t,wordBreak:e.wordBreak})})})]})};function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=function(){var e=(0,s.T)();return(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"clear",defaultValue:"clear",onClick:function(){e((0,o.eO)())}})},b=function(e){var n=e.data,t=e.label,r=e.timestamp;if("ZAKURO"===(new TextDecoder).decode(n.slice(0,6))){var a=(new TextDecoder).decode(n.slice(22,48)),i=new DataView(n),o=i.getBigInt64(6),s=i.getBigInt64(14),c=n.byteLength,u="connectionId: ".concat(a,"\nUnixTimeMicro: ").concat(o,"\nCounter: ").concat(s,"\nByteLength: ").concat(c);return(0,f.jsx)(h,{title:t+" ZAKURO",timestamp:r,description:u,defaultShow:!0,wordBreak:!0})}var l=new Uint8Array(n).toString()+"\n(".concat((new TextDecoder).decode(n),")");return(0,f.jsx)(h,{title:t,timestamp:r,description:l,defaultShow:!0,wordBreak:!0})},C=r.memo((function(e){return(0,f.jsx)(b,g({},e))})),j=function(){var e=(0,s.C)((function(e){return e.dataChannelMessages}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"py-1",children:(0,f.jsx)(x,{})}),(0,f.jsx)("div",{className:"debug-messages",children:e.map((function(e){var n=e.label+e.timestamp;return(0,f.jsx)(C,g({},e),n)}))})]})},y=t(6986),S=t(1341),k=t(4716),N=function(){var e=(0,s.C)((function(e){return e.debugFilterText})),n=(0,s.T)();return(0,f.jsxs)(y.Z,{className:"form-inline debug-filter",controlId:"channelId",children:[(0,f.jsx)(S.Z,{className:"text-white",children:"Filter:"}),(0,f.jsx)(k.Z,{type:"text",placeholder:"Filter",value:e,onChange:function(e){n((0,o.eU)(e.target.value))},autoComplete:"off"})]})};function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Z=function(e){var n=e.message,t=e.timestamp;return(0,f.jsx)(h,{title:n.title,timestamp:t,description:JSON.parse(n.description)})},I=r.memo((function(e){return(0,f.jsx)(Z,w({},e))})),O=function(){var e=(0,s.C)((function(e){return e.logMessages})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e,n){return(0,f.jsx)(I,w({},e),e.message.title+String(n)+e.timestamp)}))})};function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var M={websocket:"#00ff00",datachannel:"#ff00ff"},D=function(e){var n=e.text,t=Object.keys(M).includes(n)?M[n]:void 0;return(0,f.jsxs)("span",{className:"me-1",style:t?{color:t}:{},children:["[",n,"]"]})},P=function(e){var n=e.notify,t=n.transportType?(0,f.jsx)(D,{text:n.transportType}):null;return(0,f.jsx)(h,{title:n.message.event_type,timestamp:n.timestamp,description:n.message,label:t})},E=r.memo((function(e){return(0,f.jsx)(P,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))})),A=function(){var e=(0,s.C)((function(e){return e.notifyMessages})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e){return(0,f.jsx)(E,{notify:e},e.message.type+e.timestamp)}))})};function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var U={websocket:"#00ff00",datachannel:"#ff00ff"},V=function(e){var n=e.text,t=Object.keys(U).includes(n)?U[n]:void 0;return(0,f.jsxs)("span",{style:t?{color:t}:{},children:["[",n,"]"]})},H=function(e){var n=e.push,t=n.transportType?(0,f.jsx)(V,{text:n.transportType}):null;return(0,f.jsx)(h,{title:n.message.type,timestamp:n.timestamp,description:n.message,label:t})},F=r.memo((function(e){return(0,f.jsx)(H,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))})),_=function(){var e=(0,s.C)((function(e){return e.pushMessages})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e,n){var t="".concat(e.timestamp,"-").concat(n);return(0,f.jsx)(F,{ariaControls:t,push:e},t)}))})},J=t(469),z=t(5005),G=function(){var e=(0,r.useRef)(null),n=(0,r.useRef)(null),t=(0,s.C)((function(e){return e.soraContents.sora})),a=(0,s.C)((function(e){return e.soraContents.datachannels}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"d-flex mt-2",children:[(0,f.jsx)(y.Z,{className:"me-1",controlId:"sendDataChannelMessageLabel",children:(0,f.jsx)(J.Z,{name:"sendDataChannelMessageLabel",ref:e,children:a.map((function(e){return(0,f.jsx)("option",{value:e.label,children:e.label},e.label)}))})}),(0,f.jsx)(y.Z,{className:"flex-grow-1 me-1",controlId:"sendDataChannelMessage",children:(0,f.jsx)(k.Z,{className:"flex-fill",placeholder:"sendDataChannelMessage\u3092\u6307\u5b9a",type:"text",ref:n})}),(0,f.jsx)(z.Z,{variant:"secondary",onClick:function(){if(null!==e.current&&null!==n.current){var r=e.current.value;t&&t.sendMessage(r,(new TextEncoder).encode(n.current.value))}},disabled:0===a.length,children:"send"})]}),0<a.length?(0,f.jsx)("pre",{className:"form-control mt-2",style:{color:"#fff",backgroundColor:"#222222",maxHeight:"250px",minHeight:"250px"},children:JSON.stringify(a,null,2)}):null]})};function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $={websocket:"#00ff00",datachannel:"#ff00ff"},K=function(e){var n=e.text,t=Object.keys($).includes(n)?$[n]:void 0;return(0,f.jsxs)("span",{className:"me-1",style:t?{color:t}:{},children:["[",n,"]"]})},q=function(e){var n=e.data,t=e.type,r=e.timestamp,a=e.transportType,i=a?(0,f.jsx)(K,{text:a}):null;return(0,f.jsx)(h,{title:t,timestamp:r,description:n,label:i})},X=r.memo((function(e){return(0,f.jsx)(q,W({},e))})),Y=function(){var e=(0,s.C)((function(e){return e.signalingMessages})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e){var n=e.type+e.timestamp;return(0,f.jsx)(X,W({},e),n)}))})};function Q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ne=function(e){return(0,f.jsx)(h,{title:"".concat(e.id,"(").concat(e.type,")"),timestamp:null,description:e})},te=r.memo((function(e){return(0,f.jsx)(ne,ee({},e))})),re=function(){var e=(0,s.C)((function(e){return e.soraContents.statsReport})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e){return(0,f.jsx)(te,ee({},e),e.id)}))})};function ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var oe={signaling:"#ff00ff",notify:"#ffff00",push:"#98fb98",e2ee:"#00ffff",stats:"#ffc0cb"},se=function(){return(0,f.jsx)("span",{className:"me-1",style:{color:"#00ff00"},children:"[websocket]"})},ce=function(){return(0,f.jsx)("span",{className:"me-1",style:{color:"#ff8c00"},children:"[peerconnection]"})},ue=function(){return(0,f.jsx)("span",{className:"me-1",style:{color:"#bce2e8"},children:"[sora]"})},le=function(){return(0,f.jsx)("span",{className:"me-1",style:{color:"#73b8e2"},children:"[sora-devtools]"})},de=function(e){var n=e.label,t=e.id,r=n&&Object.keys(oe).includes(n)?oe[n]:void 0;return(0,f.jsxs)("span",{className:"me-1",style:r?{color:r}:{},children:["[datachannel]",n?"[".concat(n,"]"):"","number"===typeof t?"[".concat(t,"]"):""]})},fe=function(e){var n,t=e.timestamp,r=e.logType,a=e.dataChannelId,i=e.dataChannelLabel,o=e.type,s=e.data,c="".concat(o);return"websocket"===r?n=(0,f.jsx)(se,{}):"datachannel"===r?n=(0,f.jsx)(de,{id:a,label:i}):"peerconnection"===r?n=(0,f.jsx)(ce,{}):"sora"===r?n=(0,f.jsx)(ue,{}):"sora-devtools"===r&&(n=(0,f.jsx)(le,{})),(0,f.jsx)(h,{title:c,timestamp:t,description:s,label:n})},pe=r.memo((function(e){return(0,f.jsx)(fe,ie({},e))})),me=function(){var e=(0,s.C)((function(e){return e.timelineMessages})),n=(0,s.C)((function(e){return e.debugFilterText})),t=e.filter((function(e){return n.split(" ").every((function(n){return""===n||0<=JSON.stringify(e).indexOf(n)}))}));return(0,f.jsx)("div",{className:"debug-messages",children:t.map((function(e){var n="".concat(e.timestamp,"-").concat(e.type);return e.dataChannelLabel&&(n+="-".concat(e.dataChannelLabel)),(0,f.jsx)(pe,ie({},e),n)}))})},he=function(){var e=(0,s.C)((function(e){return e.debug})),n=(0,s.C)((function(e){return e.debugType})),t=(0,s.T)();if(!e)return null;return(0,f.jsx)("div",{className:"col-debug col-6",children:(0,f.jsxs)(a.Z,{id:"debug-tab",activeKey:n,defaultActiveKey:"timeline",onSelect:function(e){"log"!==e&&"notify"!==e&&"push"!==e&&"stats"!==e&&"timeline"!==e&&"signaling"!==e&&"messaging"!==e||t((0,o.pD)(e))},children:[(0,f.jsxs)(i.Z,{eventKey:"timeline",title:"Timeline",children:[(0,f.jsx)(N,{}),(0,f.jsx)(me,{})]}),(0,f.jsxs)(i.Z,{eventKey:"signaling",title:"Signaling",children:[(0,f.jsx)(N,{}),(0,f.jsx)(Y,{})]}),(0,f.jsxs)(i.Z,{eventKey:"notify",title:"Notfiy",children:[(0,f.jsx)(N,{}),(0,f.jsx)(A,{})]}),(0,f.jsxs)(i.Z,{eventKey:"push",title:"Push",children:[(0,f.jsx)(N,{}),(0,f.jsx)(_,{})]}),(0,f.jsxs)(i.Z,{eventKey:"stats",title:"Stats",children:[(0,f.jsx)(N,{}),(0,f.jsx)(re,{})]}),(0,f.jsxs)(i.Z,{eventKey:"log",title:"Log",children:[(0,f.jsx)(N,{}),(0,f.jsx)(O,{})]}),(0,f.jsxs)(i.Z,{eventKey:"messaging",title:"Messaging",children:[(0,f.jsx)(G,{}),(0,f.jsx)(j,{})]})]})})}},7565:function(e,n,t){t.d(n,{h2:function(){return Zn}});var r=t(7294),a=t(1608),i=t(1555),o=t(6518),s=t(873),c=t(9499),u=t(8331),l=t(7821),d=t(7174),f=t(5893);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var m=function(){var e=(0,s.T)(),n=(0,s.C)((function(e){return e.soraContents.reconnectingTrials}));return(0,r.useEffect)((function(){e((0,l.eX)())}),[]),(0,f.jsxs)(u.Z,{delay:2e4,onClose:function(){e((0,l.XH)(!1))},children:[(0,f.jsx)(u.Z.Header,{className:"bg-warning text-white",children:(0,f.jsx)("strong",{className:"me-auto",children:"Reconnect"})}),(0,f.jsx)(u.Z.Body,{className:"bg-light",children:(0,f.jsxs)("p",{className:"text-break font-weight-bold mb-0",children:["Reconnecting... (trials ",n,")"]})})]})},h=function(e){var n=(0,s.T)(),t="error"===e.type?"bg-danger":"bg-info";return(0,f.jsxs)(u.Z,{autohide:!0,delay:2e4,onClose:function(){n((0,l.b_)(e.timestamp))},children:[(0,f.jsxs)(u.Z.Header,{className:"".concat(t," text-white"),children:[(0,f.jsx)("strong",{className:"me-auto",children:e.title}),(0,f.jsx)("span",{children:(0,d.o5)(e.timestamp)})]}),(0,f.jsx)(u.Z.Body,{className:"bg-light",children:(0,f.jsx)("p",{className:"text-break font-weight-bold mb-0",children:e.message})})]})},v=function(){var e=(0,s.C)((function(e){return e.alertMessages})),n=(0,s.C)((function(e){return e.soraContents.reconnecting}));return(0,f.jsxs)("div",{className:"alert-messages",children:[n?(0,f.jsx)(m,{}):null,e.map((function(e){return(0,f.jsx)(h,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e),e.timestamp)}))]})},g=t(3359),x=function(e){return(0,f.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,f.jsx)("p",{id:e.id,className:"mx-2 p-1",children:e.text}),(0,f.jsx)("div",{className:"border-left border-secondary",children:(0,f.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(n){(0,d.f7)(e.text),n.currentTarget.blur()},children:(0,f.jsx)(g.K,{})})})]})},b=function(e){var n=e.localVideo,t=e.connectionId,r=e.clientId;return(0,f.jsxs)(f.Fragment,{children:[t?(0,f.jsx)(x,{id:n?"local-video-connection-id":void 0,text:t}):null,null!==r&&void 0!==r&&t!==r?(0,f.jsx)(x,{id:n?"local-video-client-id":void 0,text:r}):null]})},C=t(29),j=t(7794),y=t.n(j);function S(e,n,t,r){return k.apply(this,arguments)}function k(){return(k=(0,C.Z)(y().mark((function e(n,t,r,a){var i,o,s,c,u,l,d,f;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.location.protocol,o="https:"==i?"443":"3000",s="https:"==i?"api":"",c="".concat(i,"//").concat(window.location.hostname,":").concat(o,"/").concat(s),null!==n&&(c=n),u="Sora_".concat(t,".").concat(r),e.next=8,fetch(c,{method:"POST",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":u},mode:"cors"});case 8:return l=e.sent,e.next=11,l.json();case 11:if(d=e.sent,l.ok){e.next=17;break}throw f="POST ".concat(c," ").concat(l.status," (").concat(l.statusText,") target:").concat(u),d.error_type&&(f+=" error_type: ".concat(d.error_type)),new Error(f);case 17:return e.abrupt("return",d);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,n){return S(e,"20161101","StartRecording",{channel_id:n,expire_time:3600})}function T(e,n){return S(e,"20161101","StopRecording",{channel_id:n})}function w(e,n,t,r,a){var i={channel_id:n,recv_connection_id:t,rid:r};return a&&(i.send_connection_id=a),S(e,"20201005","RequestRtpStream",i)}function Z(e,n,t,r){var a={channel_id:n,recv_connection_id:t};return r&&(a.send_connection_id=r),S(e,"20201005","ResetRtpStream",a)}function I(e,n,t,r,a,i){var o={channel_id:n,recv_connection_id:t,spotlight_focus_rid:r,spotlight_unfocus_rid:a};return i&&(o.send_connection_id=i),S(e,"20211215","RequestSpotlightRid",o)}function O(e,n,t,r){var a={channel_id:n,recv_connection_id:t};return r&&(a.send_connection_id=r),S(e,"20211215","ResetSpotlightRid",a)}var R=function(e){var n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.C)((function(e){return e.channelId})),a=(0,s.T)(),i=function(){var i=(0,C.Z)(y().mark((function i(){var o;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,w(t,r,n.connectionId,e.rid);case 5:o=i.sent,a((0,l.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,l.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"mx-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:i})})},M=t(6986),D=t(469),P=t(7169),E=function(){var e=(0,r.useRef)(null),n=(0,r.useRef)(null),t=(0,s.C)((function(e){return e.soraContents.sora})),a=(0,s.C)((function(e){return e.channelId})),i=(0,s.C)((function(e){return e.apiUrl})),o=(0,s.T)();if(null===t||void 0===t||!t.connectionId)return null;var c=function(){var r=(0,C.Z)(y().mark((function r(){var s,c,u;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t&&void 0!==t&&t.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==e.current&&null!==n.current){r.next=4;break}return r.abrupt("return");case 4:return s=e.current.value,c=n.current.value,r.prev=6,r.next=9,I(i,a,t.connectionId,s,c);case 9:u=r.sent,o((0,l.du)("POST successed. response: ".concat(JSON.stringify(u)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&o((0,l.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"mx-1",children:(0,f.jsxs)(M.Z,{className:"form-inline",children:[(0,f.jsx)(D.Z,{ref:e,children:P.I7.map((function(e){return""===e?null:(0,f.jsxs)("option",{value:e,children:["SpotlightFocusRid: ",e]},e)}))}),(0,f.jsx)(D.Z,{ref:n,children:P.I7.map((function(e){return""===e?null:(0,f.jsxs)("option",{value:e,children:["SpotlightUnfocusRid: ",e,"\xa0\xa0\xa0"]},e)}))}),(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:c})]})})},A=function(){var e=(0,s.C)((function(e){return e.soraContents.sora})),n=(0,s.C)((function(e){return e.channelId})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.T)(),a=function(){var a=(0,C.Z)(y().mark((function a(){var i;return y().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,Z(t,n,e.connectionId);case 5:i=a.sent,r((0,l.du)("POST successed. response: ".concat(JSON.stringify(i)))),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),a.t0 instanceof Error&&r((0,l.i8)(a.t0.message));case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(){return a.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"mx-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:a})})},B=function(){var e=(0,s.C)((function(e){return e.soraContents.sora})),n=(0,s.C)((function(e){return e.channelId})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.T)(),a=function(){var a=(0,C.Z)(y().mark((function a(){var i;return y().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,O(t,n,e.connectionId);case 5:i=a.sent,r((0,l.du)("POST successed. response: ".concat(JSON.stringify(i)))),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),a.t0 instanceof Error&&r((0,l.i8)(a.t0.message));case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(){return a.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"mx-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:a})})};function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var V=function(e){var n,t=e.displayResolution,a=e.stream,i=e.mute,o=e.audioOutput,s=e.setHeight,c=(0,r.useRef)(null),u=(0,d.fl)(t);return(0,r.useEffect)((function(){var e=new ResizeObserver((function(e){e.forEach((function(e){s(e.contentRect.height)}))}));return c.current&&(o&&a&&a.getAudioTracks().length>0&&c.current.setSinkId(o),e.observe(c.current)),function(){e.disconnect()}}),[]),(0,r.useEffect)((function(){c.current&&i&&(c.current.muted=!0)}),[i]),(0,r.useEffect)((function(){var e;c.current&&a?(a.getVideoTracks().forEach((function(n){e=n.enabled,n.enabled=!1})),c.current.onloadedmetadata=function(n){a.getVideoTracks().forEach((function(n){void 0!==e&&(n.enabled=e)}))},c.current.srcObject=a,o&&a.getAudioTracks().length>0&&c.current.setSinkId(o)):c.current&&null===a&&(c.current.srcObject=null)}),[a]),o&&null!==(n=c.current)&&void 0!==n&&n.setSinkId&&a&&a.getAudioTracks().length>0&&c.current.setSinkId(o),(0,f.jsx)("video",{id:e.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:i,ref:c,width:0<u.width?u.width:void 0,height:0<u.height?u.height:void 0})},H=r.memo((function(e){return(0,f.jsx)(V,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e))}));function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var J=2.5,z=10,G="#CCCCCC";function L(e,n,t){e.beginPath(),e.fillStyle=n,e.fillRect(0,t,25,z),e.closePath()}function W(e,n){var t=Math.ceil(n/12.5),r=n-z;L(e,G,r);for(var a=0;a<t;a++)L(e,G,r=r-z-J)}var $=function(e){var n=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(0!==e.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(e.stream),a=t.createAnalyser();a.fftSize=2048;var i=a.frequencyBinCount,o=new Uint8Array(i);r.connect(a);var s=null;return function e(){s=requestAnimationFrame(e),a.getByteTimeDomainData(o);var t=Array.from(o),r=Math.max.apply(null,t)-128,i=n.current;if(null!==i){var c=i.getContext("2d");null!==c&&(c.clearRect(0,0,25,i.height),c.save(),W(c,i.height),function(e,n,t){for(var r=n*t,a=Math.ceil(r/12.5),i=0;i<a;i++)L(e,"#000000",n-z*(i+1)-J*i)}(c,i.height,r/128),c.restore())}}(),function(){t&&t.close(),s&&cancelAnimationFrame(s)}}}),[e.stream]),(0,f.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},K=function(e){var n=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=n.current;if(null!==e){var t=e.getContext("2d");null!==t&&(t.clearRect(0,0,25,e.height),t.save(),W(t,e.height),t.restore())}}),[]),(0,f.jsx)("canvas",{width:25,height:e.height,className:"volume-visualizer",ref:n})},q=r.memo((function(e){return e.micDevice&&0<e.stream.getAudioTracks().length?(0,f.jsx)($,_({},e)):(0,f.jsx)(K,_({},e))})),X=function(){var e=(0,r.useState)(0),n=e[0],t=e[1],a=(0,s.C)((function(e){return e.audio})),i=(0,s.C)((function(e){return e.video})),o=(0,s.C)((function(e){return e.audioOutput})),c=(0,s.C)((function(e){return e.displayResolution})),u=(0,s.C)((function(e){return e.focusedSpotlightConnectionIds})),l=(0,s.C)((function(e){return e.soraContents.connectionId})),d=(0,s.C)((function(e){return e.soraContents.localMediaStream})),p=(0,s.C)((function(e){return e.micDevice})),m=l&&u[l];return!1===a&&!1===i?null:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"d-flex",children:(0,f.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(m?" spotlight-focused":""),children:[(0,f.jsx)(H,{stream:d,setHeight:t,audioOutput:o,displayResolution:c,localVideo:!0,mute:!0}),null!==d?(0,f.jsx)(q,{micDevice:p,stream:d,height:n}):null]})})})},Y=function(){var e=(0,s.C)((function(e){return e.soraContents.connectionId})),n=(0,s.C)((function(e){return e.soraContents.clientId})),t=(0,s.C)((function(e){return e.simulcast})),r=(0,s.C)((function(e){return e.spotlight})),a=(0,s.C)((function(e){return e.role}));return(0,f.jsx)("div",{className:"row my-1",children:(0,f.jsxs)("div",{className:"col-auto",children:[(0,f.jsxs)("div",{className:"video-status mb-1",children:[null!==e||null!==n?(0,f.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,f.jsx)(b,{connectionId:e,clientId:n,localVideo:!0})}):null,null!==e&&!r&&t&&"sendonly"!==a?(0,f.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,f.jsx)(R,{rid:"r0"}),(0,f.jsx)(R,{rid:"r1"}),(0,f.jsx)(R,{rid:"r2"}),(0,f.jsx)(A,{})]}):null,null!==e&&r?(0,f.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,f.jsx)(E,{}),(0,f.jsx)(B,{})]}):null]}),"recvonly"!==a?(0,f.jsx)(X,{}):null]})})},Q=t(2640);function ee(e,n,t){if(null!==n){var r=[];return"video"===t?r=n.getVideoTracks().map((function(e){return e.id})):"audio"===t&&(r=n.getAudioTracks().map((function(e){return e.id}))),e.find((function(e){if(e.id&&!e.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in e){var n=e;return n.trackIdentifier&&r.includes(n.trackIdentifier)}return!1}))}}var ne=function(e){var n=(0,s.C)((function(e){return e.soraContents.statsReport})),t=(0,s.C)((function(e){return e.soraContents.prevStatsReport})),r=ee(n,e.stream,e.type),a=ee(t,e.stream,e.type);if(!r)return null;var i=r.jitterBufferDelay,o=r.jitterBufferEmittedCount;a&&(i=r.jitterBufferDelay-a.jitterBufferDelay,o=r.jitterBufferEmittedCount-a.jitterBufferEmittedCount);var c=Math.floor(i/o*1e3),u="normal-jitter-buffer";return 500<c?u="critical-jitter-buffer":300<c?u="danger-jitter-buffer":100<c&&(u="warning-jitter-buffer"),(0,f.jsx)("div",{className:"btn btn-sm mx-1 ".concat(u),children:(0,f.jsxs)("span",{children:[e.type,": ",c]})})},te=function(e){var n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.C)((function(e){return e.channelId})),a=(0,s.T)(),i=function(){var i=(0,C.Z)(y().mark((function i(){var o;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,w(t,r,n.connectionId,e.rid,e.sendConnectionId);case 5:o=i.sent,a((0,l.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,l.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,f.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(e.rid.charAt(0).toUpperCase()+e.rid.slice(1)),defaultValue:"".concat(e.rid," rid"),onClick:i})},re=function(e){var n=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,s.C)((function(e){return e.soraContents.sora})),i=(0,s.C)((function(e){return e.channelId})),o=(0,s.C)((function(e){return e.apiUrl})),c=(0,s.T)();if(null===a||void 0===a||!a.connectionId)return null;var u=function(){var r=(0,C.Z)(y().mark((function r(){var s,u,d;return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==a&&void 0!==a&&a.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==n.current&&null!==t.current){r.next=4;break}return r.abrupt("return");case 4:return s=n.current.value,u=t.current.value,r.prev=6,r.next=9,I(o,i,a.connectionId,s,u,e.sendConnectionId);case 9:d=r.sent,c((0,l.du)("POST successed. response: ".concat(JSON.stringify(d)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&c((0,l.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"mx-1",children:(0,f.jsxs)(M.Z,{className:"form-inline",children:[(0,f.jsx)(D.Z,{ref:n,children:P.I7.map((function(e){return""===e?null:(0,f.jsxs)("option",{value:e,children:["SpotlightFocusRid: ",e]},e)}))}),(0,f.jsx)(D.Z,{ref:t,children:P.I7.map((function(e){return""===e?null:(0,f.jsxs)("option",{value:e,children:["SpotlightUnfocusRid: ",e,"\xa0\xa0\xa0"]},e)}))}),(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:u})]})})},ae=function(e){var n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.channelId})),r=(0,s.C)((function(e){return e.apiUrl})),a=(0,s.T)(),i=function(){var i=(0,C.Z)(y().mark((function i(){var o;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,Z(r,t,n.connectionId,e.sendConnectionId);case 5:o=i.sent,a((0,l.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,l.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,f.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:i})},ie=function(e){var n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.channelId})),r=(0,s.C)((function(e){return e.apiUrl})),a=(0,s.T)(),i=function(){var i=(0,C.Z)(y().mark((function i(){var o;return y().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,O(r,t,n.connectionId,e.sendConnectionId);case 5:o=i.sent,a((0,l.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,l.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,f.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:i})};function oe(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"===typeof e)return se(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return se(e,n)}(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw i}}}}function se(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ce(e,n){if(null===n)return[];var t,r=n.getTracks().map((function(e){return e.id})),a=[],i=oe(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if((!o.id||o.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in o){var s=o;s.trackIdentifier&&r.includes(s.trackIdentifier)&&a.push(s)}}}catch(c){i.e(c)}finally{i.f()}return a}var ue=function(e){var n=(0,s.C)((function(e){return e.showStats})),t=(0,s.C)((function(e){return e.soraContents.statsReport})),r=(0,s.C)((function(e){return e.soraContents.prevStatsReport}));if(!n)return null;var a=ce(t,e.stream),i=ce(r,e.stream);return(0,f.jsx)(f.Fragment,{children:a.map((function(e){var n=0,t=0,r=i.find((function(n){return e.id===n.id}));return r&&(n=e.jitterBufferDelay-r.jitterBufferDelay,t=e.jitterBufferEmittedCount-r.jitterBufferEmittedCount),(0,f.jsx)("div",{children:(0,f.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(e).map((function(e){var n=(0,Q.Z)(e,2),t=n[0],r=n[1];return(0,f.jsxs)("li",{children:[(0,f.jsxs)("strong",{children:[t,":"]})," ",r]},t)})),(0,f.jsxs)("li",{children:[(0,f.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(n/t*1e3)]})]})},e.id)}))})},le=function(e){var n=(0,r.useState)(0),t=n[0],a=n[1],i=(0,s.C)((function(e){return e.audioOutput})),o=(0,s.C)((function(e){return e.displayResolution})),c=(0,s.C)((function(e){return e.focusedSpotlightConnectionIds})),u=(0,s.C)((function(e){return e.multistream})),l=(0,s.C)((function(e){return e.mute})),d=(0,s.C)((function(e){return e.simulcast})),p=(0,s.C)((function(e){return e.spotlight})),m=e.stream.id&&c[e.stream.id];return(0,f.jsxs)("div",{className:"col-auto",children:[(0,f.jsxs)("div",{className:"video-status",children:[(0,f.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,f.jsx)(b,{connectionId:e.stream.id}),(0,f.jsx)(ne,{type:"audio",stream:e.stream}),(0,f.jsx)(ne,{type:"video",stream:e.stream})]}),(0,f.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[!p&&u&&d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(te,{rid:"r0",sendConnectionId:e.stream.id}),(0,f.jsx)(te,{rid:"r1",sendConnectionId:e.stream.id}),(0,f.jsx)(te,{rid:"r2",sendConnectionId:e.stream.id}),(0,f.jsx)(ae,{sendConnectionId:e.stream.id})]}):null,p&&u&&d?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(re,{sendConnectionId:e.stream.id}),(0,f.jsx)(ie,{sendConnectionId:e.stream.id})]}):null]})]}),(0,f.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,f.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(m?" spotlight-focused":""),children:[(0,f.jsx)(H,{stream:e.stream,setHeight:a,mute:l,audioOutput:i,displayResolution:o}),(0,f.jsx)(q,{micDevice:!0,stream:e.stream,height:t})]}),(0,f.jsx)(ue,{stream:e.stream})]})]})},de=function(){var e=(0,s.C)((function(e){return e.soraContents.remoteMediaStreams}));return(0,f.jsx)("div",{className:"row my-2",children:e.map((function(e){return(0,f.jsx)(le,{stream:e},e.id)}))})},fe=t(1341),pe=function(){var e=(0,s.C)((function(e){return e.aspectRatio})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"aspectRatio",children:[(0,f.jsx)(fe.Z,{children:"aspectRatio:"}),(0,f.jsx)(D.Z,{name:"aspectRatio",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.Ii)&&n((0,l.EG)(e.target.value))},children:P.Ii.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},me=function(){var e=(0,s.C)((function(e){return e.audioBitRate})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,f.jsx)(fe.Z,{children:"audioBitRate:"}),(0,f.jsx)(D.Z,{name:"audioBitRate",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.xR)&&r((0,l.VY)(e.target.value))},disabled:t,children:P.xR.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},he=function(){var e=(0,s.C)((function(e){return e.audioCodecType})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,f.jsx)(fe.Z,{children:"audioCodecType:"}),(0,f.jsx)(D.Z,{name:"audioCodecType",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.o1)&&r((0,l.PQ)(e.target.value))},disabled:t,children:P.o1.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},ve=function(){var e=(0,s.C)((function(e){return e.audioContentHint})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,f.jsx)(fe.Z,{children:"audioContentHint:"}),(0,f.jsx)(D.Z,{name:"audioContentHint",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.nT)&&n((0,l.mK)(e.target.value))},children:P.nT.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},ge=t(6316),xe=function(){var e=(0,s.C)((function(e){return e.audio})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"audio",children:(0,f.jsx)(ge.Z,{type:"switch",name:"audio",label:"audio",checked:e,onChange:function(e){r((0,l.$p)(e.target.checked))},disabled:t})})},be=function(){var e=(0,s.C)((function(e){return e.audioInput})),n=(0,s.C)((function(e){return e.audioInputDevices})),t=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"audioInput",children:[(0,f.jsx)(fe.Z,{children:"audioInput:"}),(0,f.jsxs)(D.Z,{name:"audioInput",value:e,onChange:function(e){t((0,l.hS)(e.target.value)),t((0,l.Lb)())},disabled:0===n.length,children:[(0,f.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,f.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},Ce=function(){var e=(0,s.C)((function(e){return e.audioOutput})),n=(0,s.C)((function(e){return e.audioOutputDevices})),t=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,f.jsx)(fe.Z,{children:"audioOutput:"}),(0,f.jsxs)(D.Z,{name:"audioOutput",value:e,onChange:function(e){t((0,l.SV)(e.target.value))},disabled:0===n.length,children:[(0,f.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,f.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},je=function(){var e=(0,s.C)((function(e){return e.audioTrack})),n=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"audioTrack",children:(0,f.jsx)(ge.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:e,onChange:function(e){n((0,l.XP)(e.target.checked))}})})},ye=function(){var e=(0,s.C)((function(e){return e.autoGainControl})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,f.jsx)(fe.Z,{children:"autoGainControl:"}),(0,f.jsx)(D.Z,{name:"autoGainControl",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.iN)&&n((0,l.yn)(e.target.value))},children:P.iN.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Se=function(){var e=(0,s.C)((function(e){return e.blurRadius})),n=(0,s.C)((function(e){return e.mediaType})),t=(0,s.T)(),r="getUserMedia"!==n;return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,f.jsx)(fe.Z,{children:"blurRadius:"}),(0,f.jsx)(D.Z,{value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.G_)&&t((0,l.bH)(e.target.value))},disabled:r,children:P.G_.map((function(e){return(0,f.jsx)("option",{suppressHydrationWarning:!0,value:e,children:""===e||r?"\u672a\u6307\u5b9a":e},e)}))})]})},ke=t(4716),Ne=function(){var e=(0,s.C)((function(e){return e.enabledBundleId})),n=(0,s.C)((function(e){return e.bundleId})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledBundleId",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledBundleId",label:"bundleId",checked:e,onChange:function(e){o((0,l.yQ)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"bundleId",children:(0,f.jsx)(ke.Z,{className:"flex-fill w-500",type:"text",placeholder:"bundleId\u3092\u6307\u5b9a",value:n,onChange:function(e){o((0,l.AZ)(e.target.value))},disabled:r})})})}):null]})},Te=function(){var e=(0,s.C)((function(e){return e.cameraDevice})),n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.video})),r=!(n?n.video:t),a=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,f.jsx)(ge.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:e,onChange:function(e){a((0,l.gF)(e.target.checked))},disabled:r})})},we=function(){var e=(0,s.C)((function(e){return e.channelId})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"channelId",children:[(0,f.jsx)(fe.Z,{children:"channelId:"}),(0,f.jsx)(ke.Z,{type:"text",placeholder:"ChannelId\u3092\u6307\u5b9a",value:e,onChange:function(e){r((0,l.cA)(e.target.value))},disabled:t})]})},Ze=function(){var e=(0,s.C)((function(e){return e.enabledClientId})),n=(0,s.C)((function(e){return e.clientId})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledClientId",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledClientId",label:"clientId",checked:e,onChange:function(e){o((0,l.pv)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"clientId",children:(0,f.jsx)(ke.Z,{className:"flex-fill w-500",type:"text",placeholder:"ClientId\u3092\u6307\u5b9a",value:n,onChange:function(e){o((0,l.Xk)(e.target.value))},disabled:r})})})}):null]})},Ie=function(){var e=(0,s.C)((function(e){return e.soraContents.connectionStatus})),n=(0,s.T)();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"connect",defaultValue:"connect",onClick:function(){n((0,l.Yr)())},disabled:"disconnecting"===e||"connecting"===e||"initializing"===e})})},Oe=function(e){var n=(0,s.C)((function(e){return e.ignoreDisconnectWebSocket})),t=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"ignoreDisconnectWebSocket",children:[(0,f.jsx)(fe.Z,{children:"ignoreDisconnectWebSocket:"}),(0,f.jsx)(D.Z,{name:"ignoreDisconnectWebSocket",value:n,onChange:function(e){(0,d.Z$)(e.target.value,P.kt)&&t((0,l.b3)(e.target.value))},disabled:e.disabled,children:P.kt.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Re=function(e){var n=(0,s.C)((function(e){return e.dataChannelSignaling})),t=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"dataChannelSignaling",children:[(0,f.jsx)(fe.Z,{children:"dataChannelSignaling:"}),(0,f.jsx)(D.Z,{name:"dataChannelSignaling",value:n,onChange:function(e){(0,d.Z$)(e.target.value,P.l9)&&t((0,l.Gc)(e.target.value))},disabled:e.disabled,children:P.l9.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Me=function(){var e=(0,s.C)((function(e){return e.enabledDataChannel})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledDataChannel",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledDataChannel",label:"dataChannel",checked:e,onChange:function(e){r((0,l.rY)(e.target.checked))},disabled:t})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsxs)(a.Z,{xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(Re,{disabled:t})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(Oe,{disabled:t})})]})})}):null]})},De=function(){var e=(0,s.C)((function(e){return e.enabledDataChannels})),n=(0,s.C)((function(e){return e.dataChannels})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)(),c="dataChannels\u3092\u6307\u5b9a\n(\u4f8b)\n"+JSON.stringify([{label:"#spam",maxPacketLifeTime:10,ordered:!0,protocol:"efg",compress:!1,direction:"sendrecv"}],null,2);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledDataChannels",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledDataChannels",label:"dataChannels",checked:e,onChange:function(e){o((0,l.VI)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"dataChannels",children:(0,f.jsx)(ke.Z,{className:"flex-fill",as:"textarea",placeholder:c,value:n,onChange:function(e){o((0,l.bl)(e.target.value))},rows:12,cols:100,disabled:r})})})}):null]})},Pe=function(){var e=(0,s.C)((function(e){return e.soraContents.connectionStatus})),n=(0,s.T)();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"disconnect",defaultValue:"disconnect",onClick:function(){n((0,l.E1)())},disabled:"disconnecting"===e||"connecting"===e||"initializing"===e})})},Ee=function(){var e=(0,s.C)((function(e){return e.displayResolution})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,f.jsx)(fe.Z,{children:"displayResolution:"}),(0,f.jsx)(D.Z,{name:"displayResolution",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.hJ)&&n((0,l.I$)(e.target.value))},children:P.hJ.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ae=t(6968),Be=function(){var e=(0,r.useState)(!1),n=e[0],t=e[1],o=(0,s.C)((function(e){return e.e2ee})),c=(0,s.C)((function(e){return e.soraContents.connectionStatus})),u=(0,d.nh)(c),p=(0,s.T)();return(0,r.useEffect)((function(){o&&t(!1)}),[o]),(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"e2ee",children:[(0,f.jsx)(ge.Z,{type:"switch",name:"e2ee",label:"e2ee",checked:o,onChange:function(e){e.target.checked&&t(!0),p((0,l.c0)(e.target.checked))},disabled:u}),n?(0,f.jsx)(Ae.Z,{className:"spinner-status",variant:"primary",animation:"border",role:"status"}):null]})})})},Ue=function(){var e=(0,s.C)((function(e){return e.echoCancellation})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,f.jsx)(fe.Z,{children:"echoCancellation:"}),(0,f.jsx)(D.Z,{name:"echoCancellation",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.PS)&&n((0,l.LN)(e.target.value))},children:P.PS.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ve=function(){var e=(0,s.C)((function(e){return e.echoCancellationType})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,f.jsx)(fe.Z,{children:"echoCancellationType:"}),(0,f.jsx)(D.Z,{name:"echoCancellationType",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.cJ)&&n((0,l.lW)(e.target.value))},children:P.cJ.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},He=t(1181),Fe=function(){var e=(0,s.C)((function(e){return e.mediaType})),n=(0,s.C)((function(e){return e.fakeVolume})),t=(0,s.T)();return"fakeMedia"!==e?null:(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,f.jsx)(fe.Z,{children:"fakeVolume:"}),(0,f.jsx)(He.Z.Range,{min:"0",max:"1",step:"0.25",value:n,onChange:function(e){t((0,l.eW)(e.target.value))}})]})},_e=function(){var e=(0,s.C)((function(e){return e.frameRate})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"frameRate",children:[(0,f.jsx)(fe.Z,{children:"frameRate:"}),(0,f.jsx)(D.Z,{name:"frameRate",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.YX)&&n((0,l.co)(e.target.value))},children:P.YX.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Je=function(){var e=(0,s.C)((function(e){return e.mediaProcessorsNoiseSuppression})),n=(0,s.C)((function(e){return e.mediaType})),t=(0,s.T)(),r="getUserMedia"!==n;return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"mediaProcessorsNoiseSuppression",children:(0,f.jsx)(ge.Z,{type:"switch",name:"mediaProcessorsNoiseSuppression",label:"mediaProcessorsNoiseSuppression",checked:e,onChange:function(e){t((0,l.rv)(e.target.checked))},disabled:r})})},ze=function(e){var n=e.label,t=e.disabled,r=e.onChange,a=e.mediaType;return(0,f.jsx)(ge.Z,{type:"radio",inline:!0,id:n,label:n,value:n,checked:a===n,onChange:r,disabled:t})},Ge=function(){var e=(0,s.C)((function(e){return e.soraContents.connectionStatus})),n=(0,s.C)((function(e){return e.mediaType})),t=(0,d.nh)(e),r=(0,s.T)(),a=function(e){(0,d.Z$)(e.target.value,P.w_)&&r((0,l.y5)(e.target.value))};return(0,f.jsxs)(M.Z,{className:"form-inline flex-wrap",children:[(0,f.jsx)(fe.Z,{children:"mediaType:"}),(0,f.jsx)(ze,{label:"getUserMedia",mediaType:n,disabled:t,onChange:a}),(0,f.jsx)(ze,{label:"getDisplayMedia",mediaType:n,disabled:t,onChange:a}),(0,f.jsx)(ze,{label:"fakeMedia",mediaType:n,disabled:t,onChange:a})]})},Le=function(){var e=(0,s.C)((function(e){return e.enabledMetadata})),n=(0,s.C)((function(e){return e.metadata})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledMetadata",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledMetadata",label:"metadata",checked:e,onChange:function(e){o((0,l.yq)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"metadata",children:(0,f.jsx)(ke.Z,{className:"flex-fill",as:"textarea",placeholder:"Metadata\u3092\u6307\u5b9a",value:n,onChange:function(e){o((0,l.yC)(e.target.value))},rows:10,cols:100,disabled:r})})})}):null]})},We=function(){var e=(0,s.C)((function(e){return e.micDevice})),n=(0,s.C)((function(e){return e.soraContents.sora})),t=(0,s.C)((function(e){return e.audio})),r=!(n?n.audio:t),a=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"micDevice",children:(0,f.jsx)(ge.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:e,onChange:function(e){a((0,l.vX)(e.target.checked))},disabled:r})})},$e=function(){var e=(0,s.C)((function(e){return e.multistream})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"multistream",children:[(0,f.jsx)(fe.Z,{children:"multistream:"}),(0,f.jsx)(D.Z,{name:"multistream",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.u9)&&r((0,l.cT)(e.target.value))},disabled:t,children:P.u9.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Ke=function(){var e=(0,s.C)((function(e){return e.noiseSuppression})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,f.jsx)(fe.Z,{children:"noiseSuppression:"}),(0,f.jsx)(D.Z,{name:"noiseSuppression",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.ad)&&n((0,l.fj)(e.target.value))},children:P.ad.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},qe=function(){var e=(0,s.C)((function(e){return e.reconnect})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"reconnect",children:(0,f.jsx)(ge.Z,{type:"switch",name:"reconnect",label:"reconnect",checked:e,onChange:function(e){r((0,l.sk)(e.target.checked))},disabled:t})})})})},Xe=function(){var e=(0,s.T)();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){e((0,l.pI)())}})})},Ye=function(){var e=(0,s.C)((function(e){return e.resizeMode})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"resizeMode",children:[(0,f.jsx)(fe.Z,{children:"resizeMode:"}),(0,f.jsx)(D.Z,{name:"resizeMode",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.L4)&&n((0,l.P6)(e.target.value))},children:P.L4.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},Qe=function(){var e=(0,s.C)((function(e){return e.resolution})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"resolution",children:[(0,f.jsx)(fe.Z,{children:"resolution:"}),(0,f.jsx)(D.Z,{name:"resolution",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.Vf)&&n((0,l.Ik)(e.target.value))},children:P.Vf.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},en=function(){var e=(0,s.C)((function(e){return e.enabledSignalingNotifyMetadata})),n=(0,s.C)((function(e){return e.signalingNotifyMetadata})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledSignalingNotifyMetadata",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledSignalingNotifyMetadata",label:"signalingNotifyMetadata",checked:e,onChange:function(e){o((0,l.vq)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"signalingNotifyMetadata",children:(0,f.jsx)(ke.Z,{className:"flex-fill",as:"textarea",placeholder:"signalingNotifyMetadata\u3092\u6307\u5b9a",value:n,onChange:function(e){o((0,l.H6)(e.target.value))},rows:10,cols:100,disabled:r})})})}):null]})},nn=function(){var e=(0,s.C)((function(e){return e.enabledSignalingUrlCandidates})),n=(0,s.C)((function(e){return e.signalingUrlCandidates})),t=(0,s.C)((function(e){return e.soraContents.connectionStatus})),r=(0,d.nh)(t),o=(0,s.T)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",xs:"auto",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"enabledSignalingUrlCandidates",children:(0,f.jsx)(ge.Z,{type:"switch",name:"enabledSignalingUrlCandidates",label:"signalingUrlCandidates",checked:e,onChange:function(e){o((0,l.Nd)(e.target.checked))},disabled:r})})})}),e?(0,f.jsx)(a.Z,{className:"form-row",xs:"auto",children:(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(M.Z,{className:"form-inline",controlId:"signalingNotifyMetadata",children:(0,f.jsx)(ke.Z,{className:"flex-fill",as:"textarea",placeholder:"signalingUrlCandidates\u3092\u6307\u5b9a",value:n.join("\n"),onChange:function(e){o((0,l.l7)(e.target.value.split("\n")))},rows:5,cols:100,disabled:r})})})}):null]})},tn=function(){var e=(0,s.C)((function(e){return e.simulcast})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"simulcast",children:[(0,f.jsx)(fe.Z,{children:"simulcast:"}),(0,f.jsx)(D.Z,{name:"simulcast",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.VE)&&r((0,l.nD)(e.target.value))},disabled:t,children:P.VE.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},rn=function(){var e=(0,s.C)((function(e){return e.simulcastRid})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,f.jsx)(fe.Z,{children:"simulcastRid:"}),(0,f.jsx)(D.Z,{name:"simulcastRid",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.WJ)&&r((0,l.vM)(e.target.value))},disabled:t,children:P.WJ.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},an=function(){var e=(0,s.C)((function(e){return e.spotlightFocusRid})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,f.jsx)(fe.Z,{children:"spotlightFocusRid:"}),(0,f.jsx)(D.Z,{value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.I7)&&r((0,l.CV)(e.target.value))},disabled:t,children:P.I7.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},on=function(){var e=(0,s.C)((function(e){return e.spotlight})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"spotlight",children:[(0,f.jsx)(fe.Z,{children:"spotlight:"}),(0,f.jsx)(D.Z,{name:"spotlight",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.VJ)&&r((0,l.sD)(e.target.value))},disabled:t,children:P.VJ.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},sn=function(){var e=(0,s.C)((function(e){return e.spotlightNumber})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,f.jsx)(fe.Z,{children:"spotlightNumber:"}),(0,f.jsx)(D.Z,{value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.Xr)&&r((0,l.TT)(e.target.value))},disabled:t,children:P.Xr.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},cn=function(){var e=(0,s.C)((function(e){return e.spotlightUnfocusRid})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,f.jsx)(fe.Z,{children:"spotlightUnfocusRid:"}),(0,f.jsx)(D.Z,{value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.I7)&&r((0,l.qV)(e.target.value))},disabled:t,children:P.I7.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},un=function(){var e=(0,s.C)((function(e){return e.channelId})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.T)(),a=function(){var n=(0,C.Z)(y().mark((function n(){var a;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N(t,e);case 3:a=n.sent,r((0,l.du)("POST successed. response: ".concat(JSON.stringify(a)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),n.t0 instanceof Error&&r((0,l.i8)(n.t0.message));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:a,disabled:"initializing"===n})})},ln=function(){var e=(0,s.C)((function(e){return e.channelId})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,s.C)((function(e){return e.apiUrl})),r=(0,s.T)(),a=function(){var n=(0,C.Z)(y().mark((function n(){var a;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(t,e);case 3:a=n.sent,r((0,l.du)("POST successed. response: ".concat(JSON.stringify(a)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),n.t0 instanceof Error&&r((0,l.i8)(n.t0.message));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:a,disabled:"initializing"===n})})},dn=function(){var e=(0,s.T)();return(0,f.jsx)("div",{className:"col-auto mb-1",children:(0,f.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){e((0,l.Lb)())}})})},fn=P.Q5.slice();fn.splice(P.Q5.indexOf("15000")+1,0,"support-message");var pn=function(){var e=(0,s.C)((function(e){return e.videoBitRate})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,f.jsx)(fe.Z,{children:"videoBitRate:"}),(0,f.jsx)(D.Z,{name:"videoBitRate",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.Q5)&&r((0,l.as)(e.target.value))},disabled:t,children:fn.map((function(e){var n=e;return""===e?n="\u672a\u6307\u5b9a":"support-message"===e&&(n="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,f.jsx)("option",{value:e,disabled:"support-message"===e,children:n},e)}))})]})},mn=function(){var e=(0,s.C)((function(e){return e.videoCodecType})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,f.jsx)(fe.Z,{children:"videoCodecType:"}),(0,f.jsx)(D.Z,{name:"videoCodecType",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.Sh)&&r((0,l.h2)(e.target.value))},disabled:t,children:P.Sh.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},hn=function(){var e=(0,s.C)((function(e){return e.videoContentHint})),n=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,f.jsx)(fe.Z,{children:"videoContentHint:"}),(0,f.jsx)(D.Z,{name:"videoContentHint",value:e,onChange:function(e){(0,d.Z$)(e.target.value,P.QO)&&n((0,l.w6)(e.target.value))},children:P.QO.map((function(e){return(0,f.jsx)("option",{value:e,children:""===e?"\u672a\u6307\u5b9a":e},e)}))})]})},vn=function(){var e=(0,s.C)((function(e){return e.video})),n=(0,s.C)((function(e){return e.soraContents.connectionStatus})),t=(0,d.nh)(n),r=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"video",children:(0,f.jsx)(ge.Z,{type:"switch",name:"video",label:"video",checked:e,onChange:function(e){r((0,l.ge)(e.target.checked))},disabled:t})})},gn=function(){var e=(0,s.C)((function(e){return e.videoInput})),n=(0,s.C)((function(e){return e.videoInputDevices})),t=(0,s.T)();return(0,f.jsxs)(M.Z,{className:"form-inline",controlId:"videoInput",children:[(0,f.jsx)(fe.Z,{children:"videoInput:"}),(0,f.jsxs)(D.Z,{name:"videoInput",value:e,onChange:function(e){t((0,l.lZ)(e.target.value)),t((0,l.Lb)())},disabled:0===n.length,children:[(0,f.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),n.map((function(e){return(0,f.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId)}))]})]})},xn=function(){var e=(0,s.C)((function(e){return e.videoTrack})),n=(0,s.T)();return(0,f.jsx)(M.Z,{className:"form-inline",controlId:"videoTrack",children:(0,f.jsx)(ge.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:e,onChange:function(e){n((0,l.e_)(e.target.checked))}})})},bn=function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{className:"form-row",xs:"auto",children:(0,f.jsx)(i.Z,{children:(0,f.jsx)(we,{})})}),(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)($e,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(tn,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(on,{})})]})]})},Cn=function(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(xe,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(he,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(me,{})})]}),(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(vn,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(mn,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(pn,{})})]})]})},jn=function(){return"true"!==(0,s.C)((function(e){return e.simulcast}))?null:(0,f.jsx)(a.Z,{className:"form-row",xs:"auto",children:(0,f.jsx)(i.Z,{children:(0,f.jsx)(rn,{})})})},yn=function(){return"true"!==(0,s.C)((function(e){return e.spotlight}))?null:(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(sn,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(an,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(cn,{})})]})},Sn=function(){var e=(0,r.useState)(!0),n=e[0],t=e[1],c=[(0,s.C)((function(e){return e.e2ee})),(0,s.C)((function(e){return e.enabledBundleId})),(0,s.C)((function(e){return e.enabledClientId})),(0,s.C)((function(e){return e.enabledDataChannel})),(0,s.C)((function(e){return e.enabledDataChannels})),(0,s.C)((function(e){return e.enabledMetadata})),(0,s.C)((function(e){return e.enabledSignalingNotifyMetadata})),(0,s.C)((function(e){return e.enabledSignalingUrlCandidates})),(0,s.C)((function(e){return e.reconnect}))].some((function(e){return e})),u=["btn-collapse-options"];n&&u.push("collapsed"),c&&u.push("fw-bold");return(0,f.jsxs)(a.Z,{className:"form-row",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)("a",{href:"#",className:u.join(" "),onClick:function(e){e.preventDefault(),t(!n)},children:"Signaling options"})}),(0,f.jsx)(o.Z,{in:!n,children:(0,f.jsxs)("div",{children:[(0,f.jsx)(Be,{}),(0,f.jsx)(qe,{}),(0,f.jsx)(Ze,{}),(0,f.jsx)(Le,{}),(0,f.jsx)(Ne,{}),(0,f.jsx)(en,{}),(0,f.jsx)(nn,{}),(0,f.jsx)(De,{}),(0,f.jsx)(Me,{})]})})]})},kn=function(){return(0,f.jsxs)(a.Z,{xs:"auto",className:"form-row",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(Ge,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(Fe,{})})]})},Nn=function(){var e=(0,r.useState)(!0),n=e[0],t=e[1],c=[""!==(0,s.C)((function(e){return e.audioContentHint})),""!==(0,s.C)((function(e){return e.autoGainControl})),""!==(0,s.C)((function(e){return e.noiseSuppression})),""!==(0,s.C)((function(e){return e.echoCancellation})),""!==(0,s.C)((function(e){return e.echoCancellationType})),""!==(0,s.C)((function(e){return e.videoContentHint})),""!==(0,s.C)((function(e){return e.resolution})),""!==(0,s.C)((function(e){return e.frameRate})),""!==(0,s.C)((function(e){return e.blurRadius})),(0,s.C)((function(e){return e.mediaProcessorsNoiseSuppression}))].some((function(e){return e})),u=["btn-collapse-options"];n&&u.push("collapsed"),c&&u.push("fw-bold");return(0,f.jsxs)(a.Z,{className:"form-row",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)("a",{href:"#",className:u.join(" "),onClick:function(e){e.preventDefault(),t(!n)},children:"Media options"})}),(0,f.jsx)(o.Z,{in:!n,children:(0,f.jsxs)("div",{children:[(0,f.jsxs)(a.Z,{className:"form-row",children:[(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(ve,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(ye,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Ke,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Ue,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Ve,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Je,{})})]}),(0,f.jsxs)(a.Z,{className:"form-row",children:[(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(hn,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Qe,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(_e,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(pe,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Ye,{})}),(0,f.jsx)(i.Z,{className:"col-auto",children:(0,f.jsx)(Se,{})})]}),(0,f.jsx)(dn,{})]})})]})},Tn=function(){var e=(0,s.C)((function(e){return e.role}));return(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:["recvonly"!==e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(be,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(gn,{})})]}):null,(0,f.jsx)(i.Z,{children:(0,f.jsx)(Ce,{})}),(0,f.jsx)(Xe,{})]})},wn=function(){var e=(0,s.C)((function(e){return e.role}));return(0,f.jsxs)(a.Z,{className:"form-row",xs:"auto",children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(Ee,{})}),"recvonly"!==e?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(i.Z,{children:(0,f.jsx)(We,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(Te,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(je,{})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(xn,{})})]}):null]})},Zn=function(){var e=(0,s.C)((function(e){return e.debug})),n=(0,s.C)((function(e){return e.role}));return(0,f.jsxs)("div",{className:e?"col-devtools col-6":"col-devtools col-12",children:[(0,f.jsx)(v,{}),(0,f.jsx)(bn,{}),(0,f.jsx)(jn,{}),(0,f.jsx)(yn,{}),(0,f.jsx)("hr",{className:"hr-form"}),(0,f.jsx)(Cn,{}),(0,f.jsx)(Sn,{}),(0,f.jsx)("hr",{className:"hr-form"}),"recvonly"!==n?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(kn,{}),(0,f.jsx)(Nn,{}),(0,f.jsx)("hr",{className:"hr-form"})]}):null,(0,f.jsx)(Tn,{}),(0,f.jsx)(wn,{}),(0,f.jsx)("hr",{className:"hr-form"}),(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)(Ie,{}),(0,f.jsx)(Pe,{}),(0,f.jsx)(un,{}),(0,f.jsx)(ln,{})]}),(0,f.jsx)("hr",{className:"hr-form"}),(0,f.jsx)(Y,{}),"recvonly"===n||"sendrecv"===n?(0,f.jsx)(de,{}):null]})}},236:function(e,n,t){t.d(n,{$:function(){return l}});t(7294);var r=t(6592),a=t(4607),i=t(2923),o=t(873),s=t(7821),c=t(5893),u=function(){var e=(0,o.C)((function(e){return e.debug})),n=(0,o.T)(),t=e?"btn btn-footer-debug-mode active":"btn btn-footer-debug-mode";return(0,c.jsx)("div",{children:(0,c.jsx)("button",{className:t,onClick:function(){n((0,s.ew)(!e))},children:"debug"})})},l=function(){var e=(0,o.C)((function(e){return e.version}));return(0,c.jsxs)("footer",{children:[(0,c.jsxs)(r.Z,{variant:"dark",bg:"sora",expand:"md",fixed:"bottom",children:[(0,c.jsx)(a.Z,{className:"me-auto"}),(0,c.jsx)(a.Z,{children:(0,c.jsxs)(r.Z.Collapse,{id:"navbar-collapse",children:[(0,c.jsxs)("a",{href:"https://github.com/shiguredo/sora-devtools",className:"btn btn-outline-light m-1",children:["GitHub: shiguredo/sora-devtools: ",e]}),(0,c.jsxs)("a",{href:"https://github.com/shiguredo/sora-js-sdk",className:"btn btn-outline-light m-1",children:["GitHub: shiguredo/sora-js-sdk: ",i.Z.version()]})]})})]}),(0,c.jsx)(u,{})]})}},4280:function(e,n,t){t.d(n,{F:function(){return o}});var r=t(9008),a=t.n(r),i=(t(7294),t(5893)),o=function(e){return(0,i.jsx)(a(),{children:(0,i.jsxs)("title",{children:["Sora DevTools ",e.title]})})}},7028:function(e,n,t){t.d(n,{h:function(){return b}});var r=t(7294),a=t(6592),i=t(682),o=t(4607),s=t(873),c=t(7821),u=t(5893),l=function(){var e=(0,s.T)();return(0,u.jsx)("input",{className:"btn btn-light btn-sm ms-1",type:"button",name:"copyUrl",defaultValue:"copy URL",onClick:function(){e((0,c.Hi)())}})},d=function(){var e=(0,s.C)((function(e){return e.debug})),n=(0,s.T)(),t=["btn","btn-header-debug-mode","btn-sm","ms-1"];return e&&t.push("active"),(0,u.jsx)("input",{className:t.join(" "),type:"button",name:"debug",defaultValue:"debug",onClick:function(){n((0,c.ew)(!e))}})},f=t(29),p=t(7794),m=t.n(p),h=t(2923),v=t(8218);function g(e){var n=v.h.getState(),t={aspectRatio:n.aspectRatio,audio:n.audio,audioBitRate:n.audioBitRate,audioCodecType:n.audioCodecType,audioContentHint:n.audioContentHint,audioInput:n.audioInput,audioInputDevices:n.audioInputDevices,audioOutput:n.audioOutput,audioOutputDevices:n.audioOutputDevices,autoGainControl:n.autoGainControl,bundleId:n.bundleId,clientId:n.clientId,channelId:n.channelId,googCpuOveruseDetection:n.googCpuOveruseDetection,debug:n.debug,dataChannelSignaling:n.dataChannelSignaling,dataChannels:n.dataChannels,displayResolution:n.displayResolution,e2ee:n.e2ee,echoCancellation:n.echoCancellation,echoCancellationType:n.echoCancellationType,enabledBundleId:n.enabledBundleId,enabledClientId:n.enabledClientId,enabledDataChannel:n.enabledDataChannel,enabledDataChannels:n.enabledDataChannels,enabledMetadata:n.enabledMetadata,enabledSignalingNotifyMetadata:n.enabledSignalingNotifyMetadata,enabledSignalingUrlCandidates:n.enabledSignalingUrlCandidates,fakeVolume:n.fakeVolume,frameRate:n.frameRate,ignoreDisconnectWebSocket:n.ignoreDisconnectWebSocket,mediaType:n.mediaType,metadata:n.metadata,multistream:n.multistream,noiseSuppression:n.noiseSuppression,reconnect:n.reconnect,resizeMode:n.resizeMode,resolution:n.resolution,simulcast:n.simulcast,spotlight:n.spotlight,signalingNotifyMetadata:n.signalingNotifyMetadata,signalingUrlCandidates:n.signalingUrlCandidates,simulcastRid:n.simulcastRid,spotlightNumber:n.spotlightNumber,spotlightFocusRid:n.spotlightFocusRid,spotlightUnfocusRid:n.spotlightUnfocusRid,video:n.video,videoBitRate:n.videoBitRate,videoCodecType:n.videoCodecType,videoContentHint:n.videoContentHint,videoInput:n.videoInput,videoInputDevices:n.videoInputDevices,cameraDevice:n.cameraDevice,videoTrack:n.videoTrack,micDevice:n.micDevice,audioTrack:n.audioTrack,role:n.role};return{userAgent:navigator.userAgent,pageName:e,"sora-devtools":n.version,"sora-js-sdk":h.Z.version(),parameters:t,timeline:n.timelineMessages.map((function(e){return{timestamp:e.timestamp,message:e}})),notify:n.notifyMessages,stats:n.soraContents.statsReport}}var x=function(e){var n=(0,r.useRef)(null),t=function(){var t=(0,f.Z)(m().mark((function t(){var r,a,i,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=g(e.pageName),a=JSON.stringify(r),i=new Blob([a],{type:"text/plain"}),window.URL=window.URL||window.webkitURL,n.current&&(o=(new Date).toISOString().replaceAll(":","_").replaceAll(".","_"),n.current.download="sora-devtools-report-".concat(o,".json"),n.current.href=window.URL.createObjectURL(i),n.current.click());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"btn btn-light btn-sm ms-1",type:"button",name:"downloadReport",defaultValue:"Download report",onClick:t}),(0,u.jsx)("a",{ref:n,style:{display:"none"}})]})},b=function(e){var n=(0,s.C)((function(e){return e.soraContents.sora}));return(0,u.jsx)("header",{children:(0,u.jsx)(a.Z,{variant:"dark",bg:"sora",expand:"md",fixed:"top",children:(0,u.jsxs)(i.Z,{children:[(0,u.jsx)(a.Z.Brand,{href:"/",children:"Sora DevTools"}),(0,u.jsx)(o.Z,{children:(0,u.jsx)(a.Z.Text,{children:e.pageName})}),(0,u.jsx)(a.Z.Toggle,{"aria-controls":"navbar-collapse"}),(0,u.jsxs)(a.Z.Collapse,{id:"navbar-collapse",children:[(0,u.jsx)(o.Z,{className:"me-auto"}),(0,u.jsxs)(o.Z,{children:[(0,u.jsx)(a.Z.Text,{className:"py-0 my-1 mx-1",children:(0,u.jsx)("p",{className:"navbar-signaling-url border rounded",children:n?n.connectedSignalingUrl:"\u672a\u63a5\u7d9a"})}),(0,u.jsx)(a.Z.Text,{className:"py-0 my-1 mx-1",children:(0,u.jsx)(d,{})}),(0,u.jsx)(a.Z.Text,{className:"py-0 my-1 mx-1",children:(0,u.jsx)(x,{pageName:e.pageName})}),(0,u.jsx)(a.Z.Text,{className:"py-0 my-1 ms-1",children:(0,u.jsx)(l,{})})]})]})]})})})}},7174:function(e,n,t){t.d(n,{BB:function(){return S},EO:function(){return f},Kr:function(){return I},PW:function(){return N},Sg:function(){return k},Tm:function(){return g},We:function(){return Z},Yw:function(){return h},Z$:function(){return l},_8:function(){return x},dD:function(){return d},dV:function(){return v},f7:function(){return u},fR:function(){return b},fl:function(){return p},gU:function(){return C},nh:function(){return w},o5:function(){return c},zW:function(){return j}});var r=t(29),a=t(7794),i=t.n(a),o=t(7563),s=t(7169);function c(e){var n=new Date(e),t=n.getFullYear(),r=n.getMonth()+1,a=n.getDate(),i=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0"),c=n.getMilliseconds().toString().padStart(3,"0");return"".concat(t,"-").concat(r,"-").concat(a," ").concat(i,":").concat(o,":").concat(s,".").concat(c)}function u(e){return navigator.clipboard?navigator.clipboard.writeText(e):Promise.resolve()}function l(e,n){return"string"===typeof e&&n.indexOf(e)>=0}function d(){var e,n=function(e){if("string"===typeof e)return e},t=function(e){if("string"===typeof e)return y(e)},r=function(e,n){if(l(e,n))return e},a=o.parse(location.search);if("string"===typeof a.signalingUrlCandidates)try{e=JSON.parse(a.signalingUrlCandidates)}catch(c){}var i={apiUrl:n(a.apiUrl),audio:t(a.audio),audioBitRate:r(a.audioBitRate,s.xR),audioCodecType:r(a.audioCodecType,s.o1),autoGainControl:r(a.autoGainControl,s.iN),bundleId:n(a.bundleId),channelId:n(a.channelId),clientId:n(a.clientId),googCpuOveruseDetection:t(a.googCpuOveruseDetection),debug:t(a.debug),debugType:r(a.debugType,s.aF),displayResolution:r(a.displayResolution,s.hJ),e2ee:t(a.e2ee),echoCancellation:r(a.echoCancellation,s.PS),echoCancellationType:r(a.echoCancellationType,s.cJ),noiseSuppression:r(a.noiseSuppression,s.ad),fakeVolume:n(a.fakeVolume),frameRate:r(a.frameRate,s.YX),mediaType:r(a.mediaType,s.w_),metadata:n(a.metadata),showStats:t(a.showStats),signalingNotifyMetadata:n(a.signalingNotifyMetadata),signalingUrlCandidates:Array.isArray(e)?e:void 0,simulcast:r(a.simulcast,s.VE),simulcastRid:r(a.simulcastRid,s.WJ),spotlight:r(a.spotlight,s.VJ),spotlightNumber:r(a.spotlightNumber,s.Xr),spotlightFocusRid:r(a.spotlightFocusRid,s.I7),spotlightUnfocusRid:r(a.spotlightUnfocusRid,s.I7),resolution:r(a.resolution,s.Vf),video:t(a.video),videoBitRate:r(a.videoBitRate,s.Q5),videoCodecType:r(a.videoCodecType,s.Sh),audioInput:n(a.audioInput),videoInput:n(a.videoInput),audioOutput:n(a.audioOutput),mute:t(a.mute),dataChannelSignaling:r(a.dataChannelSignaling,s.l9),ignoreDisconnectWebSocket:r(a.ignoreDisconnectWebSocket,s.kt),micDevice:t(a.micDevice),cameraDevice:t(a.cameraDevice),audioTrack:t(a.audioTrack),videoTrack:t(a.videoTrack),dataChannels:n(a.dataChannels),reconnect:t(a.reconnect),audioContentHint:r(a.audioContentHint,s.nT),videoContentHint:r(a.videoContentHint,s.QO),aspectRatio:r(a.aspectRatio,s.Ii),resizeMode:r(a.resizeMode,s.L4),blurRadius:r(a.blurRadius,s.G_),mediaProcessorsNoiseSuppression:t(a.mediaProcessorsNoiseSuppression),multistream:r(a.multistream,s.u9)};return Object.keys(i).map((function(e){void 0===i[e]&&delete i[e]})),i}function f(e,n){if(e)return n.filter((function(e){return""!==e}));var t="https:"===window.location.protocol?"wss://":"ws://",r=window.location.port?":".concat(window.location.port):"";return t+window.location.hostname+r+"/signaling"}function p(e){switch(e){case"120p (160x120)":return{width:160,height:120};case"180p (320x180)":return{width:320,height:180};case"240p (320x240)":return{width:320,height:240};case"360p (640x360)":return{width:640,height:360};case"480p (640x480)":return{width:640,height:480};case"720p (1280x720)":return{width:1280,height:720};case"1080p (1920x1080)":return{width:1920,height:1080};case"2160p (3840x2160)":return{width:3840,height:2160};default:return{width:0,height:0}}}function m(e){switch(e){case"4:3":return 4/3;case"16:9":return 16/9;case"21:9":return 20/9;default:return NaN}}function h(e){switch(e){case"weak":return 5;case"midium":return 10;case"strong":return 15;default:return 0}}function v(e){var n=e.audio,t=e.autoGainControl,r=e.noiseSuppression,a=e.echoCancellation,i=e.echoCancellationType,o=e.audioInput;if(!n)return!1;if(!t&&!r&&!a&&!i&&!o)return n;var s={};o&&(s.deviceId={exact:o});var c=y(t);void 0!==c&&(s.autoGainControl=c);var u=y(r);void 0!==u&&(s.noiseSuppression=u);var l=y(a);return void 0!==l&&(s.echoCancellation=l),i&&(s.echoCancellationType=i),s}function g(e){var n=e.video,t=e.frameRate,r=e.resolution,a=e.videoInput,i=e.aspectRatio,o=e.resizeMode;if(!n)return!1;if(!t&&!r&&!a&&!i&&!o)return n;var s={};if(t&&(s.frameRate={min:parseInt(t,10),max:parseInt(t,10)}),r){var c=p(r),u=c.width,l=c.height;0<u&&0<l&&(s.width={exact:u},s.height={exact:l})}return a&&(s.deviceId={exact:a}),i&&(s.aspectRatio=m(i)),o&&(s.resizeMode=o),s}function x(e){var n=e.audio,t=e.video,r=e.frameRate,a=e.resolution,i=e.volume,o=e.aspectRatio,s=e.resizeMode,c=parseInt(r,10)||30,u=p(a),l=u.width||240,d={audio:n,video:t,frameRate:c,width:l,height:u.height||160,fontSize:Math.floor(l/5),volume:parseFloat(i)};return t&&(o||s)&&(d.videoTrackConstraints={},o&&(d.videoTrackConstraints.aspectRatio=m(o)),s&&(d.videoTrackConstraints.resizeMode=s)),d}function b(e){var n=e.aspectRatio,t=e.frameRate,r=e.resizeMode,a=e.resolution;if(!t&&!a&&!n&&!r)return{video:!0};var i={};if(t&&(i.frameRate=parseInt(t,10)),a){var o=p(a),s=o.width,c=o.height;0<s&&0<c&&(i.width=s,i.height=c)}return n&&(i.aspectRatio=m(n)),r&&(i.resizeMode=r),{video:i}}function C(e){var n=new MediaStream,t=null;if(e.video){(t=document.createElement("canvas")).getContext("2d"),t.width=e.width,t.height=e.height;var r=t.captureStream(e.frameRate).getTracks()[0];e.videoTrackConstraints&&r.applyConstraints(e.videoTrackConstraints),n.addTrack(r)}var a=null;if(e.audio){var i=new(window.AudioContext||window.webkitAudioContext),o=i.createOscillator();o.type="sine",a=i.createGain(),o.connect(a),o.start(0);var s=i.createMediaStreamDestination();a.connect(s);var c=s.stream.getTracks();n.addTrack(c[0]),a.gain.setValueAtTime(e.volume,0)}return{canvas:t,mediaStream:n,gainNode:a}}function j(e,n,t,r){if(null!==e){var a=e.getContext("2d");if(a){a.globalCompositeOperation="source-over",a.clearRect(0,0,e.width,e.height),a.fillStyle="#"+("0".repeat(6)+n.toString(16)).slice(-6),a.fillRect(0,0,e.width,e.height),a.fillStyle="#"+("0".repeat(6)+(16777215-n).toString(16)).slice(-6),a.font="".concat(t,"px Arial");var i=e.width/2-t/2,o=t/4*(r.length-1),s=e.height/2+t/2.5;a.fillText(r,i-o,s)}}}function y(e){return"true"===e||"false"!==e&&void 0}function S(e,n){if(e){try{return JSON.parse(n)}catch(t){}return n}}function k(){if(!window.RTCRtpSender||!RTCRtpSender.getCapabilities)return"VP9";var e=RTCRtpSender.getCapabilities("video");if(!e||!e.codecs)return"VP9";var n=e.codecs.map((function(e){return e.mimeType.replace("video/","")}));return n.includes("VP9")?"VP9":n.includes("VP8")?"VP8":n.includes("H264")?"H264":n.includes("AV1")?"AV1":n.includes("H265")?"H265":"VP9"}function N(){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==navigator.mediaDevices){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function w(e){return"connected"===e||"connecting"===e}function Z(e){return{id:e.id,label:e.label,kind:e.kind,enabled:e.enabled,muted:e.muted,readyState:e.readyState,contentHint:e.contentHint,getConstraints:e.getConstraints(),getCapabilities:e.getCapabilities?e.getCapabilities():null,getSettings:e.getSettings()}}function I(e){var n={audio:e.audio,video:e.video};e.audioCodecType&&(n.audioCodecType=e.audioCodecType);var t=parseInt(e.audioBitRate,10);t&&(n.audioBitRate=t),e.videoCodecType&&(n.videoCodecType=e.videoCodecType);var r=parseInt(e.videoBitRate,10);r&&(n.videoBitRate=r);var a=y(e.multistream);void 0!==a&&(n.multistream=a),e.e2ee&&(n.e2ee=!0);var i=y(e.spotlight);void 0!==i&&(n.spotlight=i,!0===i&&(e.spotlightNumber&&(n.spotlightNumber=parseInt(e.spotlightNumber)),e.spotlightFocusRid&&(n.spotlightFocusRid=e.spotlightFocusRid),e.spotlightUnfocusRid&&(n.spotlightUnfocusRid=e.spotlightUnfocusRid)));var o=y(e.simulcast);if(void 0!==o&&(n.simulcast=o,!0===o&&e.simulcastRid&&(n.simulcastRid=e.simulcastRid)),e.enabledSignalingNotifyMetadata&&(n.signalingNotifyMetadata=S(!0,e.signalingNotifyMetadata)),e.enabledBundleId&&(n.bundleId=e.bundleId),e.enabledClientId&&(n.clientId=e.clientId),e.enabledDataChannel){var s=y(e.dataChannelSignaling);void 0!==s&&(n.dataChannelSignaling=s);var c=y(e.ignoreDisconnectWebSocket);void 0!==c&&(n.ignoreDisconnectWebSocket=c)}if(""!==e.dataChannels){var u=[];try{u=JSON.parse(e.dataChannels)}catch(l){console.warn("Illegal format DataChannels")}Array.isArray(u)&&(n.dataChannels=u)}return n}}}]);