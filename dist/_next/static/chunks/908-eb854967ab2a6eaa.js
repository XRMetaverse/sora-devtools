"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{2908:function(n,e,t){t.d(e,{d:function(){return ke}});var r=t(7294),i=t(7142),a=t(7897),o=t(2279),c=t(6420),s=t(29),u=t(7794),l=t.n(u);function d(n,e,t,r){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)(l().mark((function n(e,t,r,i){var a,o,c,s,u,d,f,h;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.location.protocol,o="https:"==a?"443":"3000",c="https:"==a?"api":"",s="".concat(a,"//").concat(window.location.hostname,":").concat(o,"/").concat(c),null!==e&&(s=e),u="Sora_".concat(t,".").concat(r),n.next=8,fetch(s,{method:"POST",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":u},mode:"cors"});case 8:return d=n.sent,n.next=11,d.json();case 11:if(f=n.sent,d.ok){n.next=17;break}throw h="POST ".concat(s," ").concat(d.status," (").concat(d.statusText,") target:").concat(u),f.error_type&&(h+=" error_type: ".concat(f.error_type)),new Error(h);case 17:return n.abrupt("return",f);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n,e){return d(n,"20161101","StartRecording",{channel_id:e,expire_time:3600})}function m(n,e){return d(n,"20161101","StopRecording",{channel_id:e})}function p(n,e,t,r,i){var a={channel_id:e,recv_connection_id:t,rid:r};return i&&(a.send_connection_id=i),d(n,"20201005","RequestRtpStream",a)}function v(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),d(n,"20201005","ResetRtpStream",i)}function x(n,e,t,r,i,a){var o={channel_id:e,recv_connection_id:t,spotlight_focus_rid:r,spotlight_unfocus_rid:i};return a&&(o.send_connection_id=a),d(n,"20211215","RequestSpotlightRid",o)}function j(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),d(n,"20211215","ResetSpotlightRid",i)}var C=t(3458),g=t(5893),b=function(){var n=(0,i.C)((function(n){return n.channelId})),e=(0,i.C)((function(n){return n.apiUrl})),t=(0,i.T)(),r=function(){var r=(0,s.Z)(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h(e,n);case 3:i=r.sent,t((0,C.du)("POST successed. response: ".concat(JSON.stringify(i)))),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),r.t0 instanceof Error&&t((0,C.i8)(r.t0.message));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:r})})},y=function(){var n=(0,i.C)((function(n){return n.channelId})),e=(0,i.C)((function(n){return n.apiUrl})),t=(0,i.T)(),r=function(){var r=(0,s.Z)(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,m(e,n);case 3:i=r.sent,t((0,C.du)("POST successed. response: ".concat(JSON.stringify(i)))),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),r.t0 instanceof Error&&t((0,C.i8)(r.t0.message));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:r})})},Z=t(1608),N=t(1555),I=t(6986),T=t(6316),S=t(1477),k=function(){var n=(0,i.C)((function(n){return n.audio})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"audio",children:(0,g.jsx)(T.Z,{type:"switch",name:"audio",label:"audio",checked:n,onChange:function(n){r((0,C.$p)(n.target.checked))},disabled:t})})},R=t(1341),w=t(469),O=t(8459),P=function(){var n=(0,i.C)((function(n){return n.audioBitRate})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,g.jsx)(R.Z,{children:"audioBitRate:"}),(0,g.jsx)(w.Z,{name:"audioBitRate",value:n,onChange:function(n){(0,S.nu)(n.target.value)&&r((0,C.VY)(n.target.value))},disabled:t,children:O.xR.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},E=function(){var n=(0,i.C)((function(n){return n.audioCodecType})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,g.jsx)(R.Z,{children:"audioCodecType:"}),(0,g.jsx)(w.Z,{name:"audioCodecType",value:n,onChange:function(n){(0,S.yP)(n.target.value)&&r((0,C.PQ)(n.target.value))},disabled:t,children:O.o1.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},_=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(k,{})}),n.audioCodecType?(0,g.jsx)(N.Z,{children:(0,g.jsx)(E,{})}):null,n.audioBitRate?(0,g.jsx)(N.Z,{children:(0,g.jsx)(P,{})}):null]})},D=t(511),V=function(){var n=(0,i.T)();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){n((0,C.pI)())}})})},B=function(){var n=(0,i.C)((function(n){return n.audioInput})),e=(0,i.C)((function(n){return n.audioInputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioInput",children:[(0,g.jsx)(R.Z,{children:"audioInput:"}),(0,g.jsxs)(w.Z,{name:"audioInput",value:n,onChange:function(n){t((0,C.hS)(n.target.value)),t((0,C.Lb)())},disabled:0===e.length,children:[(0,g.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))]})]})},A=function(){var n=(0,i.C)((function(n){return n.audioOutput})),e=(0,i.C)((function(n){return n.audioOutputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,g.jsx)(R.Z,{children:"audioOutput:"}),(0,g.jsxs)(w.Z,{name:"audioOutput",value:n,onChange:function(n){t((0,C.SV)(n.target.value))},disabled:0===e.length,children:[(0,g.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))]})]})},F=function(){var n=(0,i.C)((function(n){return n.videoInput})),e=(0,i.C)((function(n){return n.videoInputDevices})),t=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoInput",children:[(0,g.jsx)(R.Z,{children:"videoInput:"}),(0,g.jsxs)(w.Z,{name:"videoInput",value:n,onChange:function(n){t((0,C.lZ)(n.target.value)),t((0,C.Lb)())},disabled:0===e.length,children:[(0,g.jsx)("option",{value:"",children:"\u672a\u6307\u5b9a"}),e.map((function(n){return(0,g.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))]})]})},M=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[n.audioInput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(B,{})}):null,n.videoInput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(F,{})}):null,n.audioOutput?(0,g.jsx)(N.Z,{children:(0,g.jsx)(A,{})}):null,(0,g.jsx)(V,{})]})},U=function(){var n=(0,i.C)((function(n){return n.audioTrack})),e=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"audioTrack",children:(0,g.jsx)(T.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:n,onChange:function(n){e((0,C.XP)(n.target.checked))}})})},J=function(){var n=(0,i.C)((function(n){return n.cameraDevice})),e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.video})),r=!(e?e.video:t),a=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,g.jsx)(T.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:n,onChange:function(n){a((0,C.gF)(n.target.checked))},disabled:r})})},H=function(){var n=(0,i.C)((function(n){return n.displayResolution})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,g.jsx)(R.Z,{children:"displayResolution:"}),(0,g.jsx)(w.Z,{name:"displayResolution",value:n,onChange:function(n){(0,S.ko)(n.target.value)&&e((0,C.I$)(n.target.value))},children:O.hJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},q=function(){var n=(0,i.C)((function(n){return n.micDevice})),e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.audio})),r=!(e?e.audio:t),a=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"micDevice",children:(0,g.jsx)(T.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:n,onChange:function(n){a((0,C.vX)(n.target.checked))},disabled:r})})},z=function(){var n=(0,i.C)((function(n){return n.videoTrack})),e=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"videoTrack",children:(0,g.jsx)(T.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:n,onChange:function(n){e((0,C.e_)(n.target.checked))}})})},G=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[n.displayResolution?(0,g.jsx)(N.Z,{children:(0,g.jsx)(H,{})}):null,n.micDevice?(0,g.jsx)(N.Z,{children:(0,g.jsx)(q,{})}):null,n.cameraDevice?(0,g.jsx)(N.Z,{children:(0,g.jsx)(J,{})}):null,n.audioTrack?(0,g.jsx)(N.Z,{children:(0,g.jsx)(U,{})}):null,n.videoTrack?(0,g.jsx)(N.Z,{children:(0,g.jsx)(z,{})}):null]})},L=t(6518),Q=function(){var n=(0,i.T)();return(0,g.jsx)("div",{className:"col-auto mb-1",children:(0,g.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){n((0,C.Lb)())}})})},X=function(){var n=(0,i.C)((function(n){return n.aspectRatio})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"aspectRatio",children:[(0,g.jsx)(R.Z,{children:"aspectRatio:"}),(0,g.jsx)(w.Z,{name:"aspectRatio",value:n,onChange:function(n){(0,S.vG)(n.target.value)&&e((0,C.EG)(n.target.value))},children:O.Ii.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},W=function(){var n=(0,i.C)((function(n){return n.audioContentHint})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,g.jsx)(R.Z,{children:"audioContentHint:"}),(0,g.jsx)(w.Z,{name:"audioContentHint",value:n,onChange:function(n){(0,S.ej)(n.target.value)&&e((0,C.mK)(n.target.value))},children:O.nT.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},$=function(){var n=(0,i.C)((function(n){return n.autoGainControl})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,g.jsx)(R.Z,{children:"autoGainControl:"}),(0,g.jsx)(w.Z,{name:"autoGainControl",value:n,onChange:function(n){(0,S.Ee)(n.target.value)&&e((0,C.yn)(n.target.value))},children:O.iN.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Y=t(6897),K=function(){var n=(0,i.C)((function(n){return n.blurRadius})),e=(0,i.C)((function(n){return n.mediaType})),t=(0,i.T)(),r="getUserMedia"!==e||!Y.s.isSupported();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,g.jsx)(R.Z,{children:"blurRadius:"}),(0,g.jsx)(w.Z,{value:n,onChange:function(n){(0,S.Jx)(n.target.value)&&t((0,C.bH)(n.target.value))},disabled:r,children:O.G_.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n||r?"\u672a\u6307\u5b9a":n},n)}))})]})},nn=function(){var n=(0,i.C)((function(n){return n.echoCancellation})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,g.jsx)(R.Z,{children:"echoCancellation:"}),(0,g.jsx)(w.Z,{name:"echoCancellation",value:n,onChange:function(n){(0,S.Tp)(n.target.value)&&e((0,C.LN)(n.target.value))},children:O.PS.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},en=function(){var n=(0,i.C)((function(n){return n.echoCancellationType})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,g.jsx)(R.Z,{children:"echoCancellationType:"}),(0,g.jsx)(w.Z,{name:"echoCancellationType",value:n,onChange:function(n){(0,S.Gn)(n.target.value)&&e((0,C.lW)(n.target.value))},children:O.cJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},tn=function(){var n=(0,i.C)((function(n){return n.frameRate})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"frameRate",children:[(0,g.jsx)(R.Z,{children:"frameRate:"}),(0,g.jsx)(w.Z,{name:"frameRate",value:n,onChange:function(n){(0,S.F9)(n.target.value)&&e((0,C.co)(n.target.value))},children:O.YX.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},rn=t(7690),an=function(){var n=(0,i.C)((function(n){return n.mediaProcessorsNoiseSuppression})),e=(0,i.C)((function(n){return n.mediaType})),t=(0,i.T)(),r="getUserMedia"!==e||!rn.b.isSupported();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"mediaProcessorsNoiseSuppression",children:(0,g.jsx)(T.Z,{type:"switch",name:"mediaProcessorsNoiseSuppression",label:"mediaProcessorsNoiseSuppression",checked:n,onChange:function(n){t((0,C.rv)(n.target.checked))},disabled:r})})},on=function(){var n=(0,i.C)((function(n){return n.noiseSuppression})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,g.jsx)(R.Z,{children:"noiseSuppression:"}),(0,g.jsx)(w.Z,{name:"noiseSuppression",value:n,onChange:function(n){(0,S.E7)(n.target.value)&&e((0,C.fj)(n.target.value))},children:O.ad.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},cn=function(){var n=(0,i.C)((function(n){return n.resizeMode})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"resizeMode",children:[(0,g.jsx)(R.Z,{children:"resizeMode:"}),(0,g.jsx)(w.Z,{name:"resizeMode",value:n,onChange:function(n){(0,S.gV)(n.target.value)&&e((0,C.P6)(n.target.value))},children:O.L4.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},sn=function(){var n=(0,i.C)((function(n){return n.resolution})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"resolution",children:[(0,g.jsx)(R.Z,{children:"resolution:"}),(0,g.jsx)(w.Z,{name:"resolution",value:n,onChange:function(n){(0,S.zM)(n.target.value)&&e((0,C.Ik)(n.target.value))},children:O.Vf.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},un=function(){var n=(0,i.C)((function(n){return n.videoContentHint})),e=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,g.jsx)(R.Z,{children:"videoContentHint:"}),(0,g.jsx)(w.Z,{name:"videoContentHint",value:n,onChange:function(n){(0,S.s2)(n.target.value)&&e((0,C.w6)(n.target.value))},children:O.QO.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},ln=function(){var n=(0,r.useState)(!0),e=n[0],t=n[1],a=(0,i.C)((function(n){return n.displaySettings})),o=[""!==(0,i.C)((function(n){return n.audioContentHint})),""!==(0,i.C)((function(n){return n.autoGainControl})),""!==(0,i.C)((function(n){return n.noiseSuppression})),""!==(0,i.C)((function(n){return n.echoCancellation})),""!==(0,i.C)((function(n){return n.echoCancellationType})),""!==(0,i.C)((function(n){return n.videoContentHint})),""!==(0,i.C)((function(n){return n.resolution})),""!==(0,i.C)((function(n){return n.frameRate})),""!==(0,i.C)((function(n){return n.blurRadius})),(0,i.C)((function(n){return n.mediaProcessorsNoiseSuppression}))].some((function(n){return n})),c=["btn-collapse-options"];e&&c.push("collapsed"),o&&c.push("fw-bold");return(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)("a",{href:"#",className:c.join(" "),onClick:function(n){n.preventDefault(),t(!e)},children:"Media options"})}),(0,g.jsx)(L.Z,{in:!e,children:(0,g.jsxs)("div",{children:[a.audioConstraints?(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(W,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)($,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(on,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(nn,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(en,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(an,{})})]}):null,a.videoConstraints?(0,g.jsxs)(Z.Z,{className:"form-row",children:[(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(un,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(sn,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(tn,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(X,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(cn,{})}),(0,g.jsx)(N.Z,{className:"col-auto",children:(0,g.jsx)(K,{})})]}):null,(0,g.jsx)(Q,{})]})})]})},dn=t(4184),fn=t.n(dn),hn=t(5697),mn=t.n(hn),pn=t(4716),vn=(0,t(6611).Z)("form-floating"),xn=t(6792),jn=t(1377);const Cn=r.forwardRef((({bsPrefix:n,className:e,id:t,...i},a)=>{const{controlId:o}=(0,r.useContext)(jn.Z);return n=(0,xn.vE)(n,"form-range"),(0,g.jsx)("input",{...i,type:"range",ref:a,className:fn()(e,n),id:t||o})}));Cn.displayName="FormRange";var gn=Cn;const bn=r.forwardRef((({bsPrefix:n,className:e,as:t="small",muted:r,...i},a)=>(n=(0,xn.vE)(n,"form-text"),(0,g.jsx)(t,{...i,ref:a,className:fn()(e,n,r&&"text-muted")}))));bn.displayName="FormText";var yn=bn;const Zn=r.forwardRef(((n,e)=>(0,g.jsx)(T.Z,{...n,ref:e,type:"switch"})));Zn.displayName="Switch";var Nn=Object.assign(Zn,{Input:T.Z.Input,Label:T.Z.Label});const In=r.forwardRef((({bsPrefix:n,className:e,children:t,controlId:r,label:i,...a},o)=>(n=(0,xn.vE)(n,"form-floating"),(0,g.jsxs)(I.Z,{ref:o,className:fn()(e,n),controlId:r,...a,children:[t,(0,g.jsx)("label",{htmlFor:r,children:i})]}))));In.displayName="FloatingLabel";var Tn=In;const Sn={_ref:mn().any,validated:mn().bool,as:mn().elementType},kn=r.forwardRef((({className:n,validated:e,as:t="form",...r},i)=>(0,g.jsx)(t,{...r,ref:i,className:fn()(n,e&&"was-validated")})));kn.displayName="Form",kn.propTypes=Sn;var Rn=Object.assign(kn,{Group:I.Z,Control:pn.Z,Floating:vn,Check:T.Z,Switch:Nn,Label:R.Z,Text:yn,Range:gn,Select:w.Z,FloatingLabel:Tn}),wn=function(){var n=(0,i.C)((function(n){return n.mediaType})),e=(0,i.C)((function(n){return n.fakeVolume})),t=(0,i.T)();return"fakeMedia"!==n?null:(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,g.jsx)(R.Z,{children:"fakeVolume:"}),(0,g.jsx)(Rn.Range,{min:"0",max:"1",step:"0.25",value:e,onChange:function(n){t((0,C.eW)(n.target.value))}})]})},On=function(n){var e=n.label,t=n.disabled,r=n.onChange,i=n.mediaType;return(0,g.jsx)(T.Z,{type:"radio",inline:!0,id:e,label:e,value:e,checked:i===e,onChange:r,disabled:t})},Pn=function(){var n=(0,i.C)((function(n){return n.soraContents.connectionStatus})),e=(0,i.C)((function(n){return n.mediaType})),t=(0,S.nh)(n),r=(0,i.T)(),a=function(n){(0,S.nm)(n.target.value)&&r((0,C.y5)(n.target.value))};return(0,g.jsxs)(I.Z,{className:"form-inline flex-wrap",children:[(0,g.jsx)(R.Z,{children:"mediaType:"}),(0,g.jsx)(On,{label:"getUserMedia",mediaType:e,disabled:t,onChange:a}),(0,g.jsx)(On,{label:"getDisplayMedia",mediaType:e,disabled:t,onChange:a}),(0,g.jsx)(On,{label:"fakeMedia",mediaType:e,disabled:t,onChange:a})]})},En=function(){return(0,i.C)((function(n){return n.displaySettings})).mediaType?(0,g.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(Pn,{})}),(0,g.jsx)(N.Z,{children:(0,g.jsx)(wn,{})})]}):null},_n=t(3050),Dn=function(){var n=(0,i.C)((function(n){return n.simulcastRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,g.jsx)(R.Z,{children:"simulcastRid:"}),(0,g.jsx)(w.Z,{name:"simulcastRid",value:n,onChange:function(n){(0,S.zG)(n.target.value)&&r((0,C.vM)(n.target.value))},disabled:t,children:O.WJ.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Vn=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsx)(Z.Z,{xs:"auto",className:"form-row",children:n.simulcastRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Dn,{})}):null})},Bn=function(){var n=(0,i.C)((function(n){return n.spotlightFocusRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,g.jsx)(R.Z,{children:"spotlightFocusRid:"}),(0,g.jsx)(w.Z,{value:n,onChange:function(n){(0,S.iF)(n.target.value)&&r((0,C.CV)(n.target.value))},disabled:t,children:O.I7.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},An=function(){var n=(0,i.C)((function(n){return n.spotlightNumber})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,g.jsx)(R.Z,{children:"spotlightNumber:"}),(0,g.jsx)(w.Z,{value:n,onChange:function(n){(0,S.EQ)(n.target.value)&&r((0,C.TT)(n.target.value))},disabled:t,children:O.Xr.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Fn=function(){var n=(0,i.C)((function(n){return n.spotlightUnfocusRid})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,g.jsx)(R.Z,{children:"spotlightUnfocusRid:"}),(0,g.jsx)(w.Z,{value:n,onChange:function(n){(0,S.iF)(n.target.value)&&r((0,C.qV)(n.target.value))},disabled:t,children:O.I7.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Mn=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{xs:"auto",className:"form-row",children:[n.spotlightNumber?(0,g.jsx)(N.Z,{children:(0,g.jsx)(An,{})}):null,n.spotlightFocusRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Bn,{})}):null,n.spotlightUnfocusRid?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Fn,{})}):null]})},Un=function(){var n=(0,i.C)((function(n){return n.video})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsx)(I.Z,{className:"form-inline",controlId:"video",children:(0,g.jsx)(T.Z,{type:"switch",name:"video",label:"video",checked:n,onChange:function(n){r((0,C.ge)(n.target.checked))},disabled:t})})},Jn=O.Q5.slice();Jn.splice(O.Q5.indexOf("15000")+1,0,"support-message");var Hn=function(){var n=(0,i.C)((function(n){return n.videoBitRate})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,g.jsx)(R.Z,{children:"videoBitRate:"}),(0,g.jsx)(w.Z,{name:"videoBitRate",value:n,onChange:function(n){(0,S.Uz)(n.target.value)&&r((0,C.as)(n.target.value))},disabled:t,children:Jn.map((function(n){var e=n;return""===n?e="\u672a\u6307\u5b9a":"support-message"===n&&(e="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,g.jsx)("option",{value:n,disabled:"support-message"===n,children:e},n)}))})]})},qn=function(){var n=(0,i.C)((function(n){return n.videoCodecType})),e=(0,i.C)((function(n){return n.soraContents.connectionStatus})),t=(0,S.nh)(e),r=(0,i.T)();return(0,g.jsxs)(I.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,g.jsx)(R.Z,{children:"videoCodecType:"}),(0,g.jsx)(w.Z,{name:"videoCodecType",value:n,onChange:function(n){(0,S.ou)(n.target.value)&&r((0,C.h2)(n.target.value))},disabled:t,children:O.Sh.map((function(n){return(0,g.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},zn=function(){var n=(0,i.C)((function(n){return n.displaySettings}));return(0,g.jsxs)(Z.Z,{className:"form-row",xs:"auto",children:[(0,g.jsx)(N.Z,{children:(0,g.jsx)(Un,{})}),n.videoCodecType?(0,g.jsx)(N.Z,{children:(0,g.jsx)(qn,{})}):null,n.videoBitRate?(0,g.jsx)(N.Z,{children:(0,g.jsx)(Hn,{})}):null]})},Gn=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.apiUrl})),r=(0,i.C)((function(n){return n.channelId})),a=(0,i.T)(),o=function(){var i=(0,s.Z)(l().mark((function i(){var o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,p(t,r,e.connectionId,n.rid);case 5:o=i.sent,a((0,C.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:o})})},Ln=function(){var n=(0,r.useRef)(null),e=(0,r.useRef)(null),t=(0,i.C)((function(n){return n.soraContents.sora})),a=(0,i.C)((function(n){return n.channelId})),o=(0,i.C)((function(n){return n.apiUrl})),c=(0,i.T)();if(null===t||void 0===t||!t.connectionId)return null;var u=function(){var r=(0,s.Z)(l().mark((function r(){var i,s,u;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==t&&void 0!==t&&t.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==n.current&&null!==e.current){r.next=4;break}return r.abrupt("return");case 4:return i=n.current.value,s=e.current.value,r.prev=6,r.next=9,x(o,a,t.connectionId,i,s);case 9:u=r.sent,c((0,C.du)("POST successed. response: ".concat(JSON.stringify(u)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&c((0,C.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsxs)(I.Z,{className:"form-inline",children:[(0,g.jsx)(w.Z,{ref:n,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,g.jsx)(w.Z,{ref:e,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:u})]})})},Qn=function(){var n=(0,i.C)((function(n){return n.soraContents.sora})),e=(0,i.C)((function(n){return n.channelId})),t=(0,i.C)((function(n){return n.apiUrl})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,v(t,e,n.connectionId);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:a})})},Xn=function(){var n=(0,i.C)((function(n){return n.soraContents.sora})),e=(0,i.C)((function(n){return n.channelId})),t=(0,i.C)((function(n){return n.apiUrl})),r=(0,i.T)(),a=function(){var i=(0,s.Z)(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==n&&void 0!==n&&n.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,j(t,e,n.connectionId);case 5:a=i.sent,r((0,C.du)("POST successed. response: ".concat(JSON.stringify(a)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&r((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:a})})},Wn=t(9550),$n=function(n){return(0,g.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,g.jsx)("p",{id:n.id,className:"mx-2 p-1",children:n.text}),(0,g.jsx)("div",{className:"border-left border-secondary",children:(0,g.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(e){(0,S.f7)(n.text),e.currentTarget.blur()},children:(0,g.jsx)(Wn.R,{})})})]})},Yn=function(n){var e=n.localVideo,t=n.connectionId,r=n.clientId;return(0,g.jsxs)(g.Fragment,{children:[t?(0,g.jsx)($n,{id:e?"local-video-connection-id":void 0,text:t}):null,null!==r&&void 0!==r&&t!==r?(0,g.jsx)($n,{id:e?"local-video-client-id":void 0,text:r}):null]})},Kn=t(9499);function ne(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var ee=function(n){var e,t=n.displayResolution,i=n.stream,a=n.mute,o=n.audioOutput,c=n.setHeight,s=(0,r.useRef)(null),u=(0,S.fl)(t);return(0,r.useEffect)((function(){var n=new ResizeObserver((function(n){n.forEach((function(n){c(n.contentRect.height)}))}));return s.current&&(o&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),n.observe(s.current)),function(){n.disconnect()}}),[]),(0,r.useEffect)((function(){s.current&&a&&(s.current.muted=!0)}),[a]),(0,r.useEffect)((function(){var n;s.current&&i?(i.getVideoTracks().forEach((function(e){n=e.enabled,e.enabled=!1})),s.current.onloadedmetadata=function(e){i.getVideoTracks().forEach((function(e){void 0!==n&&(e.enabled=n)}))},s.current.srcObject=i,o&&i.getAudioTracks().length>0&&s.current.setSinkId(o)):s.current&&null===i&&(s.current.srcObject=null)}),[i]),o&&null!==(e=s.current)&&void 0!==e&&e.setSinkId&&i&&i.getAudioTracks().length>0&&s.current.setSinkId(o),(0,g.jsx)("video",{id:n.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:a,ref:s,width:0<u.width?u.width:void 0,height:0<u.height?u.height:void 0})},te=r.memo((function(n){return(0,g.jsx)(ee,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(t),!0).forEach((function(e){(0,Kn.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n))}));function re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function ie(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?re(Object(t),!0).forEach((function(e){(0,Kn.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var ae=2.5,oe=10,ce="#CCCCCC";function se(n,e,t){n.beginPath(),n.fillStyle=e,n.fillRect(0,t,25,oe),n.closePath()}function ue(n,e){var t=Math.ceil(e/12.5),r=e-oe;se(n,ce,r);for(var i=0;i<t;i++)se(n,ce,r=r-oe-ae)}var le=function(n){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(0!==n.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(n.stream),i=t.createAnalyser();i.fftSize=2048;var a=i.frequencyBinCount,o=new Uint8Array(a);r.connect(i);var c=null;return function n(){c=requestAnimationFrame(n),i.getByteTimeDomainData(o);var t=Array.from(o),r=Math.max.apply(null,t)-128,a=e.current;if(null!==a){var s=a.getContext("2d");null!==s&&(s.clearRect(0,0,25,a.height),s.save(),ue(s,a.height),function(n,e,t){for(var r=e*t,i=Math.ceil(r/12.5),a=0;a<i;a++)se(n,"#000000",e-oe*(a+1)-ae*a)}(s,a.height,r/128),s.restore())}}(),function(){t&&t.close(),c&&cancelAnimationFrame(c)}}}),[n.stream]),(0,g.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},de=function(n){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n=e.current;if(null!==n){var t=n.getContext("2d");null!==t&&(t.clearRect(0,0,25,n.height),t.save(),ue(t,n.height),t.restore())}}),[]),(0,g.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},fe=r.memo((function(n){return n.micDevice&&0<n.stream.getAudioTracks().length?(0,g.jsx)(le,ie({},n)):(0,g.jsx)(de,ie({},n))})),he=function(){var n=(0,r.useState)(0),e=n[0],t=n[1],a=(0,i.C)((function(n){return n.audioOutput})),o=(0,i.C)((function(n){return n.displayResolution})),c=(0,i.C)((function(n){return n.focusedSpotlightConnectionIds})),s=(0,i.C)((function(n){return n.soraContents.connectionId})),u=(0,i.C)((function(n){return n.soraContents.localMediaStream})),l=(0,i.C)((function(n){return n.micDevice})),d=s&&c[s];return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"d-flex",children:(0,g.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(d?" spotlight-focused":""),children:[(0,g.jsx)(te,{stream:u,setHeight:t,audioOutput:a,displayResolution:o,localVideo:!0,mute:!0}),null!==u?(0,g.jsx)(fe,{micDevice:l,stream:u,height:e}):null]})})})},me=function(){var n=(0,i.C)((function(n){return n.soraContents.connectionId})),e=(0,i.C)((function(n){return n.soraContents.clientId})),t=(0,i.C)((function(n){return n.simulcast})),r=(0,i.C)((function(n){return n.spotlight})),a=(0,i.C)((function(n){return n.role}));return(0,g.jsx)("div",{className:"row my-1",children:(0,g.jsxs)("div",{className:"col-auto",children:[(0,g.jsxs)("div",{className:"video-status mb-1",children:[null!==n||null!==e?(0,g.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,g.jsx)(Yn,{connectionId:n,clientId:e,localVideo:!0})}):null,null!==n&&!r&&t&&"sendonly"!==a?(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Gn,{rid:"r0"}),(0,g.jsx)(Gn,{rid:"r1"}),(0,g.jsx)(Gn,{rid:"r2"}),(0,g.jsx)(Qn,{})]}):null,null!==n&&r?(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Ln,{}),(0,g.jsx)(Xn,{})]}):null]}),"recvonly"!==a?(0,g.jsx)(he,{}):null]})})},pe=t(2640),ve=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.apiUrl})),r=(0,i.C)((function(n){return n.channelId})),a=(0,i.T)(),o=function(){var i=(0,s.Z)(l().mark((function i(){var o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,p(t,r,e.connectionId,n.rid,n.sendConnectionId);case 5:o=i.sent,a((0,C.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:o})},xe=function(n){var e=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,i.C)((function(n){return n.soraContents.sora})),o=(0,i.C)((function(n){return n.channelId})),c=(0,i.C)((function(n){return n.apiUrl})),u=(0,i.T)();if(null===a||void 0===a||!a.connectionId)return null;var d=function(){var r=(0,s.Z)(l().mark((function r(){var i,s,d;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==a&&void 0!==a&&a.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==e.current&&null!==t.current){r.next=4;break}return r.abrupt("return");case 4:return i=e.current.value,s=t.current.value,r.prev=6,r.next=9,x(c,o,a.connectionId,i,s,n.sendConnectionId);case 9:d=r.sent,u((0,C.du)("POST successed. response: ".concat(JSON.stringify(d)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),r.t0 instanceof Error&&u((0,C.i8)(r.t0.message));case 16:case"end":return r.stop()}}),r,null,[[6,13]])})));return function(){return r.apply(this,arguments)}}();return(0,g.jsx)("div",{className:"mx-1",children:(0,g.jsxs)(I.Z,{className:"form-inline",children:[(0,g.jsx)(w.Z,{ref:e,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,g.jsx)(w.Z,{ref:t,children:O.I7.map((function(n){return""===n?null:(0,g.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,g.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:d})]})})},je=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.C)((function(n){return n.apiUrl})),a=(0,i.T)(),o=function(){var i=(0,s.Z)(l().mark((function i(){var o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,v(r,t,e.connectionId,n.sendConnectionId);case 5:o=i.sent,a((0,C.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:o})},Ce=function(n){var e=(0,i.C)((function(n){return n.soraContents.sora})),t=(0,i.C)((function(n){return n.channelId})),r=(0,i.C)((function(n){return n.apiUrl})),a=(0,i.T)(),o=function(){var i=(0,s.Z)(l().mark((function i(){var o;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==e&&void 0!==e&&e.connectionId){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,j(r,t,e.connectionId,n.sendConnectionId);case 5:o=i.sent,a((0,C.du)("POST successed. response: ".concat(JSON.stringify(o)))),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(2),i.t0 instanceof Error&&a((0,C.i8)(i.t0.message));case 12:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(){return i.apply(this,arguments)}}();return(0,g.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:o})};function ge(n,e,t){if(null!==e){var r=[];return"video"===t?r=e.getVideoTracks().map((function(n){return n.id})):"audio"===t&&(r=e.getAudioTracks().map((function(n){return n.id}))),n.find((function(n){if(n.id&&!n.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in n){var e=n;return e.trackIdentifier&&r.includes(e.trackIdentifier)}return!1}))}}var be=function(n){var e=(0,i.C)((function(n){return n.soraContents.statsReport})),t=(0,i.C)((function(n){return n.soraContents.prevStatsReport})),r=ge(e,n.stream,n.type),a=ge(t,n.stream,n.type);if(!r)return null;var o=r.jitterBufferDelay,c=r.jitterBufferEmittedCount;a&&(o=r.jitterBufferDelay-a.jitterBufferDelay,c=r.jitterBufferEmittedCount-a.jitterBufferEmittedCount);var s=Math.floor(o/c*1e3),u="normal-jitter-buffer";return 500<s?u="critical-jitter-buffer":300<s?u="danger-jitter-buffer":100<s&&(u="warning-jitter-buffer"),(0,g.jsx)("div",{className:"btn btn-sm mx-1 ".concat(u),children:(0,g.jsxs)("span",{children:[n.type,": ",s]})})};function ye(n,e){var t="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(!n)return;if("string"===typeof n)return Ze(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ze(n,e)}(n))||e&&n&&"number"===typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return o=n.done,n},e:function(n){c=!0,a=n},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw a}}}}function Ze(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ne(n,e){if(null===e)return[];var t,r=e.getTracks().map((function(n){return n.id})),i=[],a=ye(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if((!o.id||o.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in o){var c=o;c.trackIdentifier&&r.includes(c.trackIdentifier)&&i.push(c)}}}catch(s){a.e(s)}finally{a.f()}return i}var Ie=function(n){var e=(0,i.C)((function(n){return n.showStats})),t=(0,i.C)((function(n){return n.soraContents.statsReport})),r=(0,i.C)((function(n){return n.soraContents.prevStatsReport}));if(!e)return null;var a=Ne(t,n.stream),o=Ne(r,n.stream);return(0,g.jsx)(g.Fragment,{children:a.map((function(n){var e=0,t=0,r=o.find((function(e){return n.id===e.id}));return r&&(e=n.jitterBufferDelay-r.jitterBufferDelay,t=n.jitterBufferEmittedCount-r.jitterBufferEmittedCount),(0,g.jsx)("div",{children:(0,g.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(n).map((function(n){var e=(0,pe.Z)(n,2),t=e[0],r=e[1];return(0,g.jsxs)("li",{children:[(0,g.jsxs)("strong",{children:[t,":"]})," ",r]},t)})),(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(e/t*1e3)]})]})},n.id)}))})},Te=function(n){var e=(0,r.useState)(0),t=e[0],a=e[1],o=(0,i.C)((function(n){return n.audioOutput})),c=(0,i.C)((function(n){return n.displayResolution})),s=(0,i.C)((function(n){return n.focusedSpotlightConnectionIds})),u=(0,i.C)((function(n){return n.multistream})),l=(0,i.C)((function(n){return n.mute})),d=(0,i.C)((function(n){return n.simulcast})),f=(0,i.C)((function(n){return n.spotlight})),h=n.stream.id&&s[n.stream.id];return(0,g.jsxs)("div",{className:"col-auto",children:[(0,g.jsxs)("div",{className:"video-status",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,g.jsx)(Yn,{connectionId:n.stream.id}),(0,g.jsx)(be,{type:"audio",stream:n.stream}),(0,g.jsx)(be,{type:"video",stream:n.stream})]}),(0,g.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[!f&&u&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ve,{rid:"r0",sendConnectionId:n.stream.id}),(0,g.jsx)(ve,{rid:"r1",sendConnectionId:n.stream.id}),(0,g.jsx)(ve,{rid:"r2",sendConnectionId:n.stream.id}),(0,g.jsx)(je,{sendConnectionId:n.stream.id})]}):null,f&&u&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(xe,{sendConnectionId:n.stream.id}),(0,g.jsx)(Ce,{sendConnectionId:n.stream.id})]}):null]})]}),(0,g.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,g.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(h?" spotlight-focused":""),children:[(0,g.jsx)(te,{stream:n.stream,setHeight:a,mute:l,audioOutput:o,displayResolution:c}),(0,g.jsx)(fe,{micDevice:!0,stream:n.stream,height:t})]}),(0,g.jsx)(Ie,{stream:n.stream})]})]})},Se=function(){var n=(0,i.C)((function(n){return n.soraContents.remoteMediaStreams}));return(0,g.jsx)("div",{className:"row my-2",children:n.map((function(n){return(0,g.jsx)(Te,{stream:n},n.id)}))})},ke=function(){var n=(0,i.C)((function(n){return n.debug})),e=(0,i.C)((function(n){return n.role}));return(0,g.jsxs)("div",{className:n?"col-devtools col-6":"col-devtools col-12",children:[(0,g.jsx)(a.P,{}),(0,g.jsx)(D.P,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(_,{}),(0,g.jsx)(zn,{}),(0,g.jsx)(Mn,{}),(0,g.jsx)(Vn,{}),(0,g.jsx)(_n.V,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(En,{}),(0,g.jsx)(ln,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(M,{}),(0,g.jsx)(G,{}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)(o.l,{}),(0,g.jsx)(c.c,{}),(0,g.jsx)(b,{}),(0,g.jsx)(y,{})]}),(0,g.jsx)("hr",{className:"hr-form"}),(0,g.jsx)(me,{}),"recvonly"===e||"sendrecv"===e?(0,g.jsx)(Se,{}):null]})}}}]);