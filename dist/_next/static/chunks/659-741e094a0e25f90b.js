"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{9659:function(n,e,t){t.d(e,{d:function(){return Re}});var r=t(5893),i=t(7294),o=t(8324),a=t(7167),c=t(846),s=t(204),u=t(8520),l=t.n(u);function d(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function f(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){d(o,r,i,a,c,"next",n)}function c(n){d(o,r,i,a,c,"throw",n)}a(void 0)}))}}function m(n,e,t,r){return v.apply(this,arguments)}function v(){return(v=f(l().mark((function n(e,t,r,i){var o,a,c,s,u,d,f,m;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=window.location.protocol,a="https:"==o?"443":"3000",c="https:"==o?"api":"",s="".concat(o,"//").concat(window.location.hostname,":").concat(a,"/").concat(c),null!==e&&(s=e),u="Sora_".concat(t,".").concat(r),n.next=8,fetch(s,{method:"POST",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":u},mode:"cors"});case 8:return d=n.sent,n.next=11,d.json();case 11:if(f=n.sent,d.ok){n.next=17;break}throw m="POST ".concat(s," ").concat(d.status," (").concat(d.statusText,") target:").concat(u),f.error_type&&(m+=" error_type: ".concat(f.error_type)),new Error(m);case 17:return n.abrupt("return",f);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n,e){return m(n,"20161101","StartRecording",{channel_id:e,expire_time:3600})}function x(n,e){return m(n,"20161101","StopRecording",{channel_id:e})}function p(n,e,t,r,i){var o={channel_id:e,recv_connection_id:t,rid:r};return i&&(o.send_connection_id=i),m(n,"20201005","RequestRtpStream",o)}function j(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),m(n,"20201005","ResetRtpStream",i)}function C(n,e,t,r,i,o){var a={channel_id:e,recv_connection_id:t,spotlight_focus_rid:r,spotlight_unfocus_rid:i};return o&&(a.send_connection_id=o),m(n,"20211215","RequestSpotlightRid",a)}function g(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),m(n,"20211215","ResetSpotlightRid",i)}var b=t(9693);function y(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var I=function(){var n,e=(0,o.C)((function(n){return n.channelId})),t=(0,o.C)((function(n){return n.apiUrl})),i=(0,o.T)(),a=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h(t,e);case 3:r=n.sent,i((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),o=n.t0,(null!=(a=Error)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&i((0,b.i8)(n.t0.message));case 10:case"end":return n.stop()}var o,a}),n,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){y(o,r,i,a,c,"next",n)}function c(n){y(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:a})})};function Z(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var S=function(){var n,e=(0,o.C)((function(n){return n.channelId})),t=(0,o.C)((function(n){return n.apiUrl})),i=(0,o.T)(),a=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x(t,e);case 3:r=n.sent,i((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),o=n.t0,(null!=(a=Error)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&i((0,b.i8)(n.t0.message));case 10:case"end":return n.stop()}var o,a}),n,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){Z(o,r,i,a,c,"next",n)}function c(n){Z(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:a})})},N=t(4051),w=t(1555),T=t(6986),k=t(6316),R=t(9384),O=function(){var n=(0,o.C)((function(n){return n.audio})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"audio",children:(0,r.jsx)(k.Z,{type:"switch",name:"audio",label:"audio",checked:n,onChange:function(n){i((0,b.$p)(n.target.checked))},disabled:t})})},P=t(1341),E=t(469),_=t(2660),V=function(){var n=(0,o.C)((function(n){return n.audioBitRate})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,r.jsx)(P.Z,{children:"audioBitRate:"}),(0,r.jsx)(E.Z,{name:"audioBitRate",value:n,onChange:function(n){(0,R.nu)(n.target.value)&&i((0,b.VY)(n.target.value))},disabled:t,children:_.xR.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},D=function(){var n=(0,o.C)((function(n){return n.audioCodecType})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,r.jsx)(P.Z,{children:"audioCodecType:"}),(0,r.jsx)(E.Z,{name:"audioCodecType",value:n,onChange:function(n){(0,R.yP)(n.target.value)&&i((0,b.PQ)(n.target.value))},disabled:t,children:_.o1.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},B=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(N.Z,{className:"form-row",xs:"auto",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(O,{})}),n.audioCodecType?(0,r.jsx)(w.Z,{children:(0,r.jsx)(D,{})}):null,n.audioBitRate?(0,r.jsx)(w.Z,{children:(0,r.jsx)(V,{})}):null]})},F=t(8186),U=function(){var n=(0,o.T)();return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){n((0,b.pI)())}})})},A=function(){var n=(0,o.C)((function(n){return n.audioInput})),e=(0,o.C)((function(n){return n.audioInputDevices})),t=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioInput",children:[(0,r.jsx)(P.Z,{children:"audioInput:"}),(0,r.jsx)(E.Z,{name:"audioInput",value:n,onChange:function(n){t((0,b.hS)(n.target.value)),t((0,b.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},M=function(){var n=(0,o.C)((function(n){return n.audioOutput})),e=(0,o.C)((function(n){return n.audioOutputDevices})),t=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,r.jsx)(P.Z,{children:"audioOutput:"}),(0,r.jsx)(E.Z,{name:"audioOutput",value:n,onChange:function(n){t((0,b.SV)(n.target.value))},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},J=function(){var n=(0,o.C)((function(n){return n.videoInput})),e=(0,o.C)((function(n){return n.videoInputDevices})),t=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoInput",children:[(0,r.jsx)(P.Z,{children:"videoInput:"}),(0,r.jsx)(E.Z,{name:"videoInput",value:n,onChange:function(n){t((0,b.lZ)(n.target.value)),t((0,b.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},H=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(N.Z,{className:"form-row",xs:"auto",children:[n.audioInput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(A,{})}):null,n.videoInput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(J,{})}):null,n.audioOutput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(M,{})}):null,(0,r.jsx)(U,{})]})},q=function(){var n=(0,o.C)((function(n){return n.audioTrack})),e=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"audioTrack",children:(0,r.jsx)(k.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:n,onChange:function(n){e((0,b.XP)(n.target.checked))}})})},L=function(){var n=(0,o.C)((function(n){return n.cameraDevice})),e=(0,o.C)((function(n){return n.soraContents.sora})),t=(0,o.C)((function(n){return n.video})),i=!(e?e.video:t),a=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,r.jsx)(k.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:n,onChange:function(n){a((0,b.gF)(n.target.checked))},disabled:i})})},G=function(){var n=(0,o.C)((function(n){return n.displayResolution})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,r.jsx)(P.Z,{children:"displayResolution:"}),(0,r.jsx)(E.Z,{name:"displayResolution",value:n,onChange:function(n){(0,R.ko)(n.target.value)&&e((0,b.I$)(n.target.value))},children:_.hJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},z=function(){var n=(0,o.C)((function(n){return n.micDevice})),e=(0,o.C)((function(n){return n.soraContents.sora})),t=(0,o.C)((function(n){return n.audio})),i=!(e?e.audio:t),a=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"micDevice",children:(0,r.jsx)(k.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:n,onChange:function(n){a((0,b.vX)(n.target.checked))},disabled:i})})},Q=function(){var n=(0,o.C)((function(n){return n.videoTrack})),e=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"videoTrack",children:(0,r.jsx)(k.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:n,onChange:function(n){e((0,b.e_)(n.target.checked))}})})},X=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(N.Z,{className:"form-row",xs:"auto",children:[n.displayResolution?(0,r.jsx)(w.Z,{children:(0,r.jsx)(G,{})}):null,n.micDevice?(0,r.jsx)(w.Z,{children:(0,r.jsx)(z,{})}):null,n.cameraDevice?(0,r.jsx)(w.Z,{children:(0,r.jsx)(L,{})}):null,n.audioTrack?(0,r.jsx)(w.Z,{children:(0,r.jsx)(q,{})}):null,n.videoTrack?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Q,{})}):null]})},W=t(6518),Y=function(){var n=(0,o.T)();return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){n((0,b.Lb)())}})})},$=function(){var n=(0,o.C)((function(n){return n.audioContentHint})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,r.jsx)(P.Z,{children:"audioContentHint:"}),(0,r.jsx)(E.Z,{name:"audioContentHint",value:n,onChange:function(n){(0,R.ej)(n.target.value)&&e((0,b.mK)(n.target.value))},children:_.nT.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},K=function(){var n=(0,o.C)((function(n){return n.autoGainControl})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,r.jsx)(P.Z,{children:"autoGainControl:"}),(0,r.jsx)(E.Z,{name:"autoGainControl",value:n,onChange:function(n){(0,R.Ee)(n.target.value)&&e((0,b.yn)(n.target.value))},children:_.iN.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},nn=function(){var n=(0,o.C)((function(n){return n.echoCancellation})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,r.jsx)(P.Z,{children:"echoCancellation:"}),(0,r.jsx)(E.Z,{name:"echoCancellation",value:n,onChange:function(n){(0,R.Tp)(n.target.value)&&e((0,b.LN)(n.target.value))},children:_.PS.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},en=function(){var n=(0,o.C)((function(n){return n.echoCancellationType})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,r.jsx)(P.Z,{children:"echoCancellationType:"}),(0,r.jsx)(E.Z,{name:"echoCancellationType",value:n,onChange:function(n){(0,R.Gn)(n.target.value)&&e((0,b.lW)(n.target.value))},children:_.cJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},tn=function(){var n=(0,o.C)((function(n){return n.frameRate})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"frameRate",children:[(0,r.jsx)(P.Z,{children:"frameRate:"}),(0,r.jsx)(E.Z,{name:"frameRate",value:n,onChange:function(n){(0,R.F9)(n.target.value)&&e((0,b.co)(n.target.value))},children:_.YX.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},rn=function(){var n=(0,o.C)((function(n){return n.noiseSuppression})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,r.jsx)(P.Z,{children:"noiseSuppression:"}),(0,r.jsx)(E.Z,{name:"noiseSuppression",value:n,onChange:function(n){(0,R.E7)(n.target.value)&&e((0,b.fj)(n.target.value))},children:_.ad.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},on=function(){var n=(0,o.C)((function(n){return n.resolution})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"resolution",children:[(0,r.jsx)(P.Z,{children:"resolution:"}),(0,r.jsx)(E.Z,{name:"resolution",value:n,onChange:function(n){(0,R.zM)(n.target.value)&&e((0,b.Ik)(n.target.value))},children:_.Vf.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},an=function(){var n=(0,o.C)((function(n){return n.videoContentHint})),e=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,r.jsx)(P.Z,{children:"videoContentHint:"}),(0,r.jsx)(E.Z,{name:"videoContentHint",value:n,onChange:function(n){(0,R.s2)(n.target.value)&&e((0,b.w6)(n.target.value))},children:_.QO.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},cn=function(){var n=(0,i.useState)(!0),e=n[0],t=n[1],a=(0,o.C)((function(n){return n.displaySettings})),c=[""!==(0,o.C)((function(n){return n.audioContentHint})),""!==(0,o.C)((function(n){return n.autoGainControl})),""!==(0,o.C)((function(n){return n.noiseSuppression})),""!==(0,o.C)((function(n){return n.echoCancellation})),""!==(0,o.C)((function(n){return n.echoCancellationType})),""!==(0,o.C)((function(n){return n.videoContentHint})),""!==(0,o.C)((function(n){return n.resolution})),""!==(0,o.C)((function(n){return n.frameRate}))].some((function(n){return n})),s=["btn-collapse-options"];e&&s.push("collapsed"),c&&s.push("fw-bold");return(0,r.jsxs)(N.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)("a",{href:"#",className:s.join(" "),onClick:function(n){n.preventDefault(),t(!e)},children:"Media options"})}),(0,r.jsx)(W.Z,{in:!e,children:(0,r.jsxs)("div",{children:[a.audioConstraints?(0,r.jsxs)(N.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)($,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(K,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(rn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(nn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(en,{})})]}):null,a.videoConstraints?(0,r.jsxs)(N.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(an,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(on,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(tn,{})})]}):null,(0,r.jsx)(Y,{})]})})]})},sn=t(4184),un=t.n(sn),ln=t(5697),dn=t.n(ln),fn=t(4716),mn=(0,t(6611).Z)("form-floating"),vn=t(6792),hn=t(1377);const xn=i.forwardRef((({bsPrefix:n,className:e,id:t,...o},a)=>{const{controlId:c}=(0,i.useContext)(hn.Z);return n=(0,vn.vE)(n,"form-range"),(0,r.jsx)("input",{...o,type:"range",ref:a,className:un()(e,n),id:t||c})}));xn.displayName="FormRange";var pn=xn;const jn=i.forwardRef((({bsPrefix:n,className:e,as:t="small",muted:i,...o},a)=>(n=(0,vn.vE)(n,"form-text"),(0,r.jsx)(t,{...o,ref:a,className:un()(e,n,i&&"text-muted")}))));jn.displayName="FormText";var Cn=jn;const gn=i.forwardRef(((n,e)=>(0,r.jsx)(k.Z,{...n,ref:e,type:"switch"})));gn.displayName="Switch";var bn=Object.assign(gn,{Input:k.Z.Input,Label:k.Z.Label});const yn=i.forwardRef((({bsPrefix:n,className:e,children:t,controlId:i,label:o,...a},c)=>(n=(0,vn.vE)(n,"form-floating"),(0,r.jsxs)(T.Z,{ref:c,className:un()(e,n),controlId:i,...a,children:[t,(0,r.jsx)("label",{htmlFor:i,children:o})]}))));yn.displayName="FloatingLabel";var In=yn;const Zn={_ref:dn().any,validated:dn().bool,as:dn().elementType},Sn=i.forwardRef((({className:n,validated:e,as:t="form",...i},o)=>(0,r.jsx)(t,{...i,ref:o,className:un()(n,e&&"was-validated")})));Sn.displayName="Form",Sn.propTypes=Zn;var Nn=Object.assign(Sn,{Group:T.Z,Control:fn.Z,Floating:mn,Check:k.Z,Switch:bn,Label:P.Z,Text:Cn,Range:pn,Select:E.Z,FloatingLabel:In}),wn=function(){var n=(0,o.C)((function(n){return n.mediaType})),e=(0,o.C)((function(n){return n.fakeVolume})),t=(0,o.T)();return"fakeMedia"!==n?null:(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,r.jsx)(P.Z,{children:"fakeVolume:"}),(0,r.jsx)(Nn.Range,{min:"0",max:"1",step:"0.1",value:e,onChange:function(n){t((0,b.eW)(n.target.value))}})]})},Tn=function(n){var e=n.label,t=n.disabled,i=n.onChange,o=n.mediaType;return(0,r.jsx)(k.Z,{type:"radio",inline:!0,id:e,label:e,value:e,checked:o===e,onChange:i,disabled:t})},kn=function(){var n=(0,o.C)((function(n){return n.soraContents.connectionStatus})),e=(0,o.C)((function(n){return n.mediaType})),t=(0,R.nh)(n),i=(0,o.T)(),a=function(n){(0,R.nm)(n.target.value)&&i((0,b.y5)(n.target.value))};return(0,r.jsxs)(T.Z,{className:"form-inline flex-wrap",children:[(0,r.jsx)(P.Z,{children:"mediaType:"}),(0,r.jsx)(Tn,{label:"getUserMedia",mediaType:e,disabled:t,onChange:a}),(0,r.jsx)(Tn,{label:"getDisplayMedia",mediaType:e,disabled:t,onChange:a}),(0,r.jsx)(Tn,{label:"fakeMedia",mediaType:e,disabled:t,onChange:a})]})},Rn=function(){return(0,o.C)((function(n){return n.displaySettings})).mediaType?(0,r.jsxs)(N.Z,{xs:"auto",className:"form-row",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(kn,{})}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(wn,{})})]}):null},On=t(4295),Pn=function(){var n=(0,o.C)((function(n){return n.simulcastRid})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,r.jsx)(P.Z,{children:"simulcastRid:"}),(0,r.jsx)(E.Z,{name:"simulcastRid",value:n,onChange:function(n){(0,R.zG)(n.target.value)&&i((0,b.vM)(n.target.value))},disabled:t,children:_.WJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},En=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsx)(N.Z,{xs:"auto",className:"form-row",children:n.simulcastRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Pn,{})}):null})},_n=function(){var n=(0,o.C)((function(n){return n.spotlightFocusRid})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,r.jsx)(P.Z,{children:"spotlightFocusRid:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.iF)(n.target.value)&&i((0,b.CV)(n.target.value))},disabled:t,children:_.I7.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Vn=function(){var n=(0,o.C)((function(n){return n.spotlightNumber})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,r.jsx)(P.Z,{children:"spotlightNumber:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.EQ)(n.target.value)&&i((0,b.TT)(n.target.value))},disabled:t,children:_.Xr.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Dn=function(){var n=(0,o.C)((function(n){return n.spotlightUnfocusRid})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,r.jsx)(P.Z,{children:"spotlightUnfocusRid:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.iF)(n.target.value)&&i((0,b.qV)(n.target.value))},disabled:t,children:_.I7.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Bn=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(N.Z,{xs:"auto",className:"form-row",children:[n.spotlightNumber?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Vn,{})}):null,n.spotlightFocusRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(_n,{})}):null,n.spotlightUnfocusRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Dn,{})}):null]})},Fn=function(){var n=(0,o.C)((function(n){return n.video})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"video",children:(0,r.jsx)(k.Z,{type:"switch",name:"video",label:"video",checked:n,onChange:function(n){i((0,b.ge)(n.target.checked))},disabled:t})})},Un=_.Q5.slice();Un.splice(_.Q5.indexOf("15000")+1,0,"support-message");var An=function(){var n=(0,o.C)((function(n){return n.videoBitRate})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,r.jsx)(P.Z,{children:"videoBitRate:"}),(0,r.jsx)(E.Z,{name:"videoBitRate",value:n,onChange:function(n){(0,R.Uz)(n.target.value)&&i((0,b.as)(n.target.value))},disabled:t,children:Un.map((function(n){var e=n;return""===n?e="\u672a\u6307\u5b9a":"support-message"===n&&(e="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,r.jsx)("option",{value:n,disabled:"support-message"===n,children:e},n)}))})]})},Mn=function(){var n=(0,o.C)((function(n){return n.videoCodecType})),e=(0,o.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,o.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,r.jsx)(P.Z,{children:"videoCodecType:"}),(0,r.jsx)(E.Z,{name:"videoCodecType",value:n,onChange:function(n){(0,R.ou)(n.target.value)&&i((0,b.h2)(n.target.value))},disabled:t,children:_.Sh.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Jn=function(){var n=(0,o.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(N.Z,{className:"form-row",xs:"auto",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(Fn,{})}),n.videoCodecType?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Mn,{})}):null,n.videoBitRate?(0,r.jsx)(w.Z,{children:(0,r.jsx)(An,{})}):null]})};function Hn(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var qn=function(n){var e,t=(0,o.C)((function(n){return n.soraContents.sora})),i=(0,o.C)((function(n){return n.apiUrl})),a=(0,o.C)((function(n){return n.channelId})),c=(0,o.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p(i,a,t.connectionId,n.rid);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](o):o instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var o,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){Hn(o,r,i,a,c,"next",n)}function c(n){Hn(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:s})})};function Ln(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Gn=function(){var n=(0,i.useRef)(null),e=(0,i.useRef)(null),t=(0,o.C)((function(n){return n.soraContents.sora})),a=(0,o.C)((function(n){return n.channelId})),c=(0,o.C)((function(n){return n.apiUrl})),s=(0,o.T)();if(!(null===t||void 0===t?void 0:t.connectionId))return null;var u,d=(u=l().mark((function r(){var i,o,u;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==n.current&&null!==e.current){r.next=4;break}return r.abrupt("return");case 4:return i=n.current.value,o=e.current.value,r.prev=6,r.next=9,C(c,a,t.connectionId,i,o);case 9:u=r.sent,s((0,b.du)("POST successed. response: ".concat(JSON.stringify(u)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),l=r.t0,(null!=(d=Error)&&"undefined"!==typeof Symbol&&d[Symbol.hasInstance]?d[Symbol.hasInstance](l):l instanceof d)&&s((0,b.i8)(r.t0.message));case 16:case"end":return r.stop()}var l,d}),r,null,[[6,13]])})),function(){var n=this,e=arguments;return new Promise((function(t,r){var i=u.apply(n,e);function o(n){Ln(i,t,r,o,a,"next",n)}function a(n){Ln(i,t,r,o,a,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsxs)(T.Z,{className:"form-inline",children:[(0,r.jsx)(E.Z,{ref:n,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,r.jsx)(E.Z,{ref:e,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:d})]})})};function zn(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Qn=function(){var n,e=(0,o.C)((function(n){return n.soraContents.sora})),t=(0,o.C)((function(n){return n.channelId})),i=(0,o.C)((function(n){return n.apiUrl})),a=(0,o.T)(),c=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.connectionId){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,j(i,t,e.connectionId);case 5:r=n.sent,a((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),o=n.t0,(null!=(c=Error)&&"undefined"!==typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](o):o instanceof c)&&a((0,b.i8)(n.t0.message));case 12:case"end":return n.stop()}var o,c}),n,null,[[2,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){zn(o,r,i,a,c,"next",n)}function c(n){zn(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:c})})};function Xn(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Wn=function(){var n,e=(0,o.C)((function(n){return n.soraContents.sora})),t=(0,o.C)((function(n){return n.channelId})),i=(0,o.C)((function(n){return n.apiUrl})),a=(0,o.T)(),c=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.connectionId){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,g(i,t,e.connectionId);case 5:r=n.sent,a((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),o=n.t0,(null!=(c=Error)&&"undefined"!==typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](o):o instanceof c)&&a((0,b.i8)(n.t0.message));case 12:case"end":return n.stop()}var o,c}),n,null,[[2,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){Xn(o,r,i,a,c,"next",n)}function c(n){Xn(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:c})})},Yn=t(3498),$n=function(n){return(0,r.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,r.jsx)("p",{id:n.id,className:"mx-2 p-1",children:n.text}),(0,r.jsx)("div",{className:"border-left border-secondary",children:(0,r.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(e){(0,R.f7)(n.text),e.currentTarget.blur()},children:(0,r.jsx)(Yn.R,{})})})]})},Kn=function(n){var e=n.localVideo,t=n.connectionId,i=n.clientId;return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)($n,{id:e?"local-video-connection-id":void 0,text:t}):null,null!==i&&void 0!==i&&t!==i?(0,r.jsx)($n,{id:e?"local-video-client-id":void 0,text:i}):null]})};function ne(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ee=function(n){var e,t=n.displayResolution,o=n.stream,a=n.mute,c=n.audioOutput,s=n.setHeight,u=(0,i.useRef)(null),l=(0,R.fl)(t);return(0,i.useEffect)((function(){var n=new ResizeObserver((function(n){n.forEach((function(n){s(n.contentRect.height)}))}));return u.current&&(c&&o&&o.getAudioTracks().length>0&&u.current.setSinkId(c),n.observe(u.current)),function(){n.disconnect()}}),[]),(0,i.useEffect)((function(){u.current&&a&&(u.current.muted=!0)}),[a]),(0,i.useEffect)((function(){var n;u.current&&o?(o.getVideoTracks().forEach((function(e){n=e.enabled,e.enabled=!1})),u.current.onloadedmetadata=function(e){o.getVideoTracks().forEach((function(e){void 0!==n&&(e.enabled=n)}))},u.current.srcObject=o,c&&o.getAudioTracks().length>0&&u.current.setSinkId(c)):u.current&&null===o&&(u.current.srcObject=null)}),[o]),c&&(null===(e=u.current)||void 0===e?void 0:e.setSinkId)&&o&&o.getAudioTracks().length>0&&u.current.setSinkId(c),(0,r.jsx)("video",{id:n.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:a,ref:u,width:0<l.width?l.width:void 0,height:0<l.height?l.height:void 0})},te=i.memo((function(n){return(0,r.jsx)(ee,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){ne(n,e,t[e])}))}return n}({},n))}));function re(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ie(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){re(n,e,t[e])}))}return n}var oe=2.5,ae=10,ce="#CCCCCC";function se(n,e,t){n.beginPath(),n.fillStyle=e,n.fillRect(0,t,25,ae),n.closePath()}function ue(n,e){var t=Math.ceil(e/12.5),r=e-ae;se(n,ce,r);for(var i=0;i<t;i++)se(n,ce,r=r-ae-oe)}var le=function(n){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(0!==n.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(n.stream),i=t.createAnalyser();i.fftSize=2048;var o=i.frequencyBinCount,a=new Uint8Array(o);r.connect(i);var c=null;return function n(){c=requestAnimationFrame(n),i.getByteTimeDomainData(a);var t=Array.from(a),r=Math.max.apply(null,t)-128,o=e.current;if(null!==o){var s=o.getContext("2d");null!==s&&(s.clearRect(0,0,25,o.height),s.save(),ue(s,o.height),function(n,e,t){for(var r=e*t,i=Math.ceil(r/12.5),o=0;o<i;o++)se(n,"#000000",e-ae*(o+1)-oe*o)}(s,o.height,r/128),s.restore())}}(),function(){t&&t.close(),c&&cancelAnimationFrame(c)}}}),[]),(0,r.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},de=function(n){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){var n=e.current;if(null!==n){var t=n.getContext("2d");null!==t&&(t.clearRect(0,0,25,n.height),t.save(),ue(t,n.height),t.restore())}}),[]),(0,r.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},fe=i.memo((function(n){return n.micDevice&&0<n.stream.getAudioTracks().length?(0,r.jsx)(le,ie({},n)):(0,r.jsx)(de,ie({},n))})),me=function(){var n=(0,i.useState)(0),e=n[0],t=n[1],a=(0,o.C)((function(n){return n.audioOutput})),c=(0,o.C)((function(n){return n.displayResolution})),s=(0,o.C)((function(n){return n.focusedSpotlightConnectionIds})),u=(0,o.C)((function(n){return n.soraContents.connectionId})),l=(0,o.C)((function(n){return n.soraContents.localMediaStream})),d=(0,o.C)((function(n){return n.micDevice})),f=u&&s[u];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(f?" spotlight-focused":""),children:[(0,r.jsx)(te,{stream:l,setHeight:t,audioOutput:a,displayResolution:c,localVideo:!0,mute:!0}),null!==l?(0,r.jsx)(fe,{micDevice:d,stream:l,height:e}):null]})})})},ve=function(){var n=(0,o.C)((function(n){return n.soraContents.connectionId})),e=(0,o.C)((function(n){return n.soraContents.clientId})),t=(0,o.C)((function(n){return n.simulcast})),i=(0,o.C)((function(n){return n.spotlight})),a=(0,o.C)((function(n){return n.role}));return(0,r.jsx)("div",{className:"row my-1",children:(0,r.jsxs)("div",{className:"col-auto",children:[(0,r.jsxs)("div",{className:"video-status mb-1",children:[null!==n||null!==e?(0,r.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,r.jsx)(Kn,{connectionId:n,clientId:e,localVideo:!0})}):null,null!==n&&!i&&t&&"sendonly"!==a?(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(qn,{rid:"r0"}),(0,r.jsx)(qn,{rid:"r1"}),(0,r.jsx)(qn,{rid:"r2"}),(0,r.jsx)(Qn,{})]}):null,null!==n&&i?(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(Gn,{}),(0,r.jsx)(Wn,{})]}):null]}),"recvonly"!==a?(0,r.jsx)(me,{}):null]})})};function he(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var xe=function(n){var e,t=(0,o.C)((function(n){return n.soraContents.sora})),i=(0,o.C)((function(n){return n.apiUrl})),a=(0,o.C)((function(n){return n.channelId})),c=(0,o.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p(i,a,t.connectionId,n.rid,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](o):o instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var o,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){he(o,r,i,a,c,"next",n)}function c(n){he(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:s})};function pe(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var je=function(n){var e=(0,i.useRef)(null),t=(0,i.useRef)(null),a=(0,o.C)((function(n){return n.soraContents.sora})),c=(0,o.C)((function(n){return n.channelId})),s=(0,o.C)((function(n){return n.apiUrl})),u=(0,o.T)();if(!(null===a||void 0===a?void 0:a.connectionId))return null;var d,f=(d=l().mark((function r(){var i,o,d;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===a||void 0===a?void 0:a.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==e.current&&null!==t.current){r.next=4;break}return r.abrupt("return");case 4:return i=e.current.value,o=t.current.value,r.prev=6,r.next=9,C(s,c,a.connectionId,i,o,n.sendConnectionId);case 9:d=r.sent,u((0,b.du)("POST successed. response: ".concat(JSON.stringify(d)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),l=r.t0,(null!=(f=Error)&&"undefined"!==typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)&&u((0,b.i8)(r.t0.message));case 16:case"end":return r.stop()}var l,f}),r,null,[[6,13]])})),function(){var n=this,e=arguments;return new Promise((function(t,r){var i=d.apply(n,e);function o(n){pe(i,t,r,o,a,"next",n)}function a(n){pe(i,t,r,o,a,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsxs)(T.Z,{className:"form-inline",children:[(0,r.jsx)(E.Z,{ref:e,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,r.jsx)(E.Z,{ref:t,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:f})]})})};function Ce(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var ge=function(n){var e,t=(0,o.C)((function(n){return n.soraContents.sora})),i=(0,o.C)((function(n){return n.channelId})),a=(0,o.C)((function(n){return n.apiUrl})),c=(0,o.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j(a,i,t.connectionId,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](o):o instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var o,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){Ce(o,r,i,a,c,"next",n)}function c(n){Ce(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:s})};function be(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var ye=function(n){var e,t=(0,o.C)((function(n){return n.soraContents.sora})),i=(0,o.C)((function(n){return n.channelId})),a=(0,o.C)((function(n){return n.apiUrl})),c=(0,o.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g(a,i,t.connectionId,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](o):o instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var o,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(n){be(o,r,i,a,c,"next",n)}function c(n){be(o,r,i,a,c,"throw",n)}a(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:s})};function Ie(n,e,t){if(null!==e){var r=[];return"video"===t?r=e.getVideoTracks().map((function(n){return n.id})):"audio"===t&&(r=e.getAudioTracks().map((function(n){return n.id}))),n.find((function(n){if(n.id&&!n.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in n){var e=n;return e.trackIdentifier&&r.includes(e.trackIdentifier)}return!1}))}}var Ze=function(n){var e=(0,o.C)((function(n){return n.soraContents.statsReport})),t=(0,o.C)((function(n){return n.soraContents.prevStatsReport})),i=Ie(e,n.stream,n.type),a=Ie(t,n.stream,n.type);if(!i)return null;var c=i.jitterBufferDelay,s=i.jitterBufferEmittedCount;a&&(c=i.jitterBufferDelay-a.jitterBufferDelay,s=i.jitterBufferEmittedCount-a.jitterBufferEmittedCount);var u=Math.floor(c/s*1e3),l="normal-jitter-buffer";return 500<u?l="critical-jitter-buffer":300<u?l="danger-jitter-buffer":100<u&&(l="warning-jitter-buffer"),(0,r.jsx)("div",{className:"btn btn-sm mx-1 ".concat(l),children:(0,r.jsxs)("span",{children:[n.type,": ",u]})})};function Se(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ne(n,e){if(null===e)return[];var t=e.getTracks().map((function(n){return n.id})),r=[],i=!0,o=!1,a=void 0;try{for(var c,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;if((!u.id||u.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in u){var l=u;l.trackIdentifier&&t.includes(l.trackIdentifier)&&r.push(l)}}}catch(d){o=!0,a=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}var we=function(n){var e=(0,o.C)((function(n){return n.showStats})),t=(0,o.C)((function(n){return n.soraContents.statsReport})),i=(0,o.C)((function(n){return n.soraContents.prevStatsReport}));if(!e)return null;var a=Ne(t,n.stream),c=Ne(i,n.stream);return(0,r.jsx)(r.Fragment,{children:a.map((function(n){var e=0,t=0,i=c.find((function(e){return n.id===e.id}));return i&&(e=n.jitterBufferDelay-i.jitterBufferDelay,t=n.jitterBufferEmittedCount-i.jitterBufferEmittedCount),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(n).map((function(n){var e=Se(n,2),t=e[0],i=e[1];return(0,r.jsxs)("li",{children:[(0,r.jsxs)("strong",{children:[t,":"]})," ",i]},t)})),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(e/t*1e3)]})]})},n.id)}))})},Te=function(n){var e=(0,i.useState)(0),t=e[0],a=e[1],c=(0,o.C)((function(n){return n.audioOutput})),s=(0,o.C)((function(n){return n.displayResolution})),u=(0,o.C)((function(n){return n.focusedSpotlightConnectionIds})),l=(0,o.C)((function(n){return n.multistream})),d=(0,o.C)((function(n){return n.mute})),f=(0,o.C)((function(n){return n.simulcast})),m=(0,o.C)((function(n){return n.spotlight})),v=n.stream.id&&u[n.stream.id];return(0,r.jsxs)("div",{className:"col-auto",children:[(0,r.jsxs)("div",{className:"video-status",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(Kn,{connectionId:n.stream.id}),(0,r.jsx)(Ze,{type:"audio",stream:n.stream}),(0,r.jsx)(Ze,{type:"video",stream:n.stream})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[!m&&l&&f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(xe,{rid:"r0",sendConnectionId:n.stream.id}),(0,r.jsx)(xe,{rid:"r1",sendConnectionId:n.stream.id}),(0,r.jsx)(xe,{rid:"r2",sendConnectionId:n.stream.id}),(0,r.jsx)(ge,{sendConnectionId:n.stream.id})]}):null,m&&l&&f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(je,{sendConnectionId:n.stream.id}),(0,r.jsx)(ye,{sendConnectionId:n.stream.id})]}):null]})]}),(0,r.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,r.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(v?" spotlight-focused":""),children:[(0,r.jsx)(te,{stream:n.stream,setHeight:a,mute:d,audioOutput:c,displayResolution:s}),(0,r.jsx)(fe,{micDevice:!0,stream:n.stream,height:t})]}),(0,r.jsx)(we,{stream:n.stream})]})]})},ke=function(){var n=(0,o.C)((function(n){return n.soraContents.remoteMediaStreams}));return(0,r.jsx)("div",{className:"row my-2",children:n.map((function(n){return(0,r.jsx)(Te,{stream:n},n.id)}))})},Re=function(){var n=(0,o.C)((function(n){return n.debug})),e=(0,o.C)((function(n){return n.role}));return(0,r.jsxs)("div",{className:n?"col-devtools col-6":"col-devtools col-12",children:[(0,r.jsx)(a.P,{}),(0,r.jsx)(F.P,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(B,{}),(0,r.jsx)(Jn,{}),(0,r.jsx)(Bn,{}),(0,r.jsx)(En,{}),(0,r.jsx)(On.V,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(Rn,{}),(0,r.jsx)(cn,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(H,{}),(0,r.jsx)(X,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)(c.l,{}),(0,r.jsx)(s.c,{}),(0,r.jsx)(I,{}),(0,r.jsx)(S,{})]}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(ve,{}),"recvonly"===e||"sendrecv"===e?(0,r.jsx)(ke,{}):null]})}}}]);