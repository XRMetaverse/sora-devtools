"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{6235:function(n,e,t){t.d(e,{d:function(){return Pe}});var r=t(5893),i=t(7294),a=t(8324),o=t(7167),c=t(846),s=t(204),u=t(8520),l=t.n(u);function d(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function f(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){d(a,r,i,o,c,"next",n)}function c(n){d(a,r,i,o,c,"throw",n)}o(void 0)}))}}function m(n,e,t,r){return v.apply(this,arguments)}function v(){return(v=f(l().mark((function n(e,t,r,i){var a,o,c,s,u,d,f,m;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.location.protocol,o="https:"==a?"443":"3000",c="https:"==a?"api":"",s="".concat(a,"//").concat(window.location.hostname,":").concat(o,"/").concat(c),null!==e&&(s=e),u="Sora_".concat(t,".").concat(r),n.next=8,fetch(s,{method:"POST",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json","x-sora-target":u},mode:"cors"});case 8:return d=n.sent,n.next=11,d.json();case 11:if(f=n.sent,d.ok){n.next=17;break}throw m="POST ".concat(s," ").concat(d.status," (").concat(d.statusText,") target:").concat(u),f.error_type&&(m+=" error_type: ".concat(f.error_type)),new Error(m);case 17:return n.abrupt("return",f);case 18:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n,e){return m(n,"20161101","StartRecording",{channel_id:e,expire_time:3600})}function x(n,e){return m(n,"20161101","StopRecording",{channel_id:e})}function p(n,e,t,r,i){var a={channel_id:e,recv_connection_id:t,rid:r};return i&&(a.send_connection_id=i),m(n,"20201005","RequestRtpStream",a)}function j(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),m(n,"20201005","ResetRtpStream",i)}function C(n,e,t,r,i,a){var o={channel_id:e,recv_connection_id:t,spotlight_focus_rid:r,spotlight_unfocus_rid:i};return a&&(o.send_connection_id=a),m(n,"20211215","RequestSpotlightRid",o)}function g(n,e,t,r){var i={channel_id:e,recv_connection_id:t};return r&&(i.send_connection_id=r),m(n,"20211215","ResetSpotlightRid",i)}var b=t(9693);function y(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var I=function(){var n,e=(0,a.C)((function(n){return n.channelId})),t=(0,a.C)((function(n){return n.apiUrl})),i=(0,a.T)(),o=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h(t,e);case 3:r=n.sent,i((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a=n.t0,(null!=(o=Error)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](a):a instanceof o)&&i((0,b.i8)(n.t0.message));case 10:case"end":return n.stop()}var a,o}),n,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){y(a,r,i,o,c,"next",n)}function c(n){y(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"startRec",defaultValue:"start rec",onClick:o})})};function Z(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var N=function(){var n,e=(0,a.C)((function(n){return n.channelId})),t=(0,a.C)((function(n){return n.apiUrl})),i=(0,a.T)(),o=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x(t,e);case 3:r=n.sent,i((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a=n.t0,(null!=(o=Error)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](a):a instanceof o)&&i((0,b.i8)(n.t0.message));case 10:case"end":return n.stop()}var a,o}),n,null,[[0,7]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){Z(a,r,i,o,c,"next",n)}function c(n){Z(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"stopRec",defaultValue:"stop rec",onClick:o})})},S=t(4051),w=t(1555),T=t(6986),k=t(6316),R=t(9384),O=function(){var n=(0,a.C)((function(n){return n.audio})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"audio",children:(0,r.jsx)(k.Z,{type:"switch",name:"audio",label:"audio",checked:n,onChange:function(n){i((0,b.$p)(n.target.checked))},disabled:t})})},P=t(1341),E=t(469),_=t(2660),V=function(){var n=(0,a.C)((function(n){return n.audioBitRate})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,r.jsx)(P.Z,{children:"audioBitRate:"}),(0,r.jsx)(E.Z,{name:"audioBitRate",value:n,onChange:function(n){(0,R.nu)(n.target.value)&&i((0,b.VY)(n.target.value))},disabled:t,children:_.xR.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},D=function(){var n=(0,a.C)((function(n){return n.audioCodecType})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioBitRate",children:[(0,r.jsx)(P.Z,{children:"audioCodecType:"}),(0,r.jsx)(E.Z,{name:"audioCodecType",value:n,onChange:function(n){(0,R.yP)(n.target.value)&&i((0,b.PQ)(n.target.value))},disabled:t,children:_.o1.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},B=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(S.Z,{className:"form-row",xs:"auto",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(O,{})}),n.audioCodecType?(0,r.jsx)(w.Z,{children:(0,r.jsx)(D,{})}):null,n.audioBitRate?(0,r.jsx)(w.Z,{children:(0,r.jsx)(V,{})}):null]})},F=t(8186),M=function(){var n=(0,a.T)();return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-devices",defaultValue:"update-devices",onClick:function(){n((0,b.pI)())}})})},U=function(){var n=(0,a.C)((function(n){return n.audioInput})),e=(0,a.C)((function(n){return n.audioInputDevices})),t=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioInput",children:[(0,r.jsx)(P.Z,{children:"audioInput:"}),(0,r.jsx)(E.Z,{name:"audioInput",value:n,onChange:function(n){t((0,b.hS)(n.target.value)),t((0,b.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},A=function(){var n=(0,a.C)((function(n){return n.audioOutput})),e=(0,a.C)((function(n){return n.audioOutputDevices})),t=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioOutput",children:[(0,r.jsx)(P.Z,{children:"audioOutput:"}),(0,r.jsx)(E.Z,{name:"audioOutput",value:n,onChange:function(n){t((0,b.SV)(n.target.value))},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},J=function(){var n=(0,a.C)((function(n){return n.videoInput})),e=(0,a.C)((function(n){return n.videoInputDevices})),t=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoInput",children:[(0,r.jsx)(P.Z,{children:"videoInput:"}),(0,r.jsx)(E.Z,{name:"videoInput",value:n,onChange:function(n){t((0,b.lZ)(n.target.value)),t((0,b.Lb)())},disabled:0===e.length,children:e.map((function(n){return(0,r.jsx)("option",{value:n.deviceId,children:n.label},n.deviceId)}))})]})},H=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(S.Z,{className:"form-row",xs:"auto",children:[n.audioInput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(U,{})}):null,n.videoInput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(J,{})}):null,n.audioOutput?(0,r.jsx)(w.Z,{children:(0,r.jsx)(A,{})}):null,(0,r.jsx)(M,{})]})},q=function(){var n=(0,a.C)((function(n){return n.audioTrack})),e=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"audioTrack",children:(0,r.jsx)(k.Z,{type:"switch",name:"audioTrack",label:"Enable audio track",checked:n,onChange:function(n){e((0,b.XP)(n.target.checked))}})})},z=function(){var n=(0,a.C)((function(n){return n.cameraDevice})),e=(0,a.C)((function(n){return n.soraContents.sora})),t=(0,a.C)((function(n){return n.video})),i=!(e?e.video:t),o=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"cameraDevice",children:(0,r.jsx)(k.Z,{type:"switch",name:"cameraDevice",label:"Enable camera device",checked:n,onChange:function(n){o((0,b.gF)(n.target.checked))},disabled:i})})},G=function(){var n=(0,a.C)((function(n){return n.displayResolution})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"displayResolution",children:[(0,r.jsx)(P.Z,{children:"displayResolution:"}),(0,r.jsx)(E.Z,{name:"displayResolution",value:n,onChange:function(n){(0,R.ko)(n.target.value)&&e((0,b.I$)(n.target.value))},children:_.hJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},L=function(){var n=(0,a.C)((function(n){return n.micDevice})),e=(0,a.C)((function(n){return n.soraContents.sora})),t=(0,a.C)((function(n){return n.audio})),i=!(e?e.audio:t),o=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"micDevice",children:(0,r.jsx)(k.Z,{type:"switch",name:"micDevice",label:"Enable mic device",checked:n,onChange:function(n){o((0,b.vX)(n.target.checked))},disabled:i})})},Q=function(){var n=(0,a.C)((function(n){return n.videoTrack})),e=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"videoTrack",children:(0,r.jsx)(k.Z,{type:"switch",name:"videoTrack",label:"Enable video track",checked:n,onChange:function(n){e((0,b.e_)(n.target.checked))}})})},X=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(S.Z,{className:"form-row",xs:"auto",children:[n.displayResolution?(0,r.jsx)(w.Z,{children:(0,r.jsx)(G,{})}):null,n.micDevice?(0,r.jsx)(w.Z,{children:(0,r.jsx)(L,{})}):null,n.cameraDevice?(0,r.jsx)(w.Z,{children:(0,r.jsx)(z,{})}):null,n.audioTrack?(0,r.jsx)(w.Z,{children:(0,r.jsx)(q,{})}):null,n.videoTrack?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Q,{})}):null]})},W=t(6518),Y=function(){var n=(0,a.T)();return(0,r.jsx)("div",{className:"col-auto mb-1",children:(0,r.jsx)("input",{className:"btn btn-outline-secondary",type:"button",name:"update-mediastream",defaultValue:"update-mediastream",onClick:function(){n((0,b.Lb)())}})})},$=function(){var n=(0,a.C)((function(n){return n.aspectRatio})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"aspectRatio",children:[(0,r.jsx)(P.Z,{children:"aspectRatio:"}),(0,r.jsx)(E.Z,{name:"aspectRatio",value:n,onChange:function(n){(0,R.vG)(n.target.value)&&e((0,b.EG)(n.target.value))},children:_.Ii.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},K=function(){var n=(0,a.C)((function(n){return n.audioContentHint})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"audioContentHint",children:[(0,r.jsx)(P.Z,{children:"audioContentHint:"}),(0,r.jsx)(E.Z,{name:"audioContentHint",value:n,onChange:function(n){(0,R.ej)(n.target.value)&&e((0,b.mK)(n.target.value))},children:_.nT.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},nn=function(){var n=(0,a.C)((function(n){return n.autoGainControl})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"autoGainControl",children:[(0,r.jsx)(P.Z,{children:"autoGainControl:"}),(0,r.jsx)(E.Z,{name:"autoGainControl",value:n,onChange:function(n){(0,R.Ee)(n.target.value)&&e((0,b.yn)(n.target.value))},children:_.iN.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},en=function(){var n=(0,a.C)((function(n){return n.echoCancellation})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellation",children:[(0,r.jsx)(P.Z,{children:"echoCancellation:"}),(0,r.jsx)(E.Z,{name:"echoCancellation",value:n,onChange:function(n){(0,R.Tp)(n.target.value)&&e((0,b.LN)(n.target.value))},children:_.PS.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},tn=function(){var n=(0,a.C)((function(n){return n.echoCancellationType})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"echoCancellationType",children:[(0,r.jsx)(P.Z,{children:"echoCancellationType:"}),(0,r.jsx)(E.Z,{name:"echoCancellationType",value:n,onChange:function(n){(0,R.Gn)(n.target.value)&&e((0,b.lW)(n.target.value))},children:_.cJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},rn=function(){var n=(0,a.C)((function(n){return n.frameRate})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"frameRate",children:[(0,r.jsx)(P.Z,{children:"frameRate:"}),(0,r.jsx)(E.Z,{name:"frameRate",value:n,onChange:function(n){(0,R.F9)(n.target.value)&&e((0,b.co)(n.target.value))},children:_.YX.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},an=function(){var n=(0,a.C)((function(n){return n.noiseSuppression})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"noiseSuppression",children:[(0,r.jsx)(P.Z,{children:"noiseSuppression:"}),(0,r.jsx)(E.Z,{name:"noiseSuppression",value:n,onChange:function(n){(0,R.E7)(n.target.value)&&e((0,b.fj)(n.target.value))},children:_.ad.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},on=function(){var n=(0,a.C)((function(n){return n.resizeMode})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"resizeMode",children:[(0,r.jsx)(P.Z,{children:"resizeMode:"}),(0,r.jsx)(E.Z,{name:"resizeMode",value:n,onChange:function(n){(0,R.gV)(n.target.value)&&e((0,b.P6)(n.target.value))},children:_.L4.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},cn=function(){var n=(0,a.C)((function(n){return n.resolution})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"resolution",children:[(0,r.jsx)(P.Z,{children:"resolution:"}),(0,r.jsx)(E.Z,{name:"resolution",value:n,onChange:function(n){(0,R.zM)(n.target.value)&&e((0,b.Ik)(n.target.value))},children:_.Vf.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},sn=function(){var n=(0,a.C)((function(n){return n.videoContentHint})),e=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoContentHint",children:[(0,r.jsx)(P.Z,{children:"videoContentHint:"}),(0,r.jsx)(E.Z,{name:"videoContentHint",value:n,onChange:function(n){(0,R.s2)(n.target.value)&&e((0,b.w6)(n.target.value))},children:_.QO.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},un=function(){var n=(0,i.useState)(!0),e=n[0],t=n[1],o=(0,a.C)((function(n){return n.displaySettings})),c=[""!==(0,a.C)((function(n){return n.audioContentHint})),""!==(0,a.C)((function(n){return n.autoGainControl})),""!==(0,a.C)((function(n){return n.noiseSuppression})),""!==(0,a.C)((function(n){return n.echoCancellation})),""!==(0,a.C)((function(n){return n.echoCancellationType})),""!==(0,a.C)((function(n){return n.videoContentHint})),""!==(0,a.C)((function(n){return n.resolution})),""!==(0,a.C)((function(n){return n.frameRate}))].some((function(n){return n})),s=["btn-collapse-options"];e&&s.push("collapsed"),c&&s.push("fw-bold");return(0,r.jsxs)(S.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)("a",{href:"#",className:s.join(" "),onClick:function(n){n.preventDefault(),t(!e)},children:"Media options"})}),(0,r.jsx)(W.Z,{in:!e,children:(0,r.jsxs)("div",{children:[o.audioConstraints?(0,r.jsxs)(S.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(K,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(nn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(an,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(en,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(tn,{})})]}):null,o.videoConstraints?(0,r.jsxs)(S.Z,{className:"form-row",children:[(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(sn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(cn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(rn,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)($,{})}),(0,r.jsx)(w.Z,{className:"col-auto d-flex flex-column align-items-start",children:(0,r.jsx)(on,{})})]}):null,(0,r.jsx)(Y,{})]})})]})},ln=t(4184),dn=t.n(ln),fn=t(5697),mn=t.n(fn),vn=t(4716),hn=(0,t(6611).Z)("form-floating"),xn=t(6792),pn=t(1377);const jn=i.forwardRef((({bsPrefix:n,className:e,id:t,...a},o)=>{const{controlId:c}=(0,i.useContext)(pn.Z);return n=(0,xn.vE)(n,"form-range"),(0,r.jsx)("input",{...a,type:"range",ref:o,className:dn()(e,n),id:t||c})}));jn.displayName="FormRange";var Cn=jn;const gn=i.forwardRef((({bsPrefix:n,className:e,as:t="small",muted:i,...a},o)=>(n=(0,xn.vE)(n,"form-text"),(0,r.jsx)(t,{...a,ref:o,className:dn()(e,n,i&&"text-muted")}))));gn.displayName="FormText";var bn=gn;const yn=i.forwardRef(((n,e)=>(0,r.jsx)(k.Z,{...n,ref:e,type:"switch"})));yn.displayName="Switch";var In=Object.assign(yn,{Input:k.Z.Input,Label:k.Z.Label});const Zn=i.forwardRef((({bsPrefix:n,className:e,children:t,controlId:i,label:a,...o},c)=>(n=(0,xn.vE)(n,"form-floating"),(0,r.jsxs)(T.Z,{ref:c,className:dn()(e,n),controlId:i,...o,children:[t,(0,r.jsx)("label",{htmlFor:i,children:a})]}))));Zn.displayName="FloatingLabel";var Nn=Zn;const Sn={_ref:mn().any,validated:mn().bool,as:mn().elementType},wn=i.forwardRef((({className:n,validated:e,as:t="form",...i},a)=>(0,r.jsx)(t,{...i,ref:a,className:dn()(n,e&&"was-validated")})));wn.displayName="Form",wn.propTypes=Sn;var Tn=Object.assign(wn,{Group:T.Z,Control:vn.Z,Floating:hn,Check:k.Z,Switch:In,Label:P.Z,Text:bn,Range:Cn,Select:E.Z,FloatingLabel:Nn}),kn=function(){var n=(0,a.C)((function(n){return n.mediaType})),e=(0,a.C)((function(n){return n.fakeVolume})),t=(0,a.T)();return"fakeMedia"!==n?null:(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"fakeVolume",children:[(0,r.jsx)(P.Z,{children:"fakeVolume:"}),(0,r.jsx)(Tn.Range,{min:"0",max:"1",step:"0.25",value:e,onChange:function(n){t((0,b.eW)(n.target.value))}})]})},Rn=function(n){var e=n.label,t=n.disabled,i=n.onChange,a=n.mediaType;return(0,r.jsx)(k.Z,{type:"radio",inline:!0,id:e,label:e,value:e,checked:a===e,onChange:i,disabled:t})},On=function(){var n=(0,a.C)((function(n){return n.soraContents.connectionStatus})),e=(0,a.C)((function(n){return n.mediaType})),t=(0,R.nh)(n),i=(0,a.T)(),o=function(n){(0,R.nm)(n.target.value)&&i((0,b.y5)(n.target.value))};return(0,r.jsxs)(T.Z,{className:"form-inline flex-wrap",children:[(0,r.jsx)(P.Z,{children:"mediaType:"}),(0,r.jsx)(Rn,{label:"getUserMedia",mediaType:e,disabled:t,onChange:o}),(0,r.jsx)(Rn,{label:"getDisplayMedia",mediaType:e,disabled:t,onChange:o}),(0,r.jsx)(Rn,{label:"fakeMedia",mediaType:e,disabled:t,onChange:o})]})},Pn=function(){return(0,a.C)((function(n){return n.displaySettings})).mediaType?(0,r.jsxs)(S.Z,{xs:"auto",className:"form-row",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(On,{})}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(kn,{})})]}):null},En=t(4295),_n=function(){var n=(0,a.C)((function(n){return n.simulcastRid})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"simulcastRid",children:[(0,r.jsx)(P.Z,{children:"simulcastRid:"}),(0,r.jsx)(E.Z,{name:"simulcastRid",value:n,onChange:function(n){(0,R.zG)(n.target.value)&&i((0,b.vM)(n.target.value))},disabled:t,children:_.WJ.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Vn=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsx)(S.Z,{xs:"auto",className:"form-row",children:n.simulcastRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(_n,{})}):null})},Dn=function(){var n=(0,a.C)((function(n){return n.spotlightFocusRid})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightFocusRid",children:[(0,r.jsx)(P.Z,{children:"spotlightFocusRid:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.iF)(n.target.value)&&i((0,b.CV)(n.target.value))},disabled:t,children:_.I7.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Bn=function(){var n=(0,a.C)((function(n){return n.spotlightNumber})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightNumber",children:[(0,r.jsx)(P.Z,{children:"spotlightNumber:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.EQ)(n.target.value)&&i((0,b.TT)(n.target.value))},disabled:t,children:_.Xr.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Fn=function(){var n=(0,a.C)((function(n){return n.spotlightUnfocusRid})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"spotlightUnfocusRid",children:[(0,r.jsx)(P.Z,{children:"spotlightUnfocusRid:"}),(0,r.jsx)(E.Z,{value:n,onChange:function(n){(0,R.iF)(n.target.value)&&i((0,b.qV)(n.target.value))},disabled:t,children:_.I7.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},Mn=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(S.Z,{xs:"auto",className:"form-row",children:[n.spotlightNumber?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Bn,{})}):null,n.spotlightFocusRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Dn,{})}):null,n.spotlightUnfocusRid?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Fn,{})}):null]})},Un=function(){var n=(0,a.C)((function(n){return n.video})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsx)(T.Z,{className:"form-inline",controlId:"video",children:(0,r.jsx)(k.Z,{type:"switch",name:"video",label:"video",checked:n,onChange:function(n){i((0,b.ge)(n.target.checked))},disabled:t})})},An=_.Q5.slice();An.splice(_.Q5.indexOf("15000")+1,0,"support-message");var Jn=function(){var n=(0,a.C)((function(n){return n.videoBitRate})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoBitRate",children:[(0,r.jsx)(P.Z,{children:"videoBitRate:"}),(0,r.jsx)(E.Z,{name:"videoBitRate",value:n,onChange:function(n){(0,R.Uz)(n.target.value)&&i((0,b.as)(n.target.value))},disabled:t,children:An.map((function(n){var e=n;return""===n?e="\u672a\u6307\u5b9a":"support-message"===n&&(e="\u4ee5\u4e0b\u306f\u30b5\u30dd\u30fc\u30c8\u5916\u3067\u3059"),(0,r.jsx)("option",{value:n,disabled:"support-message"===n,children:e},n)}))})]})},Hn=function(){var n=(0,a.C)((function(n){return n.videoCodecType})),e=(0,a.C)((function(n){return n.soraContents.connectionStatus})),t=(0,R.nh)(e),i=(0,a.T)();return(0,r.jsxs)(T.Z,{className:"form-inline",controlId:"videoCodecType",children:[(0,r.jsx)(P.Z,{children:"videoCodecType:"}),(0,r.jsx)(E.Z,{name:"videoCodecType",value:n,onChange:function(n){(0,R.ou)(n.target.value)&&i((0,b.h2)(n.target.value))},disabled:t,children:_.Sh.map((function(n){return(0,r.jsx)("option",{value:n,children:""===n?"\u672a\u6307\u5b9a":n},n)}))})]})},qn=function(){var n=(0,a.C)((function(n){return n.displaySettings}));return(0,r.jsxs)(S.Z,{className:"form-row",xs:"auto",children:[(0,r.jsx)(w.Z,{children:(0,r.jsx)(Un,{})}),n.videoCodecType?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Hn,{})}):null,n.videoBitRate?(0,r.jsx)(w.Z,{children:(0,r.jsx)(Jn,{})}):null]})};function zn(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Gn=function(n){var e,t=(0,a.C)((function(n){return n.soraContents.sora})),i=(0,a.C)((function(n){return n.apiUrl})),o=(0,a.C)((function(n){return n.channelId})),c=(0,a.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p(i,o,t.connectionId,n.rid);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var a,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(n){zn(a,r,i,o,c,"next",n)}function c(n){zn(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:s})})};function Ln(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Qn=function(){var n=(0,i.useRef)(null),e=(0,i.useRef)(null),t=(0,a.C)((function(n){return n.soraContents.sora})),o=(0,a.C)((function(n){return n.channelId})),c=(0,a.C)((function(n){return n.apiUrl})),s=(0,a.T)();if(!(null===t||void 0===t?void 0:t.connectionId))return null;var u,d=(u=l().mark((function r(){var i,a,u;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==n.current&&null!==e.current){r.next=4;break}return r.abrupt("return");case 4:return i=n.current.value,a=e.current.value,r.prev=6,r.next=9,C(c,o,t.connectionId,i,a);case 9:u=r.sent,s((0,b.du)("POST successed. response: ".concat(JSON.stringify(u)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),l=r.t0,(null!=(d=Error)&&"undefined"!==typeof Symbol&&d[Symbol.hasInstance]?d[Symbol.hasInstance](l):l instanceof d)&&s((0,b.i8)(r.t0.message));case 16:case"end":return r.stop()}var l,d}),r,null,[[6,13]])})),function(){var n=this,e=arguments;return new Promise((function(t,r){var i=u.apply(n,e);function a(n){Ln(i,t,r,a,o,"next",n)}function o(n){Ln(i,t,r,a,o,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsxs)(T.Z,{className:"form-inline",children:[(0,r.jsx)(E.Z,{ref:n,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,r.jsx)(E.Z,{ref:e,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRid",defaultValue:"requestSpotlightRid",onClick:d})]})})};function Xn(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Wn=function(){var n,e=(0,a.C)((function(n){return n.soraContents.sora})),t=(0,a.C)((function(n){return n.channelId})),i=(0,a.C)((function(n){return n.apiUrl})),o=(0,a.T)(),c=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.connectionId){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,j(i,t,e.connectionId);case 5:r=n.sent,o((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a=n.t0,(null!=(c=Error)&&"undefined"!==typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)&&o((0,b.i8)(n.t0.message));case 12:case"end":return n.stop()}var a,c}),n,null,[[2,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){Xn(a,r,i,o,c,"next",n)}function c(n){Xn(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSimulcastRid",defaultValue:"reset rid",onClick:c})})};function Yn(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var $n=function(){var n,e=(0,a.C)((function(n){return n.soraContents.sora})),t=(0,a.C)((function(n){return n.channelId})),i=(0,a.C)((function(n){return n.apiUrl})),o=(0,a.T)(),c=(n=l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e||void 0===e?void 0:e.connectionId){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,g(i,t,e.connectionId);case 5:r=n.sent,o((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a=n.t0,(null!=(c=Error)&&"undefined"!==typeof Symbol&&c[Symbol.hasInstance]?c[Symbol.hasInstance](a):a instanceof c)&&o((0,b.i8)(n.t0.message));case 12:case"end":return n.stop()}var a,c}),n,null,[[2,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){Yn(a,r,i,o,c,"next",n)}function c(n){Yn(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"resetAllSpotlightRid",defaultValue:"resetSpotlightRid",onClick:c})})},Kn=t(3498),ne=function(n){return(0,r.jsxs)("div",{className:"d-flex align-items-center border border-secondary rounded mx-1",children:[(0,r.jsx)("p",{id:n.id,className:"mx-2 p-1",children:n.text}),(0,r.jsx)("div",{className:"border-left border-secondary",children:(0,r.jsx)("button",{className:"btn btn-sm btn-light",onClick:function(e){(0,R.f7)(n.text),e.currentTarget.blur()},children:(0,r.jsx)(Kn.R,{})})})]})},ee=function(n){var e=n.localVideo,t=n.connectionId,i=n.clientId;return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(ne,{id:e?"local-video-connection-id":void 0,text:t}):null,null!==i&&void 0!==i&&t!==i?(0,r.jsx)(ne,{id:e?"local-video-client-id":void 0,text:i}):null]})};function te(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var re=function(n){var e,t=n.displayResolution,a=n.stream,o=n.mute,c=n.audioOutput,s=n.setHeight,u=(0,i.useRef)(null),l=(0,R.fl)(t);return(0,i.useEffect)((function(){var n=new ResizeObserver((function(n){n.forEach((function(n){s(n.contentRect.height)}))}));return u.current&&(c&&a&&a.getAudioTracks().length>0&&u.current.setSinkId(c),n.observe(u.current)),function(){n.disconnect()}}),[]),(0,i.useEffect)((function(){u.current&&o&&(u.current.muted=!0)}),[o]),(0,i.useEffect)((function(){var n;u.current&&a?(a.getVideoTracks().forEach((function(e){n=e.enabled,e.enabled=!1})),u.current.onloadedmetadata=function(e){a.getVideoTracks().forEach((function(e){void 0!==n&&(e.enabled=n)}))},u.current.srcObject=a,c&&a.getAudioTracks().length>0&&u.current.setSinkId(c)):u.current&&null===a&&(u.current.srcObject=null)}),[a]),c&&(null===(e=u.current)||void 0===e?void 0:e.setSinkId)&&a&&a.getAudioTracks().length>0&&u.current.setSinkId(c),(0,r.jsx)("video",{id:n.localVideo?"local-video":void 0,autoPlay:!0,playsInline:!0,controls:!0,muted:o,ref:u,width:0<l.width?l.width:void 0,height:0<l.height?l.height:void 0})},ie=i.memo((function(n){return(0,r.jsx)(re,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){te(n,e,t[e])}))}return n}({},n))}));function ae(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oe(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){ae(n,e,t[e])}))}return n}var ce=2.5,se=10,ue="#CCCCCC";function le(n,e,t){n.beginPath(),n.fillStyle=e,n.fillRect(0,t,25,se),n.closePath()}function de(n,e){var t=Math.ceil(e/12.5),r=e-se;le(n,ue,r);for(var i=0;i<t;i++)le(n,ue,r=r-se-ce)}var fe=function(n){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){if(0!==n.stream.getAudioTracks().length){var t=new(window.AudioContext||window.webkitAudioContext),r=t.createMediaStreamSource(n.stream),i=t.createAnalyser();i.fftSize=2048;var a=i.frequencyBinCount,o=new Uint8Array(a);r.connect(i);var c=null;return function n(){c=requestAnimationFrame(n),i.getByteTimeDomainData(o);var t=Array.from(o),r=Math.max.apply(null,t)-128,a=e.current;if(null!==a){var s=a.getContext("2d");null!==s&&(s.clearRect(0,0,25,a.height),s.save(),de(s,a.height),function(n,e,t){for(var r=e*t,i=Math.ceil(r/12.5),a=0;a<i;a++)le(n,"#000000",e-se*(a+1)-ce*a)}(s,a.height,r/128),s.restore())}}(),function(){t&&t.close(),c&&cancelAnimationFrame(c)}}}),[]),(0,r.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},me=function(n){var e=(0,i.useRef)(null);return(0,i.useEffect)((function(){var n=e.current;if(null!==n){var t=n.getContext("2d");null!==t&&(t.clearRect(0,0,25,n.height),t.save(),de(t,n.height),t.restore())}}),[]),(0,r.jsx)("canvas",{width:25,height:n.height,className:"volume-visualizer",ref:e})},ve=i.memo((function(n){return n.micDevice&&0<n.stream.getAudioTracks().length?(0,r.jsx)(fe,oe({},n)):(0,r.jsx)(me,oe({},n))})),he=function(){var n=(0,i.useState)(0),e=n[0],t=n[1],o=(0,a.C)((function(n){return n.audioOutput})),c=(0,a.C)((function(n){return n.displayResolution})),s=(0,a.C)((function(n){return n.focusedSpotlightConnectionIds})),u=(0,a.C)((function(n){return n.soraContents.connectionId})),l=(0,a.C)((function(n){return n.soraContents.localMediaStream})),d=(0,a.C)((function(n){return n.micDevice})),f=u&&s[u];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(f?" spotlight-focused":""),children:[(0,r.jsx)(ie,{stream:l,setHeight:t,audioOutput:o,displayResolution:c,localVideo:!0,mute:!0}),null!==l?(0,r.jsx)(ve,{micDevice:d,stream:l,height:e}):null]})})})},xe=function(){var n=(0,a.C)((function(n){return n.soraContents.connectionId})),e=(0,a.C)((function(n){return n.soraContents.clientId})),t=(0,a.C)((function(n){return n.simulcast})),i=(0,a.C)((function(n){return n.spotlight})),o=(0,a.C)((function(n){return n.role}));return(0,r.jsx)("div",{className:"row my-1",children:(0,r.jsxs)("div",{className:"col-auto",children:[(0,r.jsxs)("div",{className:"video-status mb-1",children:[null!==n||null!==e?(0,r.jsx)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:(0,r.jsx)(ee,{connectionId:n,clientId:e,localVideo:!0})}):null,null!==n&&!i&&t&&"sendonly"!==o?(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(Gn,{rid:"r0"}),(0,r.jsx)(Gn,{rid:"r1"}),(0,r.jsx)(Gn,{rid:"r2"}),(0,r.jsx)(Wn,{})]}):null,null!==n&&i?(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(Qn,{}),(0,r.jsx)($n,{})]}):null]}),"recvonly"!==o?(0,r.jsx)(he,{}):null]})})};function pe(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var je=function(n){var e,t=(0,a.C)((function(n){return n.soraContents.sora})),i=(0,a.C)((function(n){return n.apiUrl})),o=(0,a.C)((function(n){return n.channelId})),c=(0,a.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p(i,o,t.connectionId,n.rid,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var a,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(n){pe(a,r,i,o,c,"next",n)}function c(n){pe(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"requestSimulcastRidTo".concat(n.rid.charAt(0).toUpperCase()+n.rid.slice(1)),defaultValue:"".concat(n.rid," rid"),onClick:s})};function Ce(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var ge=function(n){var e=(0,i.useRef)(null),t=(0,i.useRef)(null),o=(0,a.C)((function(n){return n.soraContents.sora})),c=(0,a.C)((function(n){return n.channelId})),s=(0,a.C)((function(n){return n.apiUrl})),u=(0,a.T)();if(!(null===o||void 0===o?void 0:o.connectionId))return null;var d,f=(d=l().mark((function r(){var i,a,d;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===o||void 0===o?void 0:o.connectionId){r.next=2;break}return r.abrupt("return");case 2:if(null!==e.current&&null!==t.current){r.next=4;break}return r.abrupt("return");case 4:return i=e.current.value,a=t.current.value,r.prev=6,r.next=9,C(s,c,o.connectionId,i,a,n.sendConnectionId);case 9:d=r.sent,u((0,b.du)("POST successed. response: ".concat(JSON.stringify(d)))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),l=r.t0,(null!=(f=Error)&&"undefined"!==typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](l):l instanceof f)&&u((0,b.i8)(r.t0.message));case 16:case"end":return r.stop()}var l,f}),r,null,[[6,13]])})),function(){var n=this,e=arguments;return new Promise((function(t,r){var i=d.apply(n,e);function a(n){Ce(i,t,r,a,o,"next",n)}function o(n){Ce(i,t,r,a,o,"throw",n)}a(void 0)}))});return(0,r.jsx)("div",{className:"mx-1",children:(0,r.jsxs)(T.Z,{className:"form-inline",children:[(0,r.jsx)(E.Z,{ref:e,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightFocusRid: ",n]},n)}))}),(0,r.jsx)(E.Z,{ref:t,children:_.I7.map((function(n){return""===n?null:(0,r.jsxs)("option",{value:n,children:["SpotlightUnfocusRid: ",n,"\xa0\xa0\xa0"]},n)}))}),(0,r.jsx)("input",{className:"btn btn-secondary",type:"button",name:"requestSpotlightRidBySendConnectionId",defaultValue:"requestSpotlightRid",onClick:f})]})})};function be(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var ye=function(n){var e,t=(0,a.C)((function(n){return n.soraContents.sora})),i=(0,a.C)((function(n){return n.channelId})),o=(0,a.C)((function(n){return n.apiUrl})),c=(0,a.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j(o,i,t.connectionId,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var a,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(n){be(a,r,i,o,c,"next",n)}function c(n){be(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary btn-sm mx-1",type:"button",name:"resetRtpStream",defaultValue:"reset rid",onClick:s})};function Ie(n,e,t,r,i,a,o){try{var c=n[a](o),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}var Ze=function(n){var e,t=(0,a.C)((function(n){return n.soraContents.sora})),i=(0,a.C)((function(n){return n.channelId})),o=(0,a.C)((function(n){return n.apiUrl})),c=(0,a.T)(),s=(e=l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.connectionId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g(o,i,t.connectionId,n.sendConnectionId);case 5:r=e.sent,c((0,b.du)("POST successed. response: ".concat(JSON.stringify(r)))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),a=e.t0,(null!=(s=Error)&&"undefined"!==typeof Symbol&&s[Symbol.hasInstance]?s[Symbol.hasInstance](a):a instanceof s)&&c((0,b.i8)(e.t0.message));case 12:case"end":return e.stop()}var a,s}),e,null,[[2,9]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(n){Ie(a,r,i,o,c,"next",n)}function c(n){Ie(a,r,i,o,c,"throw",n)}o(void 0)}))});return(0,r.jsx)("input",{className:"btn btn-secondary mx-1",type:"button",name:"resetSpotlightRid",defaultValue:"resetSpotlightRid",onClick:s})};function Ne(n,e,t){if(null!==e){var r=[];return"video"===t?r=e.getVideoTracks().map((function(n){return n.id})):"audio"===t&&(r=e.getAudioTracks().map((function(n){return n.id}))),n.find((function(n){if(n.id&&!n.id.match(/^RTCMediaStreamTrack/))return!1;if("trackIdentifier"in n){var e=n;return e.trackIdentifier&&r.includes(e.trackIdentifier)}return!1}))}}var Se=function(n){var e=(0,a.C)((function(n){return n.soraContents.statsReport})),t=(0,a.C)((function(n){return n.soraContents.prevStatsReport})),i=Ne(e,n.stream,n.type),o=Ne(t,n.stream,n.type);if(!i)return null;var c=i.jitterBufferDelay,s=i.jitterBufferEmittedCount;o&&(c=i.jitterBufferDelay-o.jitterBufferDelay,s=i.jitterBufferEmittedCount-o.jitterBufferEmittedCount);var u=Math.floor(c/s*1e3),l="normal-jitter-buffer";return 500<u?l="critical-jitter-buffer":300<u?l="danger-jitter-buffer":100<u&&(l="warning-jitter-buffer"),(0,r.jsx)("div",{className:"btn btn-sm mx-1 ".concat(l),children:(0,r.jsxs)("span",{children:[n.type,": ",u]})})};function we(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=[],r=!0,i=!1,a=void 0;try{for(var o,c=n[Symbol.iterator]();!(r=(o=c.next()).done)&&(t.push(o.value),!e||t.length!==e);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return t}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Te(n,e){if(null===e)return[];var t=e.getTracks().map((function(n){return n.id})),r=[],i=!0,a=!1,o=void 0;try{for(var c,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;if((!u.id||u.id.match(/^RTCMediaStreamTrack/))&&"trackIdentifier"in u){var l=u;l.trackIdentifier&&t.includes(l.trackIdentifier)&&r.push(l)}}}catch(d){a=!0,o=d}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return r}var ke=function(n){var e=(0,a.C)((function(n){return n.showStats})),t=(0,a.C)((function(n){return n.soraContents.statsReport})),i=(0,a.C)((function(n){return n.soraContents.prevStatsReport}));if(!e)return null;var o=Te(t,n.stream),c=Te(i,n.stream);return(0,r.jsx)(r.Fragment,{children:o.map((function(n){var e=0,t=0,i=c.find((function(e){return n.id===e.id}));return i&&(e=n.jitterBufferDelay-i.jitterBufferDelay,t=n.jitterBufferEmittedCount-i.jitterBufferEmittedCount),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{className:"mediastream-stats-report",children:[Object.entries(n).map((function(n){var e=we(n,2),t=e[0],i=e[1];return(0,r.jsxs)("li",{children:[(0,r.jsxs)("strong",{children:[t,":"]})," ",i]},t)})),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"[jitterBufferDelay/jitterBufferEmittedCount_in_ms]"})," ",Math.floor(e/t*1e3)]})]})},n.id)}))})},Re=function(n){var e=(0,i.useState)(0),t=e[0],o=e[1],c=(0,a.C)((function(n){return n.audioOutput})),s=(0,a.C)((function(n){return n.displayResolution})),u=(0,a.C)((function(n){return n.focusedSpotlightConnectionIds})),l=(0,a.C)((function(n){return n.multistream})),d=(0,a.C)((function(n){return n.mute})),f=(0,a.C)((function(n){return n.simulcast})),m=(0,a.C)((function(n){return n.spotlight})),v=n.stream.id&&u[n.stream.id];return(0,r.jsxs)("div",{className:"col-auto",children:[(0,r.jsxs)("div",{className:"video-status",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[(0,r.jsx)(ee,{connectionId:n.stream.id}),(0,r.jsx)(Se,{type:"audio",stream:n.stream}),(0,r.jsx)(Se,{type:"video",stream:n.stream})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 video-status-inner",children:[!m&&l&&f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(je,{rid:"r0",sendConnectionId:n.stream.id}),(0,r.jsx)(je,{rid:"r1",sendConnectionId:n.stream.id}),(0,r.jsx)(je,{rid:"r2",sendConnectionId:n.stream.id}),(0,r.jsx)(ye,{sendConnectionId:n.stream.id})]}):null,m&&l&&f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge,{sendConnectionId:n.stream.id}),(0,r.jsx)(Ze,{sendConnectionId:n.stream.id})]}):null]})]}),(0,r.jsxs)("div",{className:"d-flex flex-wrap align-items-start",children:[(0,r.jsxs)("div",{className:"d-flex flex-nowrap align-items-start video-wrapper"+(v?" spotlight-focused":""),children:[(0,r.jsx)(ie,{stream:n.stream,setHeight:o,mute:d,audioOutput:c,displayResolution:s}),(0,r.jsx)(ve,{micDevice:!0,stream:n.stream,height:t})]}),(0,r.jsx)(ke,{stream:n.stream})]})]})},Oe=function(){var n=(0,a.C)((function(n){return n.soraContents.remoteMediaStreams}));return(0,r.jsx)("div",{className:"row my-2",children:n.map((function(n){return(0,r.jsx)(Re,{stream:n},n.id)}))})},Pe=function(){var n=(0,a.C)((function(n){return n.debug})),e=(0,a.C)((function(n){return n.role}));return(0,r.jsxs)("div",{className:n?"col-devtools col-6":"col-devtools col-12",children:[(0,r.jsx)(o.P,{}),(0,r.jsx)(F.P,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(B,{}),(0,r.jsx)(qn,{}),(0,r.jsx)(Mn,{}),(0,r.jsx)(Vn,{}),(0,r.jsx)(En.V,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(Pn,{}),(0,r.jsx)(un,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(H,{}),(0,r.jsx)(X,{}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)(c.l,{}),(0,r.jsx)(s.c,{}),(0,r.jsx)(I,{}),(0,r.jsx)(N,{})]}),(0,r.jsx)("hr",{className:"hr-form"}),(0,r.jsx)(xe,{}),"recvonly"===e||"sendrecv"===e?(0,r.jsx)(Oe,{}):null]})}}}]);